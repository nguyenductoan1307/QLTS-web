(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"4Saj":function(t,e,a){"use strict";a.r(e),a.d(e,"AngtenRfidModule",(function(){return W}));var o=a("ofXK"),i=a("tyNb"),n=a("FCZ4"),r=a("wzdi"),c=a("nS6G"),s=a("6i1F"),l=a("bzU9"),h=a("KALY"),u=a("K3ix"),d=a("nYR2"),b=a("fXoL"),m=a("3Pt+"),p=a("N7wC"),g=a("wd/R"),f=a("tk/3"),v=a("CR43"),C=a("j9gp"),T=a("7kUa"),y=a("Di65"),w=a("arFO"),D=a("V5BG"),I=a("dZIy"),S=a("teW+"),Z=a("eO1q"),x=a("0EPa");let R=(()=>{class t extends r.a{constructor(t,e,a,o,i,n,r){super(e),this._fb=t,this._fileDownloadService=a,this._lookupTableService=o,this._angtenRFIDServiceProxy=i,this.bsModalRef=n,this.http=r,this.onSave=new b.q,this.isActive=!1,this.loading=!0,this.saving=!1,this.isEdit=!1,this.isView=!1,this.filesAll=[],this.loaiTaiSanItems=[{id:1,displayName:"\u0110\u1ea7u \u0111\u1ecdc th\u1ebb RFID"},{id:2,displayName:"\u0110\u1ea7u \u0111\u1ecdc c\u1ed1 \u0111\u1ecbnh"}],this.uploading=!1,this.maxFile=3,this.filesAllImg=[],this.filesAllFile=[],this.returnMessage="",this.excelAcceptTypes=".",this.linkServer=c.a.remoteServiceBaseUrl,this.createInputDto=new h.o,this.demoDto=new h.F,this.viTriTSList=[],this.thongTinSDList=[],this.thongTinSCBDList=[],this.thongTinHongList=[],this.thongTinMatList=[],this.thongTinHuyList=[],this.thongTinThanhLyList=[],this.dateString="MM/DD/YYYY",this.ngayHienTai=g(new Date)}ngOnInit(){this.khoiTaoForm(),this._angtenRFIDServiceProxy.getUserDangNhap().subscribe(t=>{this.userDangNhap=t}),this._angtenRFIDServiceProxy.getAllNhaCC().subscribe(t=>{this.listNhaCC=t}),this._angtenRFIDServiceProxy.getAllLoaiTS().subscribe(t=>{this.listLoaiTS=t}),this.id?(this.isEdit=!0,this._angtenRFIDServiceProxy.getForEdit(this.id,this.isView).subscribe(t=>{this.demoDto=t,this._setValueForEdit()})):(this.demoDto=new h.F,this.isEdit=!1),this.isView?this.form.disable():this.form.enable(),this.form.controls.loaiTaiSan.setValue(this.loaiTaiSanItems.find(t=>2===t.id))}khoiTaoForm(){this.form=this._fb.group({tenTaiSan:["",m.y.required],loaiTaiSan:[],SerialNumber:[""],ProductNumber:[""],ReaderMACId:["",m.y.required],nhaCungCap:[""],hangSanXuat:[""],nguyenGia:[""],ngayMua:[""],ngayHetHanBH:[""],ngayHetHanSD:[""],ghiChu:[""]})}onDownloadFile(t){this._angtenRFIDServiceProxy.downloadFileUpload(t).subscribe(t=>{this._fileDownloadService.downloadTempFile(t)})}searchTrangThaiDuyet(t){const e=t.query;this._angtenRFIDServiceProxy.getAllNhaCC().subscribe(t=>{this.suggestionsSingle=this.filterTrangThaiDuyet(e,t)})}filterTrangThaiDuyet(t,e){const a=[];for(const o of e)0===o.displayName.toLowerCase().indexOf(t.toLowerCase())&&a.push(o);return a}save(){""===p.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._angtenRFIDServiceProxy.createOrEdit(this.createInputDto).pipe(Object(d.a)(()=>{this.saving=!1})).subscribe(t=>{this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}))}_getValueForSave(){var t,e;this.createInputDto.id=this.id,this.createInputDto.tenTS=this.form.controls.tenTaiSan.value,this.createInputDto.loaiTS=null===(t=this.form.controls.loaiTaiSan.value)||void 0===t?void 0:t.id,this.createInputDto.serialNumber=this.form.controls.SerialNumber.value,this.createInputDto.productNumber=this.form.controls.ProductNumber.value,this.createInputDto.readerMACId=this.form.controls.ReaderMACId.value,this.createInputDto.nhaCC=null===(e=this.form.controls.nhaCungCap.value)||void 0===e?void 0:e.id,this.createInputDto.hangSanXuat=this.form.controls.hangSanXuat.value,this.createInputDto.nguyenGia=this.form.controls.nguyenGia.value,this.createInputDto.ngayMua=this.form.controls.ngayMua.value,this.createInputDto.ngayBaoHanh=this.form.controls.ngayHetHanBH.value,this.createInputDto.hanSD=this.form.controls.ngayHetHanSD.value,this.createInputDto.ghiChu=this.form.controls.ghiChu.value}_setValueForEdit(){this.form.controls.tenTaiSan.setValue(this.demoDto.tenTS),this.form.controls.loaiTaiSan.setValue(this.loaiTaiSanItems.find(t=>t.id===this.demoDto.loaiTS)),this.form.controls.SerialNumber.setValue(this.demoDto.serialNumber),this.form.controls.ProductNumber.setValue(this.demoDto.productNumber),this.form.controls.ReaderMACId.setValue(this.demoDto.readerMacId),this.form.controls.nhaCungCap.setValue(this.listNhaCC.find(t=>t.id===this.demoDto.nhaCC)),this.form.controls.hangSanXuat.setValue(this.demoDto.hangSanXuat),this.form.controls.nguyenGia.setValue(this.demoDto.nguyenGia),this.form.controls.ngayMua.setValue(p.a.getDateForEditFromMoment(this.demoDto.ngayMua)),this.form.controls.ngayHetHanBH.setValue(p.a.getDateForEditFromMoment(this.demoDto.ngayBaoHanh)),this.form.controls.ngayHetHanSD.setValue(p.a.getDateForEditFromMoment(this.demoDto.hanSD)),this.form.controls.ghiChu.setValue(this.demoDto.ghiChu)}onSelectAll(t){this.filesAll.push(...t.addedFiles)}close(){this.bsModalRef.hide()}}return t.\u0275fac=function(e){return new(e||t)(b.Ub(m.d),b.Ub(b.u),b.Ub(l.a),b.Ub(h.T),b.Ub(h.c),b.Ub(u.a),b.Ub(f.b))},t.\u0275cmp=b.Ob({type:t,selectors:[["app-create-or-edit-angten-rfid"]],outputs:{onSave:"onSave"},features:[b.Fb],decls:68,vars:56,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["type","text","id","tenTaiSan","name","tenTaiSan","formControlName","tenTaiSan","maxlength","50","pInputText",""],[3,"control"],[3,"form","title"],["formControlName","loaiTaiSan","placeholder","Ch\u1ecdn","optionLabel","displayName","resetFilterOnHide","true",3,"disabled","options","showClear","filter"],["type","text","id","SerialNumber","name","SerialNumber","formControlName","SerialNumber","pInputText","","maxlength","255"],["type","text","id","ProductNumber","name","ProductNumber","formControlName","ProductNumber","pInputText","","maxlength","255"],["type","text","id","ReaderMACId","name","ReaderMACId","formControlName","ReaderMACId","pInputText","","maxlength","50"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["field","displayName","formControlName","nhaCungCap",3,"suggestions","dropdown","forceSelection","size","completeMethod"],["type","text","id","hangSanXuat","name","hangSanXuat","formControlName","hangSanXuat","maxlength","255","pInputText",""],[3,"title"],["decimal","","id","nguyenGia","name","nguyenGia","formControlName","nguyenGia","maxlength","50","pInputText",""],["formControlName","ngayMua",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],["formControlName","ngayHetHanBH",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],["formControlName","ngayHetHanSD",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","ghiChu","id","ghiChu","rows","4","maxlength","4000",1,"form-control"],[3,"cancelDisabled","saveHidden","cancelLabel","onCancelClick"]],template:function(t,e){1&t&&(b.ac(0,"form",0,1),b.ic("ngSubmit",(function(){return e.save()})),b.ac(2,"abp-modal-header",2),b.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),b.Zb(),b.ac(3,"div",3),b.ac(4,"div",4),b.ac(5,"div",5),b.ac(6,"div",6),b.Vb(7,"dft-label-validation",7),b.Vb(8,"input",8),b.Vb(9,"dft-validation",9),b.Zb(),b.Zb(),b.ac(10,"div",5),b.ac(11,"div",6),b.Vb(12,"dft-label-validation",10),b.Vb(13,"p-dropdown",11),b.Zb(),b.Zb(),b.Zb(),b.ac(14,"div",4),b.ac(15,"div",5),b.ac(16,"div",6),b.Vb(17,"dft-label-validation",7),b.Vb(18,"input",12),b.Vb(19,"dft-validation",9),b.Zb(),b.Zb(),b.ac(20,"div",5),b.ac(21,"div",6),b.Vb(22,"dft-label-validation",7),b.Vb(23,"input",13),b.Vb(24,"dft-validation",9),b.Zb(),b.Zb(),b.Zb(),b.ac(25,"div",4),b.ac(26,"div",5),b.ac(27,"div",6),b.Vb(28,"dft-label-validation",7),b.Vb(29,"input",14),b.Vb(30,"dft-validation",9),b.Zb(),b.Zb(),b.Vb(31,"div",5),b.Zb(),b.ac(32,"div",4),b.ac(33,"div",5),b.ac(34,"div",6),b.ac(35,"label",15),b.Rc(36,"Nh\xe0 cung c\u1ea5p"),b.Zb(),b.ac(37,"p-autoComplete",16),b.ic("completeMethod",(function(t){return e.searchTrangThaiDuyet(t)})),b.Zb(),b.Zb(),b.Zb(),b.ac(38,"div",5),b.ac(39,"div",6),b.Vb(40,"dft-label-validation",7),b.Vb(41,"input",17),b.Vb(42,"dft-validation",9),b.Zb(),b.Zb(),b.Zb(),b.ac(43,"div",4),b.ac(44,"div",5),b.ac(45,"div",6),b.Vb(46,"dft-label-validation",18),b.Vb(47,"input",19),b.Zb(),b.Zb(),b.ac(48,"div",5),b.ac(49,"div",6),b.Vb(50,"dft-label-validation",10),b.Vb(51,"p-calendar",20),b.Zb(),b.Zb(),b.Zb(),b.ac(52,"div",4),b.ac(53,"div",5),b.ac(54,"div",6),b.Vb(55,"dft-label-validation",10),b.Vb(56,"p-calendar",21),b.Zb(),b.Zb(),b.ac(57,"div",5),b.ac(58,"div",6),b.Vb(59,"dft-label-validation",10),b.Vb(60,"p-calendar",22),b.Zb(),b.Zb(),b.Zb(),b.ac(61,"div",4),b.ac(62,"div",23),b.ac(63,"div",6),b.Vb(64,"dft-label-validation",7),b.Vb(65,"textarea",24),b.Vb(66,"dft-validation",9),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(67,"abp-modal-footer",25),b.ic("onCancelClick",(function(){return e.bsModalRef.hide()})),b.Zb(),b.Zb()),2&t&&(b.sc("formGroup",e.form),b.Ib(2),b.sc("title",e.id?e.isView?"Xem chi ti\u1ebft: "+e.demoDto.tenTS:"C\u1eadp nh\u1eadt: "+e.demoDto.tenTS:"Th\xeam m\u1edbi \u0110\u1ea7u \u0111\u1ecdc"),b.Ib(5),b.sc("control",e.form.get("tenTaiSan"))("title","T\xean \u0111\u1ea7u \u0111\u1ecdc *"),b.Ib(2),b.sc("control",e.form.get("tenTaiSan")),b.Ib(3),b.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),b.Ib(1),b.sc("disabled",!0)("options",e.loaiTaiSanItems)("showClear",!0)("filter",!0),b.Ib(4),b.sc("control",e.form.get("SerialNumber"))("title","S/N (Serial Number)"),b.Ib(2),b.sc("control",e.form.get("SerialNumber")),b.Ib(3),b.sc("control",e.form.get("ProductNumber"))("title","P/N (Product Number)"),b.Ib(2),b.sc("control",e.form.get("ProductNumber")),b.Ib(4),b.sc("control",e.form.get("ReaderMACId"))("title","ReaderMACId *"),b.Ib(2),b.sc("control",e.form.get("ReaderMACId")),b.Ib(7),b.sc("suggestions",e.suggestionsSingle)("dropdown",!0)("forceSelection",!0)("size",30),b.Ib(3),b.sc("control",e.form.get("hangSanXuat"))("title","H\xe3ng s\u1ea3n xu\u1ea5t"),b.Ib(2),b.sc("control",e.form.get("hangSanXuat")),b.Ib(4),b.sc("title","Nguy\xean gi\xe1 (VN\u0110)"),b.Ib(4),b.sc("form",e.form)("title","Ng\xe0y mua"),b.Ib(1),b.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),b.Ib(4),b.sc("form",e.form)("title","Ng\xe0y h\u1ebft h\u1ea1n b\u1ea3o h\xe0nh"),b.Ib(1),b.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),b.Ib(3),b.sc("form",e.form)("title","Ng\xe0y h\u1ebft h\u1ea1n s\u1eed d\u1ee5ng"),b.Ib(1),b.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),b.Ib(4),b.sc("control",e.form.get("ghiChu"))("title","Ghi ch\xfa"),b.Ib(2),b.sc("control",e.form.get("ghiChu")),b.Ib(1),b.sc("cancelDisabled",e.saving)("saveHidden",e.isView)("saveHidden",e.isView)("cancelLabel",e.isView?"\u0110\xf3ng":"H\u1ee7y"))},directives:[m.z,m.q,m.i,v.a,C.a,m.b,m.p,m.g,m.k,T.a,y.a,w.a,D.a,I.a,S.a,Z.a,x.a],styles:[""],data:{animation:[Object(n.b)()]}}),t})();var V=a("ukTS"),P=a("XDtX"),F=a("rEr+"),N=a("7zfz"),k=a("oStN");const L=["dt"];function _(t,e){1&t&&(b.ac(0,"tr"),b.ac(1,"th",36),b.Vb(2,"p-tableHeaderCheckbox"),b.Zb(),b.Vb(3,"th",36),b.ac(4,"th",37),b.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),b.Vb(6,"p-sortIcon",38),b.Zb(),b.ac(7,"th",39),b.Rc(8,"T\xean \u0111\u1ea7u \u0111\u1ecdc "),b.Vb(9,"p-sortIcon",40),b.Zb(),b.ac(10,"th",41),b.Rc(11,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),b.Vb(12,"p-sortIcon",42),b.Zb(),b.ac(13,"th",43),b.Rc(14,"T\xecnh tr\u1ea1ng s\u1eed d\u1ee5ng "),b.Vb(15,"p-sortIcon",44),b.Zb(),b.ac(16,"th",45),b.Rc(17,"Ng\xe0y mua "),b.Vb(18,"p-sortIcon",46),b.Zb(),b.ac(19,"th",47),b.Rc(20,"Nh\xe0 cung c\u1ea5p "),b.Vb(21,"p-sortIcon",48),b.Zb(),b.ac(22,"th",49),b.Rc(23,"S/N(Serial Number) "),b.Vb(24,"p-sortIcon",50),b.Zb(),b.ac(25,"th",51),b.Rc(26,"P/N(Product Number) "),b.Vb(27,"p-sortIcon",52),b.Zb(),b.Zb())}function M(t,e){if(1&t){const t=b.bc();b.ac(0,"tr",53),b.ac(1,"td",36),b.Vb(2,"p-tableCheckbox",54),b.Zb(),b.ac(3,"td",36),b.ac(4,"div",55),b.ac(5,"button",56),b.Vb(6,"i",57),b.Zb(),b.ac(7,"div",58),b.ac(8,"a",59),b.ic("click",(function(){b.Ic(t);const a=e.$implicit;return b.lc().view(a.id)})),b.Rc(9,"Xem"),b.Zb(),b.ac(10,"a",59),b.ic("click",(function(){b.Ic(t);const a=e.$implicit;return b.lc().create(a.id)})),b.Rc(11,"C\u1eadp nh\u1eadt"),b.Zb(),b.ac(12,"a",59),b.ic("click",(function(){b.Ic(t);const a=e.$implicit;return b.lc().delete(a)})),b.Rc(13,"X\xf3a"),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(14,"td",60),b.Rc(15),b.mc(16,"truncate"),b.Zb(),b.ac(17,"td",61),b.Rc(18),b.mc(19,"truncate"),b.Zb(),b.ac(20,"td",62),b.Rc(21),b.mc(22,"truncate"),b.Zb(),b.ac(23,"td",63),b.Rc(24),b.mc(25,"truncate"),b.Zb(),b.ac(26,"td",61),b.Rc(27),b.mc(28,"truncate"),b.Zb(),b.ac(29,"td",64),b.Rc(30),b.mc(31,"truncate"),b.Zb(),b.ac(32,"td",65),b.Rc(33),b.mc(34,"truncate"),b.Zb(),b.ac(35,"td",66),b.Rc(36),b.mc(37,"truncate"),b.Zb(),b.Zb()}if(2&t){const t=e.$implicit;b.Ib(2),b.sc("value",t),b.Ib(13),b.Tc(" ",b.nc(16,9,t.maEPC)," "),b.Ib(3),b.Tc(" ",b.nc(19,11,t.tenTS)," "),b.Ib(3),b.Tc(" ",b.nc(22,13,t.phongBanQL)," "),b.Ib(3),b.Tc(" ",b.nc(25,15,t.tinhTrangSuDung)," "),b.Ib(3),b.Tc(" ",b.nc(28,17,t.ngayMua)," "),b.Ib(3),b.Tc(" ",b.nc(31,19,t.nhaCungCap)," "),b.Ib(3),b.Tc(" ",b.nc(34,21,t.serialNumber)," "),b.Ib(3),b.Tc(" ",b.nc(37,23,t.productNumber)," ")}}function B(t,e){if(1&t&&(b.ac(0,"tr"),b.ac(1,"td",67),b.Rc(2),b.Zb(),b.Zb()),2&t){const t=b.lc();b.Ib(2),b.Sc(t.khongCoDuLieu)}}const H=c.a.remoteServiceBaseUrl+"/api/Upload/NhaCungCapUpload";let E=(()=>{class t extends r.a{constructor(t,e,a,o,i,n,r){super(t),this._modalService=e,this._angtenRFIDServiceProxy=a,this._fb=o,this._http=i,this._fileDownloadService=n,this._lookupTableService=r,this.loading=!0,this.exporting=!1,this.totalCount=0,this.records=[],this.selectedList=[],this.listIdXoa=[],this.titleNotice="B\u1ea1n ch\u1eafc ch\u1eafn kh\xf4ng?",this.keyword=""}ngOnInit(){this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(t=>{this.toChucItems={data:t,selectedData:t.map(t=>t.id)},this.toChucValue=t.map(t=>t.id),this.getDataPage(!1)}),this._lookupTableService.getAllLoaiTaiSanTree().subscribe(t=>{this.loaiTaiSanItems=this.getTreeviewItem(t)}),this._lookupTableService.getAllTrangThaiTaiSanTimKiem().subscribe(t=>{this.listTrangThaiTaiSan=t}),this.khoiTaoForm()}khoiTaoForm(){this.form=this._fb.group({keyword:[""],PhongBan:[""],TinhTrangFilter:[""]})}getDataPage(t,e){var a;console.log(e),this.selectedList=[],this.loading=!0,this._angtenRFIDServiceProxy.getAll(this.keyword||void 0,this.toChucValue,null===(a=this.form.controls.TinhTrangFilter.value)||void 0===a?void 0:a.id,t,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)(()=>{this.loading=!1})).subscribe(t=>{this.records=t.items,this.totalCount=t.totalCount})}create(t){this._showCreateOrEditDemoDialog(t)}view(t){this._showCreateOrEditDemoDialog(t,!0)}_showCreateOrEditDemoDialog(t,e=!1){let a;a=this._modalService.show(R,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:t,isView:e}}),a.content.onSave.subscribe(()=>{this.getDataPage(!1)})}delete(t){0===t.trangThaiId?this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+t.tenTS+" s\u1ebd b\u1ecb x\xf3a!",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(e=>{e.value&&this._angtenRFIDServiceProxy.deleted(t.id).subscribe(()=>{this.showDeleteMessage(),this.getDataPage(!1)})}):this._thongBao("T\xe0i s\u1ea3n "+t.tenTS+" s\u1ebd b\u1ecb x\xf3a!","\u0110\u1ea7u \u0111\u1ecdc c\u1ed1 \u0111\u1ecbnh \u0111ang c\xf3 r\u1eb1ng bu\u1ed9c d\u1eef li\u1ec7u, kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!")}xoaList(t){t.filter(t=>0===t.trangThaiId).forEach(t=>{this.listIdXoa.push(t.id)}),this.listIdXoa.length>0?this.swal.fire({title:this.titleNotice,text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd b\u1ecb x\xf3a.",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(t=>{t.value&&this._angtenRFIDServiceProxy.xoaList(this.listIdXoa).subscribe(()=>{this.showDeleteMessage(),this.getDataPage(!1)})}):this._thongBao("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd b\u1ecb x\xf3a.","X\xf3a kh\xf4ng th\xe0nh c\xf4ng!")}importExcel(){this._showImportDemoDialog()}_showImportDemoDialog(){let t;t=this._modalService.show(s.a,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{maxFile:1,excelAcceptTypes:this.excelAcceptTypes}}),t.content.onDownload.subscribe(()=>{this._angtenRFIDServiceProxy.downloadFileMau().subscribe(e=>{t.content.downLoading=!1,this._fileDownloadService.downloadTempFile(e)})}),t.content.onSave.subscribe(e=>{t.content.returnMessage="\u0110ang upload file....";const a=new FormData;for(let t=0;t<e.length;t++)a.append(t+1+"",e[t]);this._http.post(H,a).subscribe(e=>{this._angtenRFIDServiceProxy.importFileExcel(e.result[0]).subscribe(e=>{t.content.returnMessage=e,t.content.uploading=!1,t.content.uploadDone()})})}),t.content.onClose.subscribe(()=>{this.getDataPage(!1)})}exportToExcel(){var t;this.exporting=!0,this.input=new h.J,this.input.tenTS=this.keyword||void 0,this.input.phongBanSuDung=this.toChucValue,this.input.tinhTrangSuDung=null===(t=this.form.controls.TinhTrangFilter.value)||void 0===t?void 0:t.id,this.input.skipCount=0,this.input.maxResultCount=1e7,this._angtenRFIDServiceProxy.exportToExcel(this.input).subscribe(t=>{this._fileDownloadService.downloadTempFile(t),this.exporting=!1},()=>{this.exporting=!1})}_thongBao(t,e){this.swal.fire({title:this.titleNotice,text:t,icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(()=>{this.showExistMessage(e)})}}return t.\u0275fac=function(e){return new(e||t)(b.Ub(b.u),b.Ub(u.b),b.Ub(h.c),b.Ub(m.d),b.Ub(f.b),b.Ub(l.a),b.Ub(h.T))},t.\u0275cmp=b.Ob({type:t,selectors:[["app-angten-rfid"]],viewQuery:function(t,e){var a;1&t&&b.Vc(L,!0),2&t&&b.Ec(a=b.jc())&&(e.table=a.first)},features:[b.Fb],decls:51,vars:26,consts:[["id","toanBoTS",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5","m-t-5",2,"width","130px !important",3,"click"],[1,"fa","fa-upload"],[2,"margin-left","5px"],["type","button",1,"btn","btn-success","m-r-5","m-t-5",2,"width","130px !important",3,"buttonBusy","click"],[1,"fa","fa-download"],["type","button",1,"btn","btn-primary","m-r-5","m-t-5",2,"width","130px !important",3,"click"],[1,"fa","fa-plus"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"form-horizontal",3,"formGroup"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],["formControlName","TinhTrangFilter","placeholder","Ch\u1ecdn","optionLabel","displayName","resetFilterOnHide","true",3,"options","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-trash"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","maEPC",1,"width-180"],["field","maEPC"],["pSortableColumn","tenTS",1,"width-150"],["field","tenTS"],["pSortableColumn","phongBanQL",1,"width-220"],["field","phongBanQL"],["pSortableColumn","trangThaiId",1,"width-200"],["field","trangThaiId"],["pSortableColumn","ngayMuaDateTime",1,"width-150"],["field","ngayMuaDateTime"],["pSortableColumn","nhaCungCap",1,"width-170"],["field","nhaCungCap"],["pSortableColumn","serialNumber",1,"width-190"],["field","serialNumber"],["pSortableColumn","productNumber",1,"width-210"],["field","productNumber"],[1,"ui-selectable-row"],[3,"value"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"width-180"],[1,"width-150"],[1,"width-220"],[1,"width-200"],[1,"width-170"],[1,"width-190"],[1,"width-210"],["colspan","8",1,"text-left"]],template:function(t,e){1&t&&(b.ac(0,"div"),b.ac(1,"section",0),b.ac(2,"div",1),b.ac(3,"div",2),b.ac(4,"div",3),b.ac(5,"h1"),b.Rc(6,"Danh s\xe1ch \u0110\u1ea7u \u0111\u1ecdc c\u1ed1 \u0111\u1ecbnh"),b.Zb(),b.Zb(),b.ac(7,"div",4),b.ac(8,"button",5),b.ic("click",(function(){return e.importExcel()})),b.Vb(9,"i",6),b.ac(10,"span",7),b.Rc(11,"Nh\u1eadp Excel"),b.Zb(),b.Zb(),b.ac(12,"button",8),b.ic("click",(function(){return e.exportToExcel()})),b.Vb(13,"i",9),b.ac(14,"span",7),b.Rc(15,"Xu\u1ea5t Excel"),b.Zb(),b.Zb(),b.ac(16,"button",10),b.ic("click",(function(){return e.create()})),b.Vb(17,"i",11),b.ac(18,"span",7),b.Rc(19,"Th\xeam m\u1edbi"),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(20,"section",12),b.ac(21,"div",1),b.ac(22,"div",13),b.ac(23,"div",14),b.ac(24,"div",15),b.ac(25,"div",16),b.ac(26,"button",17),b.ic("click",(function(){return e.getDataPage(!0)})),b.Vb(27,"i",18),b.Zb(),b.Zb(),b.ac(28,"input",19),b.ic("ngModelChange",(function(t){return e.keyword=t}))("keyup.enter",(function(){return e.getDataPage(!0)})),b.Zb(),b.Zb(),b.ac(29,"form",20),b.ac(30,"div",21),b.ac(31,"div",22),b.ac(32,"div",23),b.Vb(33,"dft-label-validation",24),b.ac(34,"app-multiple-select-tree",25),b.ic("onSelect",(function(t){return e.toChucValue=t})),b.Zb(),b.Zb(),b.Zb(),b.ac(35,"div",22),b.ac(36,"div",23),b.Vb(37,"dft-label-validation",24),b.Vb(38,"p-dropdown",26),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(39,"div",27),b.ac(40,"div",28),b.ac(41,"button",29),b.ic("click",(function(){return e.xoaList(e.selectedList)})),b.Vb(42,"i",30),b.ac(43,"span",7),b.Rc(44,"X\xf3a"),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(45,"div"),b.ac(46,"p-table",31,32),b.ic("onLazyLoad",(function(t){return e.getDataPage(!1,t)}))("selectionChange",(function(t){return e.selectedList=t})),b.Pc(48,_,28,0,"ng-template",33),b.Pc(49,M,38,25,"ng-template",34),b.Pc(50,B,3,1,"ng-template",35),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb()),2&t&&(b.sc("@routerTransition",void 0),b.Ib(12),b.sc("buttonBusy",e.exporting),b.Ib(16),b.sc("placeholder","Nh\u1eadp t\xean \u0111\u1ea7u \u0111\u1ecdc")("ngModel",e.keyword),b.Ib(1),b.sc("formGroup",e.form),b.Ib(4),b.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),b.Ib(1),b.sc("dataEdit",e.toChucItems),b.Ib(3),b.sc("form",e.form)("title","T\xecnh tr\u1ea1ng s\u1eed d\u1ee5ng"),b.Ib(1),b.sc("options",e.listTrangThaiTaiSan)("showClear",!0)("filter",!0),b.Ib(3),b.sc("disabled",0===e.selectedList.length),b.Ib(5),b.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),b.tc("scrollHeight",e.scrollHeight),b.sc("value",e.records)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.selectedList))},directives:[V.a,m.b,m.p,m.s,m.z,m.q,m.i,C.a,P.a,w.a,m.g,F.c,N.d,F.e,F.b,F.a,F.d],pipes:[k.a],styles:[""],data:{animation:[Object(n.b)()]}}),t})();const A=["dt"];function U(t,e){1&t&&(b.ac(0,"tr"),b.ac(1,"th",33),b.Rc(2,"M\xe3 t\xe0i s\u1ea3n (EPC) "),b.Vb(3,"p-sortIcon",34),b.Zb(),b.ac(4,"th",35),b.Rc(5,"T\xean t\xe0i s\u1ea3n "),b.Vb(6,"p-sortIcon",36),b.Zb(),b.ac(7,"th",37),b.Rc(8,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),b.Vb(9,"p-sortIcon",38),b.Zb(),b.ac(10,"th",39),b.Rc(11,"Ng\xe0y di chuy\u1ec3n "),b.Vb(12,"p-sortIcon",40),b.Zb(),b.ac(13,"th",41),b.Rc(14,"Chi\u1ec1u di chuy\u1ec3n "),b.Vb(15,"p-sortIcon",42),b.Zb(),b.ac(16,"th",43),b.Rc(17,"Ph\xe2n lo\u1ea1i "),b.Vb(18,"p-sortIcon",44),b.Zb(),b.Zb())}function O(t,e){if(1&t&&(b.ac(0,"tr",45),b.ac(1,"td",46),b.Rc(2),b.mc(3,"truncate"),b.Zb(),b.ac(4,"td",47),b.Rc(5),b.mc(6,"truncate"),b.Zb(),b.ac(7,"td",48),b.Rc(8),b.mc(9,"truncate"),b.Zb(),b.ac(10,"td",49),b.Rc(11),b.mc(12,"date"),b.Zb(),b.ac(13,"td",50),b.Rc(14),b.mc(15,"truncate"),b.Zb(),b.ac(16,"td",51),b.Rc(17),b.mc(18,"truncate"),b.Zb(),b.Zb()),2&t){const t=e.$implicit;b.Ib(2),b.Tc(" ",b.nc(3,6,t.maRFID)," "),b.Ib(3),b.Tc(" ",b.nc(6,8,t.tenTaiSan)," "),b.Ib(3),b.Tc(" ",b.nc(9,10,t.donViSuDung)," "),b.Ib(3),b.Tc(" ",b.oc(12,12,t.ngayDiChuyen,"dd/MM/yyyy hh:mm:ss")," "),b.Ib(3),b.Tc(" ",b.nc(15,15,t.chieuDiChuyen)," "),b.Ib(3),b.Tc(" ",b.nc(18,17,t.phanLoai)," ")}}function z(t,e){if(1&t&&(b.ac(0,"tr"),b.ac(1,"td",52),b.Rc(2),b.Zb(),b.Zb()),2&t){const t=b.lc();b.Ib(2),b.Sc(t.khongCoDuLieu)}}let X=(()=>{class t extends r.a{constructor(t,e,a,o,i){super(t),this._lichsuRaVaoAngtenServiceProxy=e,this._fb=a,this._lookupTableService=o,this._fileDownloadService=i,this.loading=!0,this.totalCount=0,this.records=[],this.exporting=!1,this.listChieuDiChuyen=[],this.listPhanLoaiTaiSan=[],this.toChucValue=[]}ngOnInit(){this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(t=>{this.toChucItems={data:t,selectedData:t.map(t=>t.id)},this.toChucValue=t.map(t=>t.id),this.getDataPage(!1)}),this._lookupTableService.getAllPhanLoaiTaiSanTrongHeThong().subscribe(t=>{this.listPhanLoaiTaiSan=t}),this._lookupTableService.getAllChieuTaiSanDiChuyen().subscribe(t=>{this.listChieuDiChuyen=t}),this.khoiTaoForm()}khoiTaoForm(){this.form=this._fb.group({keyword:[""],PhongBan:[""],PhanLoaiFilter:[""],chieuDiChuyen:[""],DateFromTo:[]})}getDataPage(t,e){var a,o;this.toChucValue.length>0&&(this.loading=!0,this._lichsuRaVaoAngtenServiceProxy.getAll(this.form.controls.keyword.value||void 0,this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[0]:null,this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[1]:null,null===(a=this.form.controls.chieuDiChuyen.value)||void 0===a?void 0:a.displayName,this.toChucValue,null===(o=this.form.controls.PhanLoaiFilter.value)||void 0===o?void 0:o.id,t,this.getSortField(this.table),e?e.first:0,e?e.rows:this.table.rows).pipe(Object(d.a)(()=>{this.loading=!1})).subscribe(t=>{this.records=t.items,this.totalCount=t.totalCount}))}exportToExcel(){var t,e;this.exporting=!0,this.input=new h.I,this.input.keyword=this.form.controls.keyword.value||void 0,this.input.startDate=this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[0]:null,this.input.endDate=this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[1]:null,this.input.chieuDiChuyen=null===(t=this.form.controls.chieuDiChuyen.value)||void 0===t?void 0:t.displayName,this.input.boPhanId=this.toChucValue,this.input.phanLoaiId=null===(e=this.form.controls.PhanLoaiFilter.value)||void 0===e?void 0:e.id,this.input.skipCount=0,this.input.maxResultCount=1e7,this._lichsuRaVaoAngtenServiceProxy.exportLichSuRaVaoToExcel(this.input).subscribe(t=>{this._fileDownloadService.downloadTempFile(t),this.exporting=!1},()=>{this.exporting=!1})}}return t.\u0275fac=function(e){return new(e||t)(b.Ub(b.u),b.Ub(h.P),b.Ub(m.d),b.Ub(h.T),b.Ub(l.a))},t.\u0275cmp=b.Ob({type:t,selectors:[["app-giam-sat-tai-san"]],viewQuery:function(t,e){var a;1&t&&b.Vc(A,!0),2&t&&b.Ec(a=b.jc())&&(e.table=a.first)},features:[b.Fb],decls:47,vars:33,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5","m-t-5",2,"width","130px !important",3,"buttonBusy","click"],[1,"fa","fa-download"],[2,"margin-left","5px"],["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup"],["createUserModal","ngForm"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword","formControlName","keyword",1,"form-control",3,"placeholder","keyup.enter"],[1,"ui-fluid","row"],[1,"col-lg-6","col-xs-12"],[1,"form-group"],["for","Time","id","Time"],["formControlName","DateFromTo","selectionMode","range",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-6"],[3,"form","title"],[3,"dataEdit","onSelect"],["formControlName","chieuDiChuyen","placeholder","Ch\u1ecdn","optionLabel","displayName","resetFilterOnHide","true",3,"options","showClear","filter"],["formControlName","PhanLoaiFilter","placeholder","Ch\u1ecdn","optionLabel","displayName","resetFilterOnHide","true",3,"options","showClear","filter"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","maRFID",1,"width-200"],["field","maRFID"],["pSortableColumn","tenTaiSan",1,"width-200"],["field","tenTaiSan"],["pSortableColumn","donViSuDung",1,"width-150"],["field","donViSuDung"],["pSortableColumn","ngayDiChuyen",1,"width-130"],["field","ngayDiChuyen"],["pSortableColumn","chieuDiChuyen",1,"width-70"],["field","chieuDiChuyen"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],[1,"ui-selectable-row"],[1,"width-230"],[1,"width-200"],[1,"width-180"],[1,"width-150"],[1,"width-70"],[1,"width-170"],["colspan","8",1,"text-left"]],template:function(t,e){1&t&&(b.ac(0,"div"),b.ac(1,"section",0),b.ac(2,"div",1),b.ac(3,"div",2),b.ac(4,"div",3),b.ac(5,"h1"),b.Rc(6,"Gi\xe1m s\xe1t t\xe0i s\u1ea3n"),b.Zb(),b.Zb(),b.ac(7,"div",4),b.ac(8,"button",5),b.ic("click",(function(){return e.exportToExcel()})),b.Vb(9,"i",6),b.ac(10,"span",7),b.Rc(11,"Xu\u1ea5t Excel"),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(12,"form",8,9),b.ac(14,"section",10),b.ac(15,"div",11),b.ac(16,"div",12),b.ac(17,"div",13),b.ac(18,"div",14),b.ac(19,"button",15),b.ic("click",(function(){return e.getDataPage(!0)})),b.Vb(20,"i",16),b.Zb(),b.Zb(),b.ac(21,"input",17),b.ic("keyup.enter",(function(){return e.getDataPage(!0)})),b.Zb(),b.Zb(),b.Vb(22,"br"),b.ac(23,"div",18),b.ac(24,"div",19),b.ac(25,"div",20),b.ac(26,"label",21),b.Rc(27,"Th\u1eddi gian"),b.Zb(),b.Vb(28,"p-calendar",22),b.Zb(),b.Zb(),b.ac(29,"div",23),b.ac(30,"div",20),b.Vb(31,"dft-label-validation",24),b.ac(32,"app-multiple-select-tree",25),b.ic("onSelect",(function(t){return e.toChucValue=t})),b.Zb(),b.Zb(),b.Zb(),b.ac(33,"div",23),b.ac(34,"div",20),b.Vb(35,"dft-label-validation",24),b.Vb(36,"p-dropdown",26),b.Zb(),b.Zb(),b.ac(37,"div",23),b.ac(38,"div",20),b.Vb(39,"dft-label-validation",24),b.Vb(40,"p-dropdown",27),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(41,"div"),b.ac(42,"p-table",28,29),b.ic("onLazyLoad",(function(t){return e.getDataPage(!1,t)})),b.Pc(44,U,19,0,"ng-template",30),b.Pc(45,O,19,19,"ng-template",31),b.Pc(46,z,3,1,"ng-template",32),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb()),2&t&&(b.sc("@routerTransition",void 0),b.Ib(8),b.sc("buttonBusy",e.exporting),b.Ib(4),b.sc("formGroup",e.form),b.Ib(9),b.sc("placeholder","Nh\u1eadp m\xe3 RFID, t\xean t\xe0i s\u1ea3n"),b.Ib(7),b.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),b.Ib(3),b.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),b.Ib(1),b.sc("dataEdit",e.toChucItems),b.Ib(3),b.sc("form",e.form)("title","Chi\u1ec1u di chuy\u1ec3n"),b.Ib(1),b.sc("options",e.listChieuDiChuyen)("showClear",!0)("filter",!0),b.Ib(3),b.sc("form",e.form)("title","Ph\xe2n lo\u1ea1i"),b.Ib(1),b.sc("options",e.listPhanLoaiTaiSan)("showClear",!0)("filter",!0),b.Ib(2),b.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),b.tc("scrollHeight",e.scrollHeight),b.sc("value",e.records)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[V.a,m.z,m.q,m.i,m.b,m.p,m.g,Z.a,C.a,P.a,w.a,F.c,N.d,F.b,F.a],pipes:[k.a,o.d],styles:[""],data:{animation:[Object(n.b)()]}}),t})();var G=a("JeUU");const j=["dt"];function q(t,e){1&t&&(b.ac(0,"tr"),b.ac(1,"th",28),b.Rc(2,"M\xe3 RFID "),b.Vb(3,"p-sortIcon",29),b.Zb(),b.ac(4,"th",30),b.Rc(5,"Ng\xe0y di chuy\u1ec3n "),b.Vb(6,"p-sortIcon",31),b.Zb(),b.Zb())}function $(t,e){if(1&t){const t=b.bc();b.ac(0,"tr",32),b.ac(1,"td",33),b.Rc(2),b.mc(3,"truncate"),b.Zb(),b.ac(4,"td",34),b.Rc(5),b.mc(6,"date"),b.Zb(),b.ac(7,"td",35),b.ac(8,"div",36),b.ac(9,"button",37),b.ic("click",(function(){b.Ic(t);const a=e.$implicit;return b.lc().create(a.maRFID)})),b.Vb(10,"i",38),b.Zb(),b.Zb(),b.Zb(),b.Zb()}if(2&t){const t=e.$implicit;b.Ib(2),b.Tc(" ",b.nc(3,2,t.maRFID)," "),b.Ib(3),b.Tc(" ",b.oc(6,4,t.ngayDiChuyen,"dd/MM/yyyy hh:mm:ss")," ")}}function Q(t,e){if(1&t&&(b.ac(0,"tr"),b.ac(1,"td",39),b.Rc(2),b.Zb(),b.Zb()),2&t){const t=b.lc();b.Ib(2),b.Sc(t.khongCoDuLieu)}}const Y=[{path:"dau-doc-co-dinh",component:E},{path:"giam-sat-tai-san",component:X},{path:"theo-doi-ket-noi-thiet-bi",component:(()=>{class t extends r.a{constructor(t,e,a,o,i,n,r){super(t),this._lichsuRaVaoAngtenServiceProxy=e,this._toanBoTaiSanServiceProxy=a,this._fb=o,this._modalService=i,this._lookupTableService=n,this._fileDownloadService=r,this.selectedList=[],this.loading=!0,this.totalCount=0,this.records=[],this.createInputDto={TaiSanId:0,RFID:""},this.exporting=!1,this.listChieuDiChuyen=[],this.listPhanLoaiTaiSan=[]}ngOnInit(){this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(t=>{this.toChucItems={data:t,selectedData:t.map(t=>t.id)},this.toChucValue=t.map(t=>t.id),this.getDataPage(!1)}),this._lookupTableService.getAllPhanLoaiTaiSanTrongHeThong().subscribe(t=>{this.listPhanLoaiTaiSan=t}),this._lookupTableService.getAllChieuTaiSanDiChuyen().subscribe(t=>{this.listChieuDiChuyen=t}),this.khoiTaoForm()}khoiTaoForm(){this.form=this._fb.group({keyword:[""],PhongBan:[""],PhanLoaiFilter:[""],chieuDiChuyen:[""],DateFromTo:[]})}getDataPage(t,e){var a,o;this.selectedList=[],this.loading=!0,this._lichsuRaVaoAngtenServiceProxy.getAllTaiSanLa(this.form.controls.keyword.value||void 0,this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[0]:null,this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[1]:null,null===(a=this.form.controls.chieuDiChuyen.value)||void 0===a?void 0:a.id,this.toChucValue,null===(o=this.form.controls.PhanLoaiFilter.value)||void 0===o?void 0:o.id,t,this.getSortField(this.table),e?e.first:0,e?e.rows:this.table.rows).pipe(Object(d.a)(()=>{this.loading=!1})).subscribe(t=>{this.records=t.items,this.totalCount=t.totalCount})}exportToExcel(){var t,e;this.exporting=!0,this.input=new h.I,this.input.keyword=this.form.controls.keyword.value||void 0,this.input.startDate=this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[0]:null,this.input.endDate=this.form.controls.DateFromTo.value?this.form.controls.DateFromTo.value[1]:null,this.input.chieuDiChuyen=null===(t=this.form.controls.chieuDiChuyen.value)||void 0===t?void 0:t.id,this.input.boPhanId=this.toChucValue,this.input.phanLoaiId=null===(e=this.form.controls.PhanLoaiFilter.value)||void 0===e?void 0:e.id,this.input.skipCount=0,this.input.maxResultCount=1e7,this._lichsuRaVaoAngtenServiceProxy.exportTaiSanLaToExcel(this.input).subscribe(t=>{this._fileDownloadService.downloadTempFile(t),this.exporting=!1},()=>{this.exporting=!1})}create(t){this._showCreateOrEditDemoDialog(t)}_showCreateOrEditDemoDialog(t,e=!1){let a;a=this._modalService.show(G.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{isView:e}}),a.content.onSave.subscribe(e=>{this.createInputDto.TaiSanId=e,this.createInputDto.RFID=t,this._lichsuRaVaoAngtenServiceProxy.update(this.createInputDto).subscribe(()=>{this.getDataPage(!1)})})}}return t.\u0275fac=function(e){return new(e||t)(b.Ub(b.u),b.Ub(h.P),b.Ub(h.zb),b.Ub(m.d),b.Ub(u.b),b.Ub(h.T),b.Ub(l.a))},t.\u0275cmp=b.Ob({type:t,selectors:[["app-theo-doi-ket-noi-thiet-bi"]],viewQuery:function(t,e){var a;1&t&&b.Vc(j,!0),2&t&&b.Ec(a=b.jc())&&(e.table=a.first)},features:[b.Fb],decls:35,vars:21,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5","m-t-5",2,"width","130px !important",3,"buttonBusy","click"],[1,"fa","fa-download"],[2,"margin-left","5px"],["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup"],["createUserModal","ngForm"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword","formControlName","keyword",1,"form-control",3,"placeholder","keyup.enter"],[1,"ui-fluid","row"],[1,"col-lg-6","col-xs-12"],[1,"form-group"],["for","Time","id","Time"],["formControlName","DateFromTo","selectionMode","range",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","maRFID",1,"width-200"],["field","maRFID"],["pSortableColumn","ngayDiChuyen",1,"width-130"],["field","ngayDiChuyen"],[1,"ui-selectable-row"],[1,"width-270"],[1,"width-150"],[1,"width-30"],[1,"dropdown"],["type","button","aria-haspopup","true","aria-expanded","false",1,"btn","btn-sm","btn-transparent","btn-action",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],["colspan","8",1,"text-left"]],template:function(t,e){1&t&&(b.ac(0,"div"),b.ac(1,"section",0),b.ac(2,"div",1),b.ac(3,"div",2),b.ac(4,"div",3),b.ac(5,"h1"),b.Rc(6,"Theo d\xf5i k\u1ebft n\u1ed1i thi\u1ebft b\u1ecb"),b.Zb(),b.Zb(),b.ac(7,"div",4),b.ac(8,"button",5),b.ic("click",(function(){return e.exportToExcel()})),b.Vb(9,"i",6),b.ac(10,"span",7),b.Rc(11,"Xu\u1ea5t Excel"),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(12,"form",8,9),b.ac(14,"section",10),b.ac(15,"div",11),b.ac(16,"div",12),b.ac(17,"div",13),b.ac(18,"div",14),b.ac(19,"button",15),b.ic("click",(function(){return e.getDataPage(!0)})),b.Vb(20,"i",16),b.Zb(),b.Zb(),b.ac(21,"input",17),b.ic("keyup.enter",(function(){return e.getDataPage(!0)})),b.Zb(),b.Zb(),b.Vb(22,"br"),b.ac(23,"div",18),b.ac(24,"div",19),b.ac(25,"div",20),b.ac(26,"label",21),b.Rc(27,"Th\u1eddi gian"),b.Zb(),b.Vb(28,"p-calendar",22),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(29,"div"),b.ac(30,"p-table",23,24),b.ic("onLazyLoad",(function(t){return e.getDataPage(!1,t)}))("selectionChange",(function(t){return e.selectedList=t})),b.Pc(32,q,7,0,"ng-template",25),b.Pc(33,$,11,7,"ng-template",26),b.Pc(34,Q,3,1,"ng-template",27),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb()),2&t&&(b.sc("@routerTransition",void 0),b.Ib(8),b.sc("buttonBusy",e.exporting),b.Ib(4),b.sc("formGroup",e.form),b.Ib(9),b.sc("placeholder","Nh\u1eadp m\xe3 RFID"),b.Ib(7),b.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),b.Ib(2),b.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),b.tc("scrollHeight",e.scrollHeight),b.sc("value",e.records)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.selectedList))},directives:[V.a,m.z,m.q,m.i,m.b,m.p,m.g,Z.a,F.c,N.d,F.b,F.a],pipes:[k.a,o.d],styles:[""]}),t})()}];let K=(()=>{class t{}return t.\u0275mod=b.Sb({type:t}),t.\u0275inj=b.Rb({factory:function(e){return new(e||t)},imports:[[i.g.forChild(Y)],i.g]}),t})();var J=a("KZX/");let W=(()=>{class t{}return t.\u0275mod=b.Sb({type:t}),t.\u0275inj=b.Rb({factory:function(e){return new(e||t)},imports:[[o.b,J.a,K]]}),t})()}}]);