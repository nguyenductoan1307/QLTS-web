(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{YkK7:function(a,t,e){"use strict";e.r(t),e.d(t,"TaiSanModule",(function(){return ti}));var i=e("ofXK"),n=e("tyNb"),o=e("Di4U"),c=e("wzdi"),r=e("fXoL"),s=e("dPl2"),l=e("KALY"),h=e("K3ix"),b=e("JeUU"),u=e("nYR2"),d=e("FCZ4"),g=e("bzU9"),p=e("6i1F"),m=e("nS6G"),f=e("3Pt+"),T=e("tk/3"),C=e("ukTS"),v=e("j9gp"),S=e("XDtX"),Z=e("kKUO"),w=e("arFO"),y=e("rEr+"),I=e("7zfz"),k=e("oStN");const D=["dt"];function R(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",40),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",40),r.ac(4,"th",41),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",42),r.Zb(),r.ac(7,"th",43),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",44),r.Zb(),r.ac(10,"th",45),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",46),r.Zb(),r.ac(13,"th",47),r.Rc(14,"Serial Number "),r.Vb(15,"p-sortIcon",48),r.Zb(),r.ac(16,"th",49),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",50),r.Zb(),r.ac(19,"th",51),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",52),r.Zb(),r.ac(22,"th",53),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",54),r.Zb(),r.ac(25,"th",55),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",56),r.Zb(),r.ac(28,"th",57),r.Rc(29,"Tr\u1ea1ng th\xe1i "),r.Vb(30,"p-sortIcon",58),r.Zb(),r.ac(31,"th",59),r.Rc(32," M\xe3 s\u1eed d\u1ee5ng "),r.Vb(33,"p-sortIcon",60),r.Zb(),r.ac(34,"th",61),r.Rc(35,"V\u1ecb tr\xed t\xe0i s\u1ea3n "),r.Vb(36,"p-sortIcon",62),r.Zb(),r.Zb())}function V(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",63),r.ac(1,"td",40),r.Vb(2,"p-tableCheckbox",64),r.Zb(),r.ac(3,"td",40),r.ac(4,"div",65),r.ac(5,"button",66),r.Vb(6,"i",67),r.Zb(),r.ac(7,"div",68),r.ac(8,"a",69),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.ac(10,"a",69),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().create(e.id)})),r.Rc(11,"C\u1eadp nh\u1eadt"),r.Zb(),r.ac(12,"a",69),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().delete(e)})),r.Rc(13,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"td",70),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",70),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",70),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",71),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",71),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.ac(29,"td",70),r.Rc(30),r.mc(31,"truncate"),r.Zb(),r.ac(32,"td",70),r.Rc(33),r.mc(34,"number"),r.Zb(),r.ac(35,"td",72),r.Rc(36),r.mc(37,"truncate"),r.Zb(),r.ac(38,"td",70),r.Rc(39),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",70),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.ac(44,"td",70),r.Rc(45),r.mc(46,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit;r.Ib(2),r.sc("value",a),r.Ib(13),r.Tc(" ",r.nc(16,12,a.maEPC)," "),r.Ib(3),r.Tc(" ",r.nc(19,14,a.tenTS)," "),r.Ib(3),r.Tc(" ",r.nc(22,16,a.loaiTS)," "),r.Ib(3),r.Tc(" ",r.nc(25,18,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(28,20,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(31,22,a.ngayMua)," "),r.Ib(3),r.Tc(" ",r.nc(34,24,a.nguyenGia)," "),r.Ib(3),r.Tc(" ",r.nc(37,26,a.phongBanQL)," "),r.Ib(3),r.Tc(" ",r.nc(40,28,a.trangThai)," "),r.Ib(3),r.Tc(" ",r.nc(43,30,a.maSD)," "),r.Ib(3),r.Tc(" ",r.nc(46,32,a.viTriTS)," ")}}function P(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",73),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}const B=m.a.remoteServiceBaseUrl+"/api/Upload/ToanBoTSUpload";let x=(()=>{class a extends c.a{constructor(a,t,e,i,n,o,c){super(a),this._modalService=t,this._toanBoTaiSanServiceProxy=e,this._fb=i,this._lookupTableService=n,this._fileDownloadService=o,this._http=c,this.isActive=0,this.loading=!0,this.exporting=!1,this.totalCount=0,this.first=0,this.records=[],this.selectedList=[],this.titleNotice="B\u1ea1n ch\u1eafc ch\u1eafn kh\xf4ng?",this.listIdXoa=[]}ngOnInit(){this.khoiTaoForm(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)}),this._lookupTableService.getAllLoaiTaiSanTree().subscribe(a=>{this.loaiTaiSanItems=this.getTreeviewItem(a)}),this._toanBoTaiSanServiceProxy.getAllNhaCC().subscribe(a=>{this.nhaCC=a}),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan().subscribe(a=>{this.maSD=a})}ngOnChanges(a){var t;0===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&this.form&&this.table&&(this.getDataPage(!1),this.selectedList=[])}khoiTaoForm(){this.form=this._fb.group({PBQLFilter:[],LoaiTSFilter:[],NhaCCFilter:[],TinhTrangFilter:[],MaSDFilter:[]})}getDataPage(a,t){var e,i,n,o,c,r;this.first=0,this.loading=!0,this._toanBoTaiSanServiceProxy.getAll(this.keyword||void 0,this.toChucValue,this.loaiTaiSanValue,null===(i=null===(e=this.form)||void 0===e?void 0:e.controls.NhaCCFilter.value)||void 0===i?void 0:i.id,null===(o=null===(n=this.form)||void 0===n?void 0:n.controls.TinhTrangFilter.value)||void 0===o?void 0:o.id,null===(r=null===(c=this.form)||void 0===c?void 0:c.controls.MaSDFilter.value)||void 0===r?void 0:r.id,a,this.getSortField(this.table),t?t.first:this.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,this.totalCount=a.totalCount})}create(a){this._showCreateOrEditDemoDialog(a)}view(a){this._showCreateOrEditDemoDialog(a,!0)}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}searchTTSD(a){const t=a.query;this._lookupTableService.getAllTrangThaiTaiSan().subscribe(a=>{this.ttSD=this.filterTrangThaiDuyet(t,a)})}filterTrangThaiDuyet(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}delete(a){0===a.trangThaiId?this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTS+" s\u1ebd b\u1ecb x\xf3a!",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(t=>{t.value&&this._toanBoTaiSanServiceProxy.deleted(a.id).subscribe(()=>{this.showDeleteMessage(),this.getDataPage(!1)})}):this._thongBao("T\xe0i s\u1ea3n "+a.tenTS+" s\u1ebd b\u1ecb x\xf3a!","T\xe0i s\u1ea3n \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng, kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!")}xoaList(a){a.filter(a=>0===a.trangThaiId).forEach(a=>{this.listIdXoa.push(a.id)}),this.listIdXoa.length>0?this.swal.fire({title:this.titleNotice,text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd b\u1ecb x\xf3a.",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(a=>{a.value&&this._toanBoTaiSanServiceProxy.xoaList(this.listIdXoa).subscribe(()=>{this.showDeleteMessage(),this.getDataPage(!1),this.selectedList=[]})}):this._thongBao("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd b\u1ecb x\xf3a.","T\xe0i s\u1ea3n \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng, kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!")}importExcel(){this._showImportDemoDialog()}_showImportDemoDialog(){let a;a=this._modalService.show(p.a,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{maxFile:1,excelAcceptTypes:this.excelAcceptTypes}}),a.content.onDownload.subscribe(()=>{this._toanBoTaiSanServiceProxy.downloadFileMau().subscribe(t=>{a.content.downLoading=!1,this._fileDownloadService.downloadTempFile(t)})}),a.content.onSave.subscribe(t=>{a.content.returnMessage="\u0110ang upload file....";const e=new FormData;for(let a=0;a<t.length;a++)e.append(a+1+"",t[a]);this._http.post(B,e).subscribe(t=>{this._toanBoTaiSanServiceProxy.importFileExcel(t.result[0]).subscribe(t=>{a.content.returnMessage=t,a.content.uploading=!1,a.content.uploadDone()})})}),a.content.onClose.subscribe(()=>{this.getDataPage(!1)})}exportToExcel(){var a,t,e,i,n,o;this.exporting=!0,this.input=new l.D,this.input.fillter=this.keyword||void 0,this.input.phongBanqQL=this.toChucValue,this.input.loaiTS=this.loaiTaiSanValue,this.input.nhaCungCap=null===(t=null===(a=this.form)||void 0===a?void 0:a.controls.NhaCCFilter.value)||void 0===t?void 0:t.id,this.input.tinhTrangSD=null===(i=null===(e=this.form)||void 0===e?void 0:e.controls.TinhTrangFilter.value)||void 0===i?void 0:i.id,this.input.maSD=null===(o=null===(n=this.form)||void 0===n?void 0:n.controls.MaSDFilter.value)||void 0===o?void 0:o.id,this.input.sorting=this.getSortField(this.table),this.input.skipCount=0,this.input.maxResultCount=1e7,this._toanBoTaiSanServiceProxy.exportToExcel(this.input).subscribe(a=>{this._fileDownloadService.downloadTempFile(a),this.exporting=!1},()=>{this.exporting=!1})}_thongBao(a,t){this.swal.fire({title:this.titleNotice,text:a,icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(()=>{this.showExistMessage(t)})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.zb),r.Ub(f.d),r.Ub(l.T),r.Ub(g.a),r.Ub(T.b))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-toan-bo-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(D,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:62,vars:37,consts:[["id","toanBoTS",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5","m-t-5","width-130",3,"click"],[1,"fa","fa-upload"],[2,"margin-left","5px"],["type","button",1,"btn","btn-success","m-r-5","m-t-5","width-130",3,"buttonBusy","click"],[1,"fa","fa-download"],["type","button",1,"btn","btn-primary","m-r-5","m-t-5","width-130",3,"click"],[1,"fa","fa-plus"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup"],["createUserModal","ngForm"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],[1,"ui-fluid","row"],["formControlName","NhaCCFilter","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","MaSDFilter","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-trash"],[3,"value","lazy","first","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","firstChange","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","maEPC",1,"width-150"],["field","maEPC"],["pSortableColumn","tenTS",1,"width-150"],["field","tenTS"],["pSortableColumn","loaiTS",1,"width-150"],["field","loaiTS"],["pSortableColumn","serialNumber",1,"width-170"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-170"],["field","nhaCungCap"],["pSortableColumn","ngayMuaDateTime",1,"width-150"],["field","ngayMuaDateTime"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQL",1,"width-300"],["field","phongBanQL"],["pSortableColumn","trangThaiId",1,"width-150"],["field","trangThaiId"],["pSortableColumn","tinhTrangQRCode,tinhTrangBarCode,tinhTrangRFID",1,"width-150"],["field","tinhTrangQRCode,tinhTrangBarCode,tinhTrangRFID"],["pSortableColumn","viTriTS",1,"width-150"],["field","viTriTS"],[1,"ui-selectable-row"],[3,"value"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"width-150"],[1,"width-170"],[1,"width-300"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd To\xe0n b\u1ed9 t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return t.importExcel()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Nh\u1eadp Excel"),r.Zb(),r.Zb(),r.ac(12,"button",8),r.ic("click",(function(){return t.exportToExcel()})),r.Vb(13,"i",9),r.ac(14,"span",7),r.Rc(15,"Xu\u1ea5t Excel"),r.Zb(),r.Zb(),r.ac(16,"button",10),r.ic("click",(function(){return t.create()})),r.Vb(17,"i",11),r.ac(18,"span",7),r.Rc(19,"Th\xeam m\u1edbi"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"section",12),r.ac(21,"div",1),r.ac(22,"div",13),r.ac(23,"div",14),r.ac(24,"div",15),r.ac(25,"div",16),r.ac(26,"button",17),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(27,"i",18),r.Zb(),r.Zb(),r.ac(28,"input",19),r.ic("ngModelChange",(function(a){return t.keyword=a}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(29,"form",20,21),r.ac(31,"div",22),r.ac(32,"div",23),r.ac(33,"div",24),r.Vb(34,"dft-label-validation",25),r.ac(35,"app-multiple-select-tree",26),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",23),r.ac(37,"div",24),r.Vb(38,"dft-label-validation",25),r.ac(39,"app-dropdown-treeview-select",27),r.ic("valueChange",(function(a){return t.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"div",28),r.ac(41,"div",23),r.ac(42,"div",24),r.Vb(43,"dft-label-validation",25),r.Vb(44,"p-dropdown",29),r.Zb(),r.Zb(),r.ac(45,"div",23),r.ac(46,"div",24),r.Vb(47,"dft-label-validation",25),r.Vb(48,"p-dropdown",30),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(49,"div",31),r.ac(50,"div",32),r.ac(51,"button",33),r.ic("click",(function(){return t.xoaList(t.selectedList)})),r.Vb(52,"i",34),r.ac(53,"span",7),r.Rc(54,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(55,"div"),r.ac(56,"div"),r.ac(57,"p-table",35,36),r.ic("onLazyLoad",(function(a){return t.getDataPage(!1,a)}))("firstChange",(function(a){return t.first=a}))("selectionChange",(function(a){return t.selectedList=a})),r.Pc(59,R,37,0,"ng-template",37),r.Pc(60,V,47,34,"ng-template",38),r.Pc(61,P,3,1,"ng-template",39),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(12),r.sc("buttonBusy",t.exporting),r.Ib(16),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1")("ngModel",t.keyword),r.Ib(1),r.sc("formGroup",t.form),r.Ib(5),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(4),r.sc("form",t.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",t.nhaCC)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("form",t.form)("title","M\xe3 s\u1eed d\u1ee5ng"),r.Ib(1),r.sc("options",t.maSD)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",0===t.selectedList.length),r.Ib(6),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("lazy",!0)("first",t.first)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.selectedList))},directives:[C.a,f.b,f.p,f.s,f.z,f.q,f.i,v.a,S.a,Z.a,w.a,f.g,y.c,I.d,y.e,y.b,y.a,y.d],pipes:[k.a,i.e],styles:[".haha[_ngcontent-%COMP%]{margin-top:10px}"],data:{animation:[Object(d.b)()]}}),a})();var N=e("cj2p"),_=e("cp0P"),L=e("N7wC"),M=e("CR43"),O=e("0EPa");const K=["dt"];function A(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Vb(14,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function F(a,t){if(1&a&&(r.ac(0,"tr",32),r.ac(1,"td",33),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",33),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",33),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",33),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",31),r.Vb(14,"p-tableCheckbox",34),r.Zb(),r.Zb()),2&a){const a=t.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,5,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,7,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,9,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,11,a.nhaCungCap)," "),r.Ib(3),r.sc("value",a)}}function E(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",35),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}const H=function(){return{standalone:!0}};let U=(()=>{class a extends c.a{constructor(a,t,e,i,n,o){super(a),this.bsModalRef=t,this._lookupTableService=e,this._fb=i,this._taiSanChuaSuDungServiceProxy=n,this._taiSanDangSuDungServiceProxy=o,this.loading=!0,this.keyword="",this.saving=!1,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this.recordsForCheck=[],this.onSave=new r.q}ngOnInit(){this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe(a=>this.listToChucId=a),Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe(([a,t])=>{this.loaiTaiSanItems=this.getTreeviewItem(a),this.nhaCungCaps=t})}khoiTaoForm(){this.form=this._fb.group({NhaCungCap:[]})}close(){this.bsModalRef.hide()}searchTrangThaiNhaCungCap(a){const t=a.query;this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.nhaCungCaps=this.filterTrangThai(t,a)})}filterTrangThai(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a,t){var e,i;this.loading=!0,1===this.flag&&(this._taiSanChuaSuDungServiceProxy.getAllTaiSanCapPhat(this.keyword||void 0,void 0,this.loaiTaiSanValue||void 0,null===(e=this.form.controls.NhaCungCap.value)||void 0===e?void 0:e.id,void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.setValueForRecords(a)}),this.loading=!1),2===this.flag&&(this._taiSanDangSuDungServiceProxy.getAllTaiSanCapPhat(this.keyword||void 0,void 0,this.loaiTaiSanValue||void 0,null===(i=this.form.controls.NhaCungCap.value)||void 0===i?void 0:i.id,void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.setValueForRecords(a)}),this.loading=!1),this.loading=!1}setValueForRecords(a){a.items=this.permission.isGranted("Pages.QuanLyTaiSanTong")?a.items.filter(a=>!this.arrTaiSanCheckedFromParent.map(a=>a.id).includes(a.id)&&a.capPhat):a.items.filter(a=>!this.arrTaiSanCheckedFromParent.map(a=>a.id).includes(a.id)&&a.capPhat&&this.listToChucId.includes(a.toChucId)),this.records=a.items,this.totalCount=a.totalCount}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.a),r.Ub(l.T),r.Ub(f.d),r.Ub(l.lb),r.Ub(l.mb))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-cap-phat-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(K,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:24,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],["formControlName","NhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return t.keyword=a}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return t.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.Vb(19,"p-dropdown",15),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return t.getDataPage(!1,a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(23,A,15,0,"ng-template",19),r.Pc(24,F,15,13,"ng-template",20),r.Pc(25,E,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n c\u1ea5p ph\xe1t"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",t.keyword)("ngModelOptions",r.vc(23,H)),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",t.nhaCungCaps)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(2),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!t.arrTaiSanChecked.length))},directives:[f.z,f.q,f.i,M.a,f.b,f.p,f.s,v.a,Z.a,w.a,f.g,y.c,I.d,O.a,y.b,y.a,y.e,y.d],pipes:[k.a],styles:[""]}),a})();var G=e("Di65"),j=e("eO1q");const q=["dt"];function z(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",28),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",29),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",30),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Zb(),r.ac(7,"th",30),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",30),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",30),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",30),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",30),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.Zb())}function Q(a,t){if(1&a&&(r.ac(0,"tr",31),r.ac(1,"td",28),r.Vb(2,"p-tableCheckbox",32),r.Zb(),r.ac(3,"td",29),r.Rc(4),r.Zb(),r.ac(5,"td",30),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",30),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",30),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",30),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",30),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",30),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",e+1," "),r.Ib(2),r.Tc(" ",r.nc(7,8,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,10,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,12,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,16,r.nc(20,19,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,21,r.nc(24,24,a.nguyenGia),"2.")," ")}}function $(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",33),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let X=(()=>{class a extends c.a{constructor(a,t,e,i,n,o,c){super(a),this._fb=t,this.bsModalRef=e,this._lookupTableService=i,this._modalService=n,this._taiSanChuaSuDungServiceProxy=o,this._sendMail=c,this.loading=!0,this.onSave=new r.q,this.records=[],this.taiSans=[],this.saving=!1,this.totalCount=0,this.arrTaiSanChecked=[],this.createInputDto=new l.eb}ngOnInit(){this.khoiTaoForm(),this.count>0&&this.showExistMessage("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn ch\u1ee9a t\xe0i s\u1ea3n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p c\u1ea5p ph\xe1t"),this.isGranted("Pages.QuanLyTaiSanTong")?Object(_.a)(this._lookupTableService.getAllToChucTree()).subscribe(([a])=>{this.toChucItems=this.getTreeviewItem(a)}):Object(_.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!1)).subscribe(([a])=>{this.toChucItems=this.getTreeviewItem(a)})}khoiTaoForm(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.maxLength(4e3),Object(G.b)()]],PhongBan:["",f.y.required]})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{0===a?this.showExistMessage("L\u1ed7i"):(this.showSuccessMessage("C\u1ea5p ph\xe1t th\xe0nh c\xf4ng"),this._sendMail.sendMailCapPhat(this.form.value.PhongBan,this.records).subscribe(a=>{}),this.bsModalRef.hide(),this.onSave.emit())}))}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.CapPhat,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,toChucDuocNhanId:this.form.value.PhongBan,phieuTaiSanChiTietList:a})}close(){this.bsModalRef.hide()}deleteTaiSan(){}addTaiSan(){this._showCreateOrEditDemoDialog(1===this.flag?1:2)}_showCreateOrEditDemoDialog(a){let t;t=this._modalService.show(U,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}}),t.content.onSave.subscribe(()=>{this.records=[...this.records,...t.content.arrTaiSanChecked],this.totalCount=this.records.length})}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}setControlValue(a){this.form.get("PhongBan").setValue(a)}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),2===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(f.d),r.Ub(h.a),r.Ub(l.T),r.Ub(h.b),r.Ub(l.lb),r.Ub(l.V))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-cap-phat-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(q,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:33,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-lg-6","col-md-12","col-sm-12"],[1,"form-group"],[3,"control","title"],[3,"items","valueChange"],[3,"control"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[1,"col-md-6"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.ac(8,"app-dropdown-treeview-select",8),r.ic("valueChange",(function(a){return t.setControlValue(a)})),r.Zb(),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.ac(10,"div",5),r.ac(11,"div",6),r.Vb(12,"dft-label-validation",7),r.Vb(13,"p-calendar",10),r.Vb(14,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(15,"div",4),r.ac(16,"div",11),r.ac(17,"div",6),r.Vb(18,"dft-label-validation",7),r.Vb(19,"br"),r.Vb(20,"textarea",12),r.Vb(21,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",13),r.ac(23,"div",14),r.Vb(24,"dft-label-validation",15),r.Zb(),r.ac(25,"div",16),r.ac(26,"button",17),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(27,"i",18),r.ac(28,"span",19),r.Rc(29,"X\xf3a"),r.Zb(),r.Zb(),r.ac(30,"button",20),r.ic("click",(function(){return t.addTaiSan()})),r.Vb(31,"i",21),r.ac(32,"span",19),r.Rc(33,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",22,23),r.ic("onLazyLoad",(function(a){return t.getDataPage(a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(37,z,17,0,"ng-template",24),r.Pc(38,Q,25,26,"ng-template",25),r.Pc(39,$,3,1,"ng-template",26),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"abp-modal-footer",27),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","C\u1ea5p ph\xe1t T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",t.form.get("PhongBan"))("title","\u0110\u01a1n v\u1ecb \u0111\u01b0\u1ee3c c\u1ea5p ph\xe1t t\xe0i s\u1ea3n *"),r.Ib(1),r.sc("items",t.toChucItems),r.Ib(1),r.sc("control",t.form.get("PhongBan")),r.Ib(3),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian c\u1ea5p ph\xe1t *"),r.Ib(1),r.sc("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung c\u1ea5p ph\xe1t"),r.Ib(3),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",t.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n c\u1ea5p ph\xe1t"),r.Ib(2),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!(null!=t.records&&t.records.length))("iconName","fas fa-external-link-square-alt")("saveLabel","C\u1ea5p ph\xe1t"))},directives:[f.z,f.q,f.i,M.a,v.a,Z.a,G.a,j.a,f.p,f.g,f.b,f.k,y.c,I.d,O.a,y.e,y.d],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const J=["dt"];function Y(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",32),r.Zb(),r.ac(16,"th",33),r.Vb(17,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function W(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",33),r.Vb(17,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,6,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,8,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,10,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,12,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,14,a.phongBanQuanLy)," "),r.Ib(3),r.sc("value",a)}}function aa(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}const ta=function(){return{standalone:!0}};let ea=(()=>{class a extends c.a{constructor(a,t,e,i,n,o){super(a),this.bsModalRef=t,this._lookupTableService=e,this._fb=i,this._taiSanChuaSuDungServiceProxy=n,this._taiSanDangSuDungServiceProxy=o,this.loading=!0,this.keyword="",this.saving=!1,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this.recordsForCheck=[],this.onSave=new r.q}ngOnInit(){this.khoiTaoForm(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)}),this._lookupTableService.getAllLoaiTaiSanTree().subscribe(a=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}khoiTaoForm(){this.form=this._fb.group({})}close(){this.bsModalRef.hide()}filterTrangThai(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a,t){this.loading=!0,1===this.flag&&(this._taiSanChuaSuDungServiceProxy.getAllByMaAndSerialNumber(this.keyword,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.setValueForRecords(a)}),this.loading=!1),2===this.flag&&(this._taiSanDangSuDungServiceProxy.getAllByMaAndSerialNumberTsdsd(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.setValueForRecords(a)}),this.loading=!1),this.loading=!1}setValueForRecords(a){a.items=this.permission.isGranted("Pages.QuanLyTaiSanTong")?a.items.filter(a=>!this.arrTaiSanCheckedFromParent.map(a=>a.id).includes(a.id)&&a.dieuChuyen):a.items.filter(a=>!this.arrTaiSanCheckedFromParent.map(a=>a.id).includes(a.id)&&a.dieuChuyen&&this.listToChucId.includes(a.toChucId)),this.records=a.items,this.totalCount=a.totalCount}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.a),r.Ub(l.T),r.Ub(f.d),r.Ub(l.lb),r.Ub(l.mb))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-dieu-chuyen-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(J,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:21,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return t.keyword=a}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return t.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.ac(19,"app-multiple-select-tree",15),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return t.getDataPage(!1,a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(23,Y,18,0,"ng-template",19),r.Pc(24,W,18,16,"ng-template",20),r.Pc(25,aa,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n \u0111i\u1ec1u chuy\u1ec3n"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",t.keyword)("ngModelOptions",r.vc(20,ta)),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!t.arrTaiSanChecked.length))},directives:[f.z,f.q,f.i,M.a,f.b,f.p,f.s,v.a,Z.a,S.a,y.c,I.d,O.a,y.b,y.a,y.e,y.d],pipes:[k.a],styles:[""]}),a})();const ia=["dt"];function na(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",28),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",29),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",30),r.Rc(6,"T\xean t\xe0i s\u1ea3n"),r.Zb(),r.ac(7,"th",30),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",30),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",30),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",30),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",30),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.ac(17,"th",31),r.Rc(18,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Zb(),r.Zb())}function oa(a,t){if(1&a&&(r.ac(0,"tr",32),r.ac(1,"td",28),r.Vb(2,"p-tableCheckbox",33),r.Zb(),r.ac(3,"td",29),r.Rc(4),r.Zb(),r.ac(5,"td",30),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",30),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",30),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",30),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",30),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",30),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.ac(25,"td",31),r.Rc(26),r.mc(27,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",e+1," "),r.Ib(2),r.Tc(" ",r.nc(7,9,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,11,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,13,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,15,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,17,r.nc(20,20,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,22,r.nc(24,25,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(27,27,a.phongBanQuanLy)," ")}}function ca(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",34),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let ra=(()=>{class a extends c.a{constructor(a,t,e,i,n,o,c){super(a),this._fb=t,this.bsModalRef=e,this._lookupTableService=i,this._modalService=n,this._taiSanChuaSuDungServiceProxy=o,this._sendMail=c,this.loading=!0,this.onSave=new r.q,this.records=[],this.taiSans=[],this.saving=!1,this.totalCount=0,this.arrTaiSanChecked=[],this.createInputDto=new l.eb}ngOnInit(){this.khoiTaoForm(),this.count>0&&this.showExistMessage("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn ch\u1ee9a t\xe0i s\u1ea3n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p \u0111i\u1ec1u chuy\u1ec3n"),this.isGranted("Pages.QuanLyTaiSanTong")?Object(_.a)(this._lookupTableService.getAllToChucTree()).subscribe(([a])=>{this.toChucItems=this.getTreeviewItem(a)}):Object(_.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!1)).subscribe(([a])=>{this.toChucItems=this.getTreeviewItem(a)})}khoiTaoForm(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.maxLength(4e3),Object(G.b)()]],PhongBan:["",f.y.required]})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{0===a?this.showExistMessage("L\u1ed7i"):(this.showSuccessMessage("\u0110i\u1ec1u chuy\u1ec3n th\xe0nh c\xf4ng"),this._sendMail.sendMailDieuChuyen(this.form.value.PhongBan,this.records).subscribe(a=>{}),this.bsModalRef.hide(),this.onSave.emit())}))}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.DieuChuyen,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,toChucDuocNhanId:this.form.value.PhongBan,phieuTaiSanChiTietList:a})}close(){this.bsModalRef.hide()}deleteTaiSan(){}addTaiSan(){this._showCreateOrEditDemoDialog(1===this.flag?1:2)}_showCreateOrEditDemoDialog(a){let t;t=this._modalService.show(ea,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}}),t.content.onSave.subscribe(()=>{this.records=[...this.records,...t.content.arrTaiSanChecked],this.totalCount=this.records.length})}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}setControlValue(a){this.form.get("PhongBan").setValue(a)}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),2===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(f.d),r.Ub(h.a),r.Ub(l.T),r.Ub(h.b),r.Ub(l.lb),r.Ub(l.V))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-dieu-chuyen-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(ia,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:34,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-lg-6","col-md-12","col-sm-12"],[1,"form-group"],[3,"control","title"],[3,"items","valueChange"],[3,"control"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[1,"col-md-6"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"width-250"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.ac(8,"app-dropdown-treeview-select",8),r.ic("valueChange",(function(a){return t.setControlValue(a)})),r.Zb(),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.ac(10,"div",5),r.ac(11,"div",6),r.Vb(12,"dft-label-validation",7),r.Vb(13,"p-calendar",10),r.Vb(14,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(15,"div",4),r.ac(16,"div",11),r.ac(17,"div",6),r.Vb(18,"dft-label-validation",7),r.Vb(19,"br"),r.Vb(20,"textarea",12),r.Vb(21,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",13),r.ac(23,"div",14),r.Vb(24,"dft-label-validation",15),r.Zb(),r.ac(25,"div",16),r.ac(26,"button",17),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(27,"i",18),r.ac(28,"span",19),r.Rc(29,"X\xf3a"),r.Zb(),r.Zb(),r.ac(30,"button",20),r.ic("click",(function(){return t.addTaiSan()})),r.Vb(31,"i",21),r.ac(32,"span",19),r.Rc(33,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",22,23),r.ic("onLazyLoad",(function(a){return t.getDataPage(a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(37,na,19,0,"ng-template",24),r.Pc(38,oa,28,29,"ng-template",25),r.Pc(39,ca,3,1,"ng-template",26),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"abp-modal-footer",27),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","\u0110i\u1ec1u chuy\u1ec3n T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",t.form.get("PhongBan"))("title","\u0110\u01a1n v\u1ecb \u0111\u01b0\u1ee3c \u0111i\u1ec1u chuy\u1ec3n t\xe0i s\u1ea3n \u0111\u1ebfn *"),r.Ib(1),r.sc("items",t.toChucItems),r.Ib(1),r.sc("control",t.form.get("PhongBan")),r.Ib(3),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian \u0111i\u1ec1u chuy\u1ec3n *"),r.Ib(1),r.sc("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung \u0111i\u1ec1u chuy\u1ec3n"),r.Ib(3),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",t.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n \u0111i\u1ec1u chuy\u1ec3n"),r.Ib(2),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!(null!=t.records&&t.records.length))("iconName","fas fa-exchange-alt")("saveLabel","\u0110i\u1ec1u chuy\u1ec3n")("cancelDisabled",t.saving))},directives:[f.z,f.q,f.i,M.a,v.a,Z.a,G.a,j.a,f.p,f.g,f.b,f.k,y.c,I.d,O.a,y.e,y.d],pipes:[k.a,i.d,i.e],styles:[""]}),a})();const sa=["dt"];function la(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",32),r.Zb(),r.ac(16,"th",33),r.Vb(17,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function ha(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",33),r.Vb(17,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,6,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,8,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,10,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,12,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,14,a.phongBanQuanLy)," "),r.Ib(3),r.sc("value",a)}}function ba(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}const ua=function(){return{standalone:!0}};let da=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this.bsModalRef=t,this._lookupTableService=e,this._fb=i,this._taiSanChuaSuDungServiceProxy=n,this.loading=!0,this.keyword="",this.saving=!1,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this.recordsForCheck=[],this.onSave=new r.q}ngOnInit(){this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe(a=>this.listToChucId=a),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)}),Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe(([a])=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}khoiTaoForm(){this.form=this._fb.group({})}close(){this.bsModalRef.hide()}filterTrangThai(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a,t){this.loading=!0,1===this.flag&&(this._taiSanChuaSuDungServiceProxy.getAllByMaAndSerialNumber(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{a.items=a.items.filter(a=>!this.arrTaiSanCheckedFromParent.some(t=>t.id===a.id)),void 0!==this.toChucValue||this.permission.isGranted("Pages.QuanLyTaiSanTong")||(a.items=a.items.filter(a=>this.listToChucId.includes(a.toChucId))),this.records=a.items,this.totalCount=a.totalCount}),this.loading=!1),this.loading=!1}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.a),r.Ub(l.T),r.Ub(f.d),r.Ub(l.lb))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-khai-bao-su-dung-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(sa,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:22,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return t.keyword=a}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return t.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.ac(19,"app-multiple-select-tree",15),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return t.getDataPage(!1,a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(23,la,18,0,"ng-template",19),r.Pc(24,ha,18,16,"ng-template",20),r.Pc(25,ba,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o s\u1eed d\u1ee5ng"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",t.keyword)("ngModelOptions",r.vc(21,ua)),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!t.arrTaiSanChecked.length))},directives:[f.z,f.q,f.i,M.a,f.b,f.p,f.s,v.a,Z.a,S.a,y.c,I.d,O.a,y.b,y.a,y.e,y.d],pipes:[k.a],styles:[""]}),a})();const ga=["dt"];function pa(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",26),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",27),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",28),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Zb(),r.ac(7,"th",28),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",28),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",28),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",28),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",28),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.ac(17,"th",29),r.Rc(18,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Zb(),r.Zb())}function ma(a,t){if(1&a&&(r.ac(0,"tr",30),r.ac(1,"td",26),r.Vb(2,"p-tableCheckbox",31),r.Zb(),r.ac(3,"td",27),r.Rc(4),r.Zb(),r.ac(5,"td",28),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",28),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",28),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",28),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",28),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",28),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.ac(25,"td",29),r.Rc(26),r.mc(27,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",e+1," "),r.Ib(2),r.Tc(" ",r.nc(7,9,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,11,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,13,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,15,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,17,r.nc(20,20,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,22,r.nc(24,25,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(27,27,a.phongBanQuanLy)," ")}}function fa(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",32),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let Ta=(()=>{class a extends c.a{constructor(a,t,e,i,n,o){super(a),this._fb=t,this.bsModalRef=e,this._lookupTableService=i,this._modalService=n,this._taiSanChuaSuDungServiceProxy=o,this.loading=!0,this.onSave=new r.q,this.records=[],this.taiSans=[],this.saving=!1,this.totalCount=0,this.arrTaiSanChecked=[],this.createInputDto=new l.eb}ngOnInit(){this.khoiTaoForm(),Object(_.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0)).subscribe(([a])=>{this.toChucItems=this.getTreeviewItem(a)})}khoiTaoForm(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.maxLength(4e3),Object(G.b)(),f.y.required]]})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{0===a?this.showExistMessage("L\u1ed7i"):(this.showSuccessMessage("Khai b\xe1o th\xe0nh c\xf4ng"),this.bsModalRef.hide(),this.onSave.emit())}))}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanDangSuDung,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}close(){this.bsModalRef.hide()}deleteTaiSan(){}addTaiSan(){this._showCreateOrEditDemoDialog(1)}_showCreateOrEditDemoDialog(a){let t;t=this._modalService.show(da,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}}),t.content.onSave.subscribe(()=>{this.records=[...this.records,...t.content.arrTaiSanChecked],this.totalCount=this.records.length})}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(f.d),r.Ub(h.a),r.Ub(l.T),r.Ub(h.b),r.Ub(l.lb))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-khai-bao-su-dung-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(ga,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:36,vars:30,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[3,"control"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"width-250"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.Vb(8,"p-calendar",8),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(10,"div",4),r.ac(11,"div",10),r.ac(12,"div",6),r.Vb(13,"dft-label-validation",7),r.Vb(14,"br"),r.Vb(15,"textarea",11),r.Vb(16,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(17,"div",12),r.ac(18,"div",5),r.Vb(19,"dft-label-validation",13),r.Zb(),r.ac(20,"div",14),r.ac(21,"button",15),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(22,"i",16),r.ac(23,"span",17),r.Rc(24,"X\xf3a"),r.Zb(),r.Zb(),r.ac(25,"button",18),r.ic("click",(function(){return t.addTaiSan()})),r.Vb(26,"i",19),r.ac(27,"span",17),r.Rc(28,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(29,"div"),r.ac(30,"p-table",20,21),r.ic("onLazyLoad",(function(a){return t.getDataPage(a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(32,pa,19,0,"ng-template",22),r.Pc(33,ma,28,29,"ng-template",23),r.Pc(34,fa,3,1,"ng-template",24),r.Zb(),r.Zb(),r.Zb(),r.ac(35,"abp-modal-footer",25),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","Khai b\xe1o s\u1eed d\u1ee5ng T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian b\u1eaft \u0111\u1ea7u s\u1eed d\u1ee5ng *"),r.Ib(1),r.sc("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung s\u1eed d\u1ee5ng *"),r.Ib(3),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",t.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o s\u1eed d\u1ee5ng"),r.Ib(2),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!(null!=t.records&&t.records.length))("iconName","fas fa-sun")("saveLabel","Khai b\xe1o")("cancelDisabled",t.saving))},directives:[f.z,f.q,f.i,M.a,v.a,j.a,f.p,f.g,G.a,f.b,f.k,y.c,I.d,O.a,y.e,y.d],pipes:[k.a,i.d,i.e],styles:[""]}),a})();const Ca=["dt"];function va(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",32),r.Zb(),r.ac(16,"th",33),r.Vb(17,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function Sa(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",33),r.Vb(17,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,6,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,8,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,10,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,12,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,14,a.phongBanQuanLy)," "),r.Ib(3),r.sc("value",a)}}function Za(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}const wa=function(){return{standalone:!0}};let ya=(()=>{class a extends c.a{constructor(a,t,e,i,n,o){super(a),this.bsModalRef=t,this._lookupTableService=e,this._fb=i,this._taiSanChuaSuDungServiceProxy=n,this._taiSanDangSuDungServiceProxy=o,this.loading=!0,this.keyword="",this.saving=!1,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this.recordsForCheck=[],this.onSave=new r.q}ngOnInit(){this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe(a=>this.listToChucId=a),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)}),this._lookupTableService.getAllLoaiTaiSanTree().subscribe(a=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}khoiTaoForm(){this.form=this._fb.group({})}close(){this.bsModalRef.hide()}filterTrangThai(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a,t){this.loading=!0,1===this.flag&&this._taiSanChuaSuDungServiceProxy.getAllByMaAndSerialNumber(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.setValueForRecords(a)}),2===this.flag&&this._taiSanDangSuDungServiceProxy.getAllByMaAndSerialNumberTsdsd(this.keyword,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.setValueForRecords(a)}),this.loading=!1}setValueForRecords(a){a.items=this.permission.isGranted("Pages.QuanLyTaiSanTong")?a.items.filter(a=>!this.arrTaiSanCheckedFromParent.map(a=>a.id).includes(a.id)&&a.thuHoi):a.items.filter(a=>!this.arrTaiSanCheckedFromParent.map(a=>a.id).includes(a.id)&&a.thuHoi&&this.listToChucId.includes(a.toChucId)),this.records=a.items,this.totalCount=a.totalCount}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.a),r.Ub(l.T),r.Ub(f.d),r.Ub(l.lb),r.Ub(l.mb))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-thu-hoi-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Ca,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:22,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return t.keyword=a}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return t.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.ac(19,"app-multiple-select-tree",15),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return t.getDataPage(!1,a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(23,va,18,0,"ng-template",19),r.Pc(24,Sa,18,16,"ng-template",20),r.Pc(25,Za,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n thu h\u1ed3i"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",t.keyword)("ngModelOptions",r.vc(21,wa)),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!t.arrTaiSanChecked.length))},directives:[f.z,f.q,f.i,M.a,f.b,f.p,f.s,v.a,Z.a,S.a,y.c,I.d,O.a,y.b,y.a,y.e,y.d],pipes:[k.a],styles:[""]}),a})();const Ia=["dt"];function ka(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",26),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",27),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",28),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Zb(),r.ac(7,"th",28),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",28),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",28),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",28),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",28),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.ac(17,"th",29),r.Rc(18,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Zb(),r.Zb())}function Da(a,t){if(1&a&&(r.ac(0,"tr",30),r.ac(1,"td",26),r.Vb(2,"p-tableCheckbox",31),r.Zb(),r.ac(3,"td",27),r.Rc(4),r.Zb(),r.ac(5,"td",28),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",28),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",28),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",28),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",28),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",28),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.ac(25,"td",29),r.Rc(26),r.mc(27,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",e+1," "),r.Ib(2),r.Tc(" ",r.nc(7,9,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,11,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,13,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,15,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,17,r.nc(20,20,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,22,r.nc(24,25,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(27,27,a.phongBanQuanLy)," ")}}function Ra(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",32),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let Va=(()=>{class a extends c.a{constructor(a,t,e,i,n,o,c){super(a),this._fb=t,this.bsModalRef=e,this._lookupTableService=i,this._modalService=n,this._taiSanChuaSuDungServiceProxy=o,this._sendMail=c,this.loading=!0,this.onSave=new r.q,this.records=[],this.taiSans=[],this.saving=!1,this.totalCount=0,this.arrTaiSanChecked=[],this.createInputDto=new l.eb}ngOnInit(){this.khoiTaoForm(),this.count>0&&this.showExistMessage("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn ch\u1ee9a t\xe0i s\u1ea3n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p thu h\u1ed3i"),Object(_.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0)).subscribe(([a])=>{this.toChucItems=this.getTreeviewItem(a)})}khoiTaoForm(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.maxLength(4e3),Object(G.b)()]]})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{0===a?this.showExistMessage("L\u1ed7i"):(this.showSuccessMessage("Thu h\u1ed3i th\xe0nh c\xf4ng"),this._sendMail.sendMailThuHoi(void 0,this.records).subscribe(a=>{}),this.bsModalRef.hide(),this.onSave.emit())}))}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.ThuHoi,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}close(){this.bsModalRef.hide()}deleteTaiSan(){}addTaiSan(){this._showCreateOrEditDemoDialog(1===this.flag?1:2)}_showCreateOrEditDemoDialog(a){let t;t=this._modalService.show(ya,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}}),t.content.onSave.subscribe(()=>{this.records=[...this.records,...t.content.arrTaiSanChecked],this.totalCount=this.records.length})}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}getDataPage(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),2===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(f.d),r.Ub(h.a),r.Ub(l.T),r.Ub(h.b),r.Ub(l.lb),r.Ub(l.V))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-thu-hoi-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Ia,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:36,vars:30,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[3,"control"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"width-250"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return t.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.Vb(8,"p-calendar",8),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(10,"div",4),r.ac(11,"div",10),r.ac(12,"div",6),r.Vb(13,"dft-label-validation",7),r.Vb(14,"br"),r.Vb(15,"textarea",11),r.Vb(16,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(17,"div",12),r.ac(18,"div",5),r.Vb(19,"dft-label-validation",13),r.Zb(),r.ac(20,"div",14),r.ac(21,"button",15),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(22,"i",16),r.ac(23,"span",17),r.Rc(24,"X\xf3a"),r.Zb(),r.Zb(),r.ac(25,"button",18),r.ic("click",(function(){return t.addTaiSan()})),r.Vb(26,"i",19),r.ac(27,"span",17),r.Rc(28,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(29,"div"),r.ac(30,"p-table",20,21),r.ic("onLazyLoad",(function(a){return t.getDataPage(a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(32,ka,19,0,"ng-template",22),r.Pc(33,Da,28,29,"ng-template",23),r.Pc(34,Ra,3,1,"ng-template",24),r.Zb(),r.Zb(),r.Zb(),r.ac(35,"abp-modal-footer",25),r.ic("onCancelClick",(function(){return t.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(2),r.sc("title","Thu h\u1ed3i T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian thu h\u1ed3i *"),r.Ib(1),r.sc("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung thu h\u1ed3i"),r.Ib(3),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",t.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n thu h\u1ed3i"),r.Ib(2),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("lazy",!0)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",t.saving)("saveDisabled",!(null!=t.records&&t.records.length))("iconName","fas fa-retweet")("saveLabel","Thu h\u1ed3i")("cancelDisabled",t.saving))},directives:[f.z,f.q,f.i,M.a,v.a,j.a,f.p,f.g,G.a,f.b,f.k,y.c,I.d,O.a,y.e,y.d],pipes:[k.a,i.d,i.e],styles:[""]}),a})();const Pa=["dt"];function Ba(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",36),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",36),r.ac(4,"th",37),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",38),r.Zb(),r.ac(7,"th",39),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",40),r.Zb(),r.ac(10,"th",41),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",42),r.Zb(),r.ac(13,"th",43),r.Rc(14,"Serial Number "),r.Vb(15,"p-sortIcon",44),r.Zb(),r.ac(16,"th",45),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",46),r.Zb(),r.ac(19,"th",47),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",48),r.Zb(),r.ac(22,"th",49),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",50),r.Zb(),r.ac(25,"th",51),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",52),r.Zb(),r.ac(28,"th",53),r.Rc(29,"M\xe3 s\u1eed d\u1ee5ng "),r.Vb(30,"p-sortIcon",54),r.Zb(),r.ac(31,"th",55),r.Rc(32,"V\u1ecb tr\xed t\xe0i s\u1ea3n "),r.Vb(33,"p-sortIcon",56),r.Zb(),r.Zb())}function xa(a,t){if(1&a){const a=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().capPhat(t,1)})),r.Rc(1,"C\u1ea5p ph\xe1t"),r.Zb()}}function Na(a,t){if(1&a){const a=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().dieuChuyen(t)})),r.Rc(1,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb()}}function _a(a,t){if(1&a){const a=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().thuHoi(t)})),r.Rc(1,"Thu h\u1ed3i"),r.Zb()}}function La(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",57),r.ac(1,"td",36),r.ac(2,"p-tableCheckbox",58),r.ic("selected",(function(){return r.Ic(a),r.lc().checkVisibleCapPhat()})),r.Zb(),r.Zb(),r.ac(3,"td",36),r.ac(4,"div",59),r.ac(5,"button",60),r.Vb(6,"i",61),r.Zb(),r.ac(7,"div",62),r.ac(8,"a",63),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,xa,2,0,"a",64),r.Pc(11,Na,2,0,"a",64),r.Pc(12,_a,2,0,"a",64),r.ac(13,"a",63),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().khaiBaoSuDung(e)})),r.Rc(14,"Khai b\xe1o s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(15,"td",65),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",65),r.Rc(19),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",65),r.Rc(22),r.mc(23,"truncate"),r.Zb(),r.ac(24,"td",66),r.Rc(25),r.mc(26,"truncate"),r.Zb(),r.ac(27,"td",66),r.Rc(28),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",65),r.Rc(31),r.mc(32,"date"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",65),r.Rc(35),r.mc(36,"number"),r.mc(37,"truncate"),r.Zb(),r.ac(38,"td",67),r.Rc(39),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",65),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.ac(44,"td",67),r.Rc(45),r.mc(46,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit;r.Ib(2),r.sc("value",a),r.Ib(8),r.sc("ngIf",a.capPhat),r.Ib(1),r.sc("ngIf",a.dieuChuyen),r.Ib(1),r.sc("ngIf",a.thuHoi),r.Ib(4),r.Tc(" ",r.nc(17,14,a.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(20,16,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(23,18,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(26,20,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(29,22,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(32,24,r.nc(33,27,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(36,29,r.nc(37,32,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(40,34,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(43,36,a.maSuDung)," "),r.Ib(3),r.Tc(" ",r.nc(46,38,a.viTriTaiSan)," ")}}function Ma(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",68),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}const Oa=function(){return{standalone:!0}};let Ka=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._taiSanChuaSuDungServiceProxy=t,this._fb=e,this._lookupTableService=i,this._modalService=n,this.isActive=0,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanChecked=[]}ngOnChanges(a){var t;1===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)}),this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe(a=>this.listToChucId=a),this.isGranted("Pages.QuanLyTaiSanTong")?Object(_.a)(this._lookupTableService.getAllToChucTree(),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe(([a,t,e,i])=>{this.loaiTaiSanItems=this.getTreeviewItem(t),this.nhaCungCaps=e,this.maSuDungs=i}):Object(_.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe(([a,t,e,i])=>{this.loaiTaiSanItems=this.getTreeviewItem(t),this.nhaCungCaps=e,this.maSuDungs=i})}checkVisibleCapPhat(){return 0===this.arrTaiSanChecked.filter(a=>a.capPhat).length}checkVisibleDieuChuyen(){return 0===this.arrTaiSanChecked.filter(a=>a.dieuChuyen).length}checkVisibleThuHoi(){return 0===this.arrTaiSanChecked.filter(a=>a.thuHoi).length}khoiTaoForm(){this.form=this._fb.group({NccDropdownMultiple:[""],NhaCungCap:[""],MaSuDung:[""],DropDownTreeViewToChuc:[""],DropDownTreeViewLoaiTaiSan:[""]})}getDataPage(a,t){var e,i;this.loading=!0,this._taiSanChuaSuDungServiceProxy.getAll(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,null===(e=this.form.controls.NhaCungCap.value)||void 0===e?void 0:e.id,null===(i=this.form.controls.MaSuDung.value)||void 0===i?void 0:i.id,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,void 0!==this.toChucValue||this.permission.isGranted("Pages.QuanLyTaiSanTong")||(this.records=this.records.filter(a=>this.listToChucId.includes(a.toChucId))),this.totalCount=a.totalCount})}searchTrangThaiMaSuDung(a){const t=a.query;this._lookupTableService.getAllTinhTrangMaSuDungTaiSan().subscribe(a=>{this.maSuDungs=this.filterTrangThai(t,a)})}searchTrangThaiNhaCungCap(a){const t=a.query;this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.nhaCungCaps=this.filterTrangThai(t,a)})}filterTrangThai(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}_showCreateOrEditDemoDialog(a,t,e,i){let n;e===N.TrangThaiTaiSanConst.CapPhat&&(n=this._modalService.show(X,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),e===N.TrangThaiTaiSanConst.DieuChuyen&&(n=this._modalService.show(ra,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),e===N.TrangThaiTaiSanConst.ThuHoi&&(n=this._modalService.show(Va,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),e===N.TrangThaiTaiSanConst.TaiSanDangSuDung&&(n=this._modalService.show(Ta,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),n.content.onSave.subscribe(()=>{this.getDataPage(!1),this.arrTaiSanChecked=[]})}capPhat(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,0)}capPhatMultiple(){const a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.CapPhat);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,a)}dieuChuyen(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,0)}dieuChuyenMultiple(){const a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.DieuChuyen);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,a)}removeTaiSanChecked(a){let t=0;return a===N.TrangThaiTaiSanConst.CapPhat&&this.arrTaiSanChecked.forEach(a=>{a.capPhat||(t++,this.arrTaiSanChecked=this.arrTaiSanChecked.filter(t=>t!==a))}),a===N.TrangThaiTaiSanConst.DieuChuyen&&this.arrTaiSanChecked.forEach(a=>{a.dieuChuyen||(t++,this.arrTaiSanChecked=this.arrTaiSanChecked.filter(t=>t!==a))}),a===N.TrangThaiTaiSanConst.ThuHoi&&this.arrTaiSanChecked.forEach(a=>{a.thuHoi||(t++,this.arrTaiSanChecked=this.arrTaiSanChecked.filter(t=>t!==a))}),t}thuHoi(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,0)}thuHoiMultiple(){const a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.ThuHoi);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,a)}khaiBaoSuDung(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.TaiSanDangSuDung,0)}khaiBaoSuDungMultiple(){this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.TaiSanDangSuDung,0)}pushTaiSan(a){this.arrTaiSanChecked=[],this.arrTaiSanChecked.push(a)}view(a){this._viewTaiSan(a,!0)}_viewTaiSan(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.lb),r.Ub(f.d),r.Ub(l.T),r.Ub(h.b))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san-chua-su-dung"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Pa,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:58,vars:40,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],[1,"ui-fluid","row",3,"formGroup"],["formControlName","NhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","MaSuDung","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"fas","fa-external-link-square-alt"],[1,"fas","fa-exchange-alt"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-retweet"],[2,"margin-left","10px"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-200"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-200"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-250"],["field","phongBanQuanLy"],["pSortableColumn","maSuDung",1,"width-150"],["field","maSuDung"],["pSortableColumn","viTriTaiSan",1,"width-250"],["field","viTriTaiSan"],[1,"ui-selectable-row"],[3,"value","selected"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[1,"width-200"],[1,"width-250"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n ch\u01b0a s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(7,"section",4),r.ac(8,"div",1),r.ac(9,"div",5),r.ac(10,"div",6),r.ac(11,"div",7),r.ac(12,"div",8),r.ac(13,"button",9),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(14,"i",10),r.Zb(),r.Zb(),r.ac(15,"input",11),r.ic("ngModelChange",(function(a){return t.keyword=a}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(16,"div",12),r.ac(17,"div",13),r.ac(18,"div",14),r.Vb(19,"dft-label-validation",15),r.ac(20,"app-multiple-select-tree",16),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(21,"div",13),r.ac(22,"div",14),r.Vb(23,"dft-label-validation",15),r.ac(24,"app-dropdown-treeview-select",17),r.ic("valueChange",(function(a){return t.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(25,"div",18),r.ac(26,"div",13),r.ac(27,"div",14),r.Vb(28,"dft-label-validation",15),r.Vb(29,"p-dropdown",19),r.Zb(),r.Zb(),r.ac(30,"div",13),r.ac(31,"div",14),r.Vb(32,"dft-label-validation",15),r.Vb(33,"p-dropdown",20),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div",21),r.ac(35,"div",22),r.ac(36,"button",23),r.ic("click",(function(){return t.khaiBaoSuDungMultiple()})),r.Vb(37,"i",24),r.ac(38,"span",25),r.Rc(39,"Khai b\xe1o s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.ac(40,"button",23),r.ic("click",(function(){return t.capPhatMultiple()})),r.Vb(41,"i",26),r.ac(42,"span",25),r.Rc(43,"C\u1ea5p ph\xe1t"),r.Zb(),r.Zb(),r.ac(44,"button",23),r.ic("click",(function(){return t.dieuChuyenMultiple()})),r.Vb(45,"i",27),r.ac(46,"span",25),r.Rc(47,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb(),r.Zb(),r.ac(48,"button",28),r.ic("click",(function(){return t.thuHoiMultiple()})),r.Vb(49,"i",29),r.ac(50,"span",30),r.Rc(51,"Thu h\u1ed3i"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(52,"div"),r.ac(53,"p-table",31,32),r.ic("onLazyLoad",(function(a){return t.getDataPage(!1,a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(55,Ba,34,0,"ng-template",33),r.Pc(56,La,47,40,"ng-template",34),r.Pc(57,Ma,3,1,"ng-template",35),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(15),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1")("ngModel",t.keyword)("ngModelOptions",r.vc(39,Oa)),r.Ib(4),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(1),r.sc("formGroup",t.form),r.Ib(3),r.sc("form",t.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",t.nhaCungCaps)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("form",t.form)("title","M\xe3 s\u1eed d\u1ee5ng"),r.Ib(1),r.sc("options",t.maSuDungs)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(4),r.sc("disabled",t.checkVisibleCapPhat()),r.Ib(4),r.sc("disabled",t.checkVisibleDieuChuyen()),r.Ib(4),r.sc("disabled",t.checkVisibleThuHoi()),r.Ib(5),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked))},directives:[f.b,f.p,f.s,v.a,S.a,Z.a,f.q,f.i,w.a,f.g,y.c,I.d,y.e,y.b,y.a,y.d,i.l],pipes:[k.a,i.d,i.e],styles:[".margin_top10[_ngcontent-%COMP%]{margin-top:10px}"],data:{animation:[Object(d.b)()]}}),a})();const Aa=["dt"];function Fa(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",39),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",39),r.ac(4,"th",40),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",41),r.Zb(),r.ac(7,"th",42),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",43),r.Zb(),r.ac(10,"th",44),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",45),r.Zb(),r.ac(13,"th",46),r.Rc(14,"Serial Number "),r.Vb(15,"p-sortIcon",47),r.Zb(),r.ac(16,"th",48),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",49),r.Zb(),r.ac(19,"th",50),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",51),r.Zb(),r.ac(22,"th",52),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",53),r.Zb(),r.ac(25,"th",54),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",55),r.Zb(),r.ac(28,"th",56),r.Rc(29,"M\xe3 s\u1eed d\u1ee5ng "),r.Vb(30,"p-sortIcon",57),r.Zb(),r.ac(31,"th",58),r.Rc(32,"V\u1ecb tr\xed t\xe0i s\u1ea3n "),r.Vb(33,"p-sortIcon",59),r.Zb(),r.Zb())}function Ea(a,t){if(1&a){const a=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().capPhat(t,1)})),r.Rc(1,"C\u1ea5p ph\xe1t"),r.Zb()}}function Ha(a,t){if(1&a){const a=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().dieuChuyen(t)})),r.Rc(1,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb()}}function Ua(a,t){if(1&a){const a=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().thuHoi(t)})),r.Rc(1,"Thu h\u1ed3i"),r.Zb()}}function Ga(a,t){if(1&a){const a=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().hoanTac(t)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function ja(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",60),r.ac(1,"td",39),r.ac(2,"p-tableCheckbox",61),r.ic("selected",(function(){return r.Ic(a),r.lc().checkVisibleCapPhat()})),r.Zb(),r.Zb(),r.ac(3,"td",39),r.ac(4,"div",62),r.ac(5,"button",63),r.Vb(6,"i",64),r.Zb(),r.ac(7,"div",65),r.ac(8,"a",66),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,Ea,2,0,"a",67),r.Pc(11,Ha,2,0,"a",67),r.Pc(12,Ua,2,0,"a",67),r.Pc(13,Ga,2,0,"a",67),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"td",68),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",68),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",68),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",69),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",69),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.ac(29,"td",68),r.Rc(30),r.mc(31,"date"),r.mc(32,"truncate"),r.Zb(),r.ac(33,"td",68),r.Rc(34),r.mc(35,"number"),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",70),r.Rc(38),r.mc(39,"truncate"),r.Zb(),r.ac(40,"td",68),r.Rc(41),r.mc(42,"truncate"),r.Zb(),r.ac(43,"td",70),r.Rc(44),r.mc(45,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.sc("value",a),r.Ib(8),r.sc("ngIf",a.capPhat),r.Ib(1),r.sc("ngIf",a.dieuChuyen),r.Ib(1),r.sc("ngIf",a.thuHoi),r.Ib(1),r.sc("ngIf",e.checkHoanTac(a)),r.Ib(2),r.Tc(" ",r.nc(16,15,a.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(19,17,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,19,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(25,21,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(28,23,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(31,25,r.nc(32,28,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(35,30,r.nc(36,33,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(39,35,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(42,37,a.maSuDung)," "),r.Ib(3),r.Tc(" ",r.nc(45,39,a.viTriTaiSan)," ")}}function qa(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",71),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}const za=function(){return{standalone:!0}};let Qa=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._taiSanDangSuDungServiceProxy=t,this._fb=e,this._lookupTableService=i,this._modalService=n,this.isActive=0,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanChecked=[],this.tenTaiSan="",this.checkTaiSan24h=this.showUndoButton}ngOnChanges(a){var t;2===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)}),this.isGranted("Pages.QuanLyTaiSanTong")?Object(_.a)(this._lookupTableService.getAllToChucTree(),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe(([a,t,e,i])=>{this.loaiTaiSanItems=this.getTreeviewItem(t),this.nhaCungCaps=e,this.maSuDungs=i}):Object(_.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe(([a,t,e,i])=>{this.loaiTaiSanItems=this.getTreeviewItem(t),this.nhaCungCaps=e,this.maSuDungs=i}),this.khoiTaoForm()}checkVisibleCapPhat(){return 0===this.arrTaiSanChecked.filter(a=>a.capPhat).length}checkVisibleDieuChuyen(){return 0===this.arrTaiSanChecked.filter(a=>a.dieuChuyen).length}checkVisibleThuHoi(){return 0===this.arrTaiSanChecked.filter(a=>a.thuHoi).length}khoiTaoForm(){this.form=this._fb.group({NccDropdownMultiple:[],NhaCungCap:[],MaSuDung:[],DropDownTreeViewToChuc:[],DropDownTreeViewLoaiTaiSan:[]})}getDataPage(a,t){var e,i;this.loading=!0,this._taiSanDangSuDungServiceProxy.getAll(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,(null===(e=this.form.controls.NhaCungCap.value)||void 0===e?void 0:e.id)||void 0,(null===(i=this.form.controls.MaSuDung.value)||void 0===i?void 0:i.id)||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.totalCount=a.totalCount,this.records=a.items,void 0!==this.toChucValue||this.permission.isGranted("Pages.QuanLyTaiSanTong")||(this.records=this.records.filter(a=>this.listToChucId.includes(a.toChucId)))})}searchTrangThaiMaSuDung(a){const t=a.query;this._lookupTableService.getAllTinhTrangMaSuDungTaiSan().subscribe(a=>{this.maSuDungs=this.filterTrangThai(t,a)})}searchTrangThaiNhaCungCap(a){const t=a.query;this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.nhaCungCaps=this.filterTrangThai(t,a)})}filterTrangThai(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}_showCreateOrEditDemoDialog(a,t,e,i){let n;e===N.TrangThaiTaiSanConst.CapPhat&&(n=this._modalService.show(X,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),e===N.TrangThaiTaiSanConst.DieuChuyen&&(n=this._modalService.show(ra,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),e===N.TrangThaiTaiSanConst.ThuHoi&&(n=this._modalService.show(Va,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),e===N.TrangThaiTaiSanConst.TaiSanDangSuDung&&(n=this._modalService.show(Ta,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:t,flag:a,count:i}})),n.content.onSave.subscribe(()=>{this.getDataPage(!1),this.arrTaiSanChecked=[]})}capPhat(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,0)}capPhatMultiple(){const a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.CapPhat);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,a)}dieuChuyen(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,0)}dieuChuyenMultiple(){const a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.DieuChuyen);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,a)}removeTaiSanChecked(a){let t=0;return a===N.TrangThaiTaiSanConst.CapPhat&&this.arrTaiSanChecked.forEach(a=>{a.capPhat||(t++,this.arrTaiSanChecked=this.arrTaiSanChecked.filter(t=>t!==a))}),a===N.TrangThaiTaiSanConst.DieuChuyen&&this.arrTaiSanChecked.forEach(a=>{a.dieuChuyen||(t++,this.arrTaiSanChecked=this.arrTaiSanChecked.filter(t=>t!==a))}),a===N.TrangThaiTaiSanConst.ThuHoi&&this.arrTaiSanChecked.forEach(a=>{a.thuHoi||(t++,this.arrTaiSanChecked=this.arrTaiSanChecked.filter(t=>t!==a))}),t}thuHoi(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,0)}thuHoiMultiple(){const a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.ThuHoi);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,a)}deleteArrTaiSanChecked(){this.tenTaiSan=this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.ngayKhaiBao)).map(a=>a.tenTaiSan).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o s\u1eed d\u1ee5ng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(a=>{a.value&&this.clearArrChecked(this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.ngayKhaiBao)))})}checkHoanTac(a){return!!this.checkTaiSan24h(a.ngayKhaiBao)}hoanTac(a){this.tenTaiSan=!0===this.checkTaiSan24h(a.ngayKhaiBao)?a.tenTaiSan:"",this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+this.tenTaiSan+" s\u1ebd ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o s\u1eed d\u1ee5ng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(t=>{t.value&&(this.clearArrChecked(this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.ngayKhaiBao))),this._lookupTableService.deleteTaiSan(a.id).subscribe(()=>{this.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),this.getDataPage(!1)}))})}checkVisibleHoanTac(){return 0===this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.ngayKhaiBao)).length}clearArrChecked(a){this._taiSanDangSuDungServiceProxy.hoanTacTaiSanList(a.map(a=>a.id)).subscribe(()=>{this.arrTaiSanChecked=[],this.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),this.getDataPage(!1)})}pushTaiSan(a){this.arrTaiSanChecked=[],this.arrTaiSanChecked.push(a)}view(a){this._viewTaiSan(a,!0)}_viewTaiSan(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.mb),r.Ub(f.d),r.Ub(l.T),r.Ub(h.b))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san-dang-su-dung"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Aa,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:60,vars:40,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup"],["createUserModal","ngForm"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],[1,"ui-fluid","row"],["formControlName","NhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","MaSuDung","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-external-link-square-alt"],["type","button",1,"btn","btn-primary","m-l-5",3,"disabled","click"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-retweet"],[2,"margin-left","10px"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-200"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-200"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-250"],["field","phongBanQuanLy"],["pSortableColumn","maSuDung",1,"width-150"],["field","maSuDung"],["pSortableColumn","viTriTaiSan",1,"width-250"],["field","viTriTaiSan"],[1,"ui-selectable-row"],[3,"value","selected"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[1,"width-200"],[1,"width-250"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n \u0111ang s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(7,"section",4),r.ac(8,"div",1),r.ac(9,"div",5),r.ac(10,"div",6),r.ac(11,"div",7),r.ac(12,"div",8),r.ac(13,"button",9),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(14,"i",10),r.Zb(),r.Zb(),r.ac(15,"input",11),r.ic("ngModelChange",(function(a){return t.keyword=a}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(16,"form",12,13),r.ac(18,"div",14),r.ac(19,"div",15),r.ac(20,"div",16),r.Vb(21,"dft-label-validation",17),r.ac(22,"app-multiple-select-tree",18),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(23,"div",15),r.ac(24,"div",16),r.Vb(25,"dft-label-validation",17),r.ac(26,"app-dropdown-treeview-select",19),r.ic("valueChange",(function(a){return t.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",20),r.ac(28,"div",15),r.ac(29,"div",16),r.Vb(30,"dft-label-validation",17),r.Vb(31,"p-dropdown",21),r.Zb(),r.Zb(),r.ac(32,"div",15),r.ac(33,"div",16),r.Vb(34,"dft-label-validation",17),r.Vb(35,"p-dropdown",22),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",23),r.ac(37,"div",24),r.ac(38,"button",25),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(39,"i",26),r.ac(40,"span",27),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.ac(42,"button",28),r.ic("click",(function(){return t.capPhatMultiple()})),r.Vb(43,"i",29),r.ac(44,"span",27),r.Rc(45,"C\u1ea5p ph\xe1t"),r.Zb(),r.Zb(),r.ac(46,"button",30),r.ic("click",(function(){return t.dieuChuyenMultiple()})),r.Vb(47,"i",31),r.ac(48,"span",27),r.Rc(49,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb(),r.Zb(),r.ac(50,"button",30),r.ic("click",(function(){return t.thuHoiMultiple()})),r.Vb(51,"i",32),r.ac(52,"span",33),r.Rc(53,"Thu h\u1ed3i"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(54,"div"),r.ac(55,"p-table",34,35),r.ic("onLazyLoad",(function(a){return t.getDataPage(!1,a)}))("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(57,Fa,34,0,"ng-template",36),r.Pc(58,ja,46,41,"ng-template",37),r.Pc(59,qa,3,1,"ng-template",38),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(15),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1")("ngModel",t.keyword)("ngModelOptions",r.vc(39,za)),r.Ib(1),r.sc("formGroup",t.form),r.Ib(5),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(4),r.sc("form",t.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",t.nhaCungCaps)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("form",t.form)("title","M\xe3 s\u1eed d\u1ee5ng"),r.Ib(1),r.sc("options",t.maSuDungs)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",t.checkVisibleHoanTac()),r.Ib(4),r.sc("disabled",t.checkVisibleCapPhat()),r.Ib(4),r.sc("disabled",t.checkVisibleDieuChuyen()),r.Ib(4),r.sc("disabled",t.checkVisibleThuHoi()),r.Ib(5),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable)("selection",t.arrTaiSanChecked))},directives:[f.b,f.p,f.s,f.z,f.q,f.i,v.a,S.a,Z.a,w.a,f.g,y.c,I.d,y.e,y.b,y.a,y.d,i.l],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();var $a=e("lJxs"),Xa=e("EnVa");const Ja=["dt"];function Ya(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function Wa(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,e.models.TrangThaiTaiSanHienThiSorted[a.hinhThuc])," "),r.Ib(3),r.sc("value",a)}}function at(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function tt(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.arrTaiSanChecked&&a.arrTaiSanChecked.length))}}let et=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._taiSanServiceProxy=t,this._lookupTableService=e,this._fb=i,this.bsModalRef=n,this.enums=N,this.models=Xa,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this._unsubscribe=[]}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe(([a])=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{a.items=a.items.filter(a=>!this.arrTaiSanCheckedFromParent.some(t=>t.id===a.id)),this.records=a.items,this.totalCount=a.totalCount})}formCreate(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}close(){this.bsModalRef.hide()}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.rb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-tai-san-sua-chua-bao-duong"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Ja,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(23,Ya,21,0,"ng-template",17),r.Pc(24,Wa,21,19,"ng-template",18),r.Pc(25,at,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,tt,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,Z.a,S.a,y.c,I.d,i.l,y.b,y.a,y.e,y.d,O.a],pipes:[k.a],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const it=["dt"];function nt(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function ot(a,t){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",r.nc(5,9,e+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,a.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,a.phongBanQuanLy)," ")}}function ct(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function rt(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.records&&a.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}let st=(()=>{class a extends c.a{constructor(a,t,e,i,n,o){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.bsModalRef=o,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.createInputDto=new l.eb,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrHinhThuc=[],this.arrTaiSanChecked=[]}ngOnInit(){this.khoiTaoForm(),Object(_.a)(this._lookupTableService.getAllTrangThaiTaiSan()).subscribe(([a])=>{this.arrHinhThuc=a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong)})}create(a){this._showCreateOrEditDemoDialog(a)}khoiTaoForm(){this.form=this._fb.group({hinhThuc:["",f.y.required],thoiGianBatDau:[new Date,f.y.required],noiDungKhaiBaoSuaChuaBaoDuong:["",[f.y.required,f.y.maxLength(4e3),Object(G.b)()]],diaChiSuaChuaBaoDuong:["",[f.y.maxLength(4e3),Object(G.b)()]]})}search(a,t){const e=a.query;"hinhThuc"===t&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(et,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t,arrTaiSanCheckedFromParent:this.records}}),e.content.onSave.subscribe(()=>{this.records=[...this.records,...e.content.arrTaiSanChecked],this.totalCount=this.records.length})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanSuaChuaBaoDuong(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{1===a?this.showExistMessage("M\xe3 nh\xe0 cung c\u1ea5p \u0111\xe3 b\u1ecb tr\xf9ng!"):this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}))}close(){this.bsModalRef.hide()}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,e.trangThaiId=this.enums.TrangThaiSuaChuaBaoDuongConst.DangThucHien,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.form.value.hinhThuc.id,ngayKhaiBao:this.form.value.thoiGianBatDau,noiDung:this.form.value.noiDungKhaiBaoSuaChuaBaoDuong,diaChi:this.form.value.diaChiSuaChuaBaoDuong,phieuTaiSanChiTietList:a})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.rb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-create-or-edit-tai-san-sua-chua-bao-duong"]],viewQuery:function(a,t){var e;1&a&&r.Vc(it,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:47,vars:29,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["formControlName","hinhThuc","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[3,"control"],["formControlName","thoiGianBatDau",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBaoSuaChuaBaoDuong","id","noiDungKhaiBaoSuaChuaBaoDuong","rows","4","maxlength","4000",1,"form-control"],["formControlName","diaChiSuaChuaBaoDuong","id","diaChiSuaChuaBaoDuong","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[1,"m-l-5"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-50"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"p-dropdown",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",6),r.Vb(12,"p-calendar",9),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",10),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",6),r.Vb(18,"textarea",11),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",10),r.ac(22,"div",5),r.Vb(23,"dft-label-validation",6),r.Vb(24,"textarea",12),r.Vb(25,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"div",3),r.ac(27,"div",4),r.ac(28,"label"),r.Rc(29,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o/ s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng"),r.Zb(),r.Zb(),r.ac(30,"div",4),r.ac(31,"div",13),r.ac(32,"button",14),r.ic("click",(function(){return t.create()})),r.Vb(33,"i",15),r.ac(34,"span",16),r.Rc(35,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(36,"button",17),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(37,"i",18),r.ac(38,"span",16),r.Rc(39,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"div"),r.ac(41,"p-table",19,20),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(43,nt,26,0,"ng-template",21),r.Pc(44,ot,29,31,"ng-template",22),r.Pc(45,ct,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(46,rt,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title",t.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng":"Khai b\xe1o T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(5),r.sc("control",t.form.get("hinhThuc"))("title","H\xecnh th\u1ee9c *"),r.Ib(1),r.sc("options",t.arrHinhThuc)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(1),r.sc("control",t.form.get("hinhThuc")),r.Ib(3),r.sc("control",t.form.get("thoiGianBatDau"))("title","Th\u1eddi gian b\u1eaft \u0111\u1ea7u *"),r.Ib(1),r.sc("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianBatDau")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBaoSuaChuaBaoDuong"))("title","N\u1ed9i dung khai b\xe1o s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng *"),r.Ib(2),r.sc("control",t.form.get("noiDungKhaiBaoSuaChuaBaoDuong")),r.Ib(4),r.sc("control",t.form.get("diaChiSuaChuaBaoDuong"))("title","\u0110\u1ecba ch\u1ec9 s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(2),r.sc("control",t.form.get("diaChiSuaChuaBaoDuong")),r.Ib(11),r.sc("disabled",0===t.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("scrollable",t.scrollable),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,w.a,f.p,f.g,G.a,j.a,f.b,f.k,y.c,I.d,i.l,y.e,y.b,y.a,y.d,O.a],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const lt=["dt"];function ht(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",37),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",37),r.ac(4,"th",38),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",39),r.Zb(),r.ac(7,"th",40),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",41),r.Zb(),r.ac(10,"th",42),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",43),r.Zb(),r.ac(13,"th",44),r.Rc(14,"Nh\xe0 cung c\u1ea5p "),r.Vb(15,"p-sortIcon",45),r.Zb(),r.ac(16,"th",46),r.Rc(17,"Nguy\xean gi\xe1 "),r.Vb(18,"p-sortIcon",47),r.Zb(),r.ac(19,"th",48),r.Rc(20,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(21,"p-sortIcon",49),r.Zb(),r.ac(22,"th",50),r.Rc(23,"H\xecnh th\u1ee9c "),r.Vb(24,"p-sortIcon",51),r.Zb(),r.ac(25,"th",52),r.Rc(26,"L\xed do s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng "),r.Vb(27,"p-sortIcon",53),r.Zb(),r.ac(28,"th",54),r.Rc(29,"\u0110\u1ecba ch\u1ec9 s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng "),r.Vb(30,"p-sortIcon",55),r.Zb(),r.ac(31,"th",56),r.Rc(32,"Th\u1eddi gian b\u1eaft \u0111\u1ea7u "),r.Vb(33,"p-sortIcon",57),r.Zb(),r.ac(34,"th",58),r.Rc(35,"Tr\u1ea1ng th\xe1i "),r.Vb(36,"p-sortIcon",59),r.Zb(),r.Zb())}function bt(a,t){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",69),r.Zb()),2&a){const a=r.lc().$implicit;r.Ib(1),r.sc("value",a)}}function ut(a,t){if(1&a){const a=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().unsuccess(t)})),r.Rc(1,"Kh\xf4ng th\xe0nh c\xf4ng"),r.Zb()}}function dt(a,t){if(1&a){const a=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().delete(t)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function gt(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",60),r.ac(1,"td",37),r.Pc(2,bt,2,1,"div",61),r.Zb(),r.ac(3,"td",37),r.ac(4,"div",62),r.ac(5,"button",63),r.Vb(6,"i",64),r.Zb(),r.ac(7,"div",65),r.ac(8,"a",66),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.ac(10,"a",66),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().success(e)})),r.Rc(11,"Th\xe0nh c\xf4ng"),r.Zb(),r.Pc(12,ut,2,0,"a",67),r.Pc(13,dt,2,0,"a",67),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"td",68),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",68),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",68),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",68),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",68),r.Rc(27),r.mc(28,"number"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",68),r.Rc(31),r.mc(32,"truncate"),r.Zb(),r.ac(33,"td",68),r.Rc(34),r.mc(35,"truncate"),r.Zb(),r.ac(36,"td",68),r.Rc(37),r.mc(38,"truncate"),r.Zb(),r.ac(39,"td",68),r.Rc(40),r.mc(41,"truncate"),r.Zb(),r.ac(42,"td",68),r.Rc(43),r.mc(44,"date"),r.mc(45,"truncate"),r.Zb(),r.ac(46,"td",68),r.Rc(47),r.mc(48,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.sc("ngIf",e.showUndoButton(a.thoiGianBatDau)),r.Ib(10),r.sc("ngIf",a.trangThai!=e.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong),r.Ib(1),r.sc("ngIf",e.showUndoButton(a.thoiGianBatDau)&&a.trangThai!=e.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong),r.Ib(2),r.Tc(" ",r.nc(16,14,a.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(32,27,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(35,29,e.arrDonVi[a.hinhThuc])," "),r.Ib(3),r.Tc(" ",r.nc(38,31,a.liDoSuaChuaBaoDuong)," "),r.Ib(3),r.Tc(" ",r.nc(41,33,a.diaChiSuaChuaBaoDuong)," "),r.Ib(3),r.Tc(" ",r.oc(44,35,r.nc(45,38,a.thoiGianBatDau),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(48,40,e.models.TrangThaiSuaChuaBaoDuongSorted[a.trangThai])," ")}}function pt(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",70),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let mt=(()=>{class a extends c.a{constructor(a,t,e,i,n,o){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this._sendMail=o,this.isActive=0,this.loading=!0,this.exporting=!1,this.totalCount=0,this.records=[],this.arrDonVi=["","","","","","S\u1eeda ch\u1eefa","B\u1ea3o d\u01b0\u1ee1ng"],this.arrTaiSanChecked=[],this.selectedValues=[],this.tenTaiSan="",this._unsubscribe=[],this.checkTaiSan24h=this.showUndoButton}ngOnChanges(a){var t;3===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTrangThaiTaiSan(),this._lookupTableService.getAllTrangThaiSuaChuaBaoDuong()).subscribe(([a,t,e,i])=>{this.loaiTaiSanItems=this.getTreeviewItem(a),this.arrNhaCungCap=t,this.arrHinhThuc=e.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong),this.arrTrangThai=i.filter(a=>a.id===this.enums.TrangThaiSuaChuaBaoDuongConst.DangThucHien||a.id===this.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong)})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){var e,i,n;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanSuaChuaBaoDuong(this.form.value.tenTaiSan||void 0,this.toChucValue,this.form.value.loaiTaiSan||void 0,(null===(e=this.form.value.nhaCungCap)||void 0===e?void 0:e.displayName)||void 0,(null===(i=this.form.value.hinhThuc)||void 0===i?void 0:i.id)||void 0,(null===(n=this.form.value.trangThai)||void 0===n?void 0:n.id)||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,this.totalCount=a.totalCount})}create(a){this._showCreateOrEditDemoDialog(a)}success(a){a&&(a.trangThai=this.enums.TrangThaiSuaChuaBaoDuongConst.ThanhCong,this._taiSanServiceProxy.editTaiSanSuaChuaBaoDuong(a).subscribe(()=>{this._sendMail.sendMailKetQuaBaoDuong(a).subscribe(a=>{}),this.getDataPage(!1),this.showUpdateMessage()}))}unsuccess(a){a&&(a.trangThai=this.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong,this._taiSanServiceProxy.editTaiSanSuaChuaBaoDuong(a).subscribe(()=>{this._sendMail.sendMailKetQuaBaoDuong(a).subscribe(a=>{}),this.getDataPage(!1),this.showUpdateMessage()}))}delete(a){this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe(t=>{this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(t=>{t.value&&this.clearArrChecked([a])})})}deleteArrTaiSanChecked(){this.tenTaiSan=this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)).map(a=>a.tenTaiSan).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o s\u1eeda ch\u1eefa/b\u1ea3o d\u01b0\u1ee1ng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(a=>{a.value&&this.clearArrChecked(this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)))})}clearArrChecked(a){this._taiSanServiceProxy.hoanTacTaiSanSuaChuaBaoDuong(a.map(a=>({id:a.id}))).subscribe(()=>{this.arrTaiSanChecked=[],this.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),this.getDataPage(!1)})}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(st,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}view(a){this._showCreateOrEditTaiSanDialog(a,!0)}_showCreateOrEditTaiSanDialog(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}search(a,t){const e=a.query;switch(t){case"nhaCungCap":this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.suggestionsSingle=this.filter(e,a)});break;case"hinhThuc":this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)});break;case"trangThai":this._lookupTableService.getAllTrangThaiSuaChuaBaoDuong().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiSuaChuaBaoDuongConst.DangThucHien||a.id===this.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}formCreate(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[],hinhThuc:[],trangThai:[]})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.rb),r.Ub(l.T),r.Ub(f.d),r.Ub(l.V))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san-sua-chua-bao-duong"]],viewQuery:function(a,t){var e;1&a&&r.Vc(lt,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:60,vars:35,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[3,"formGroup"],[1,"card-body"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","hinhThuc","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","trangThai","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],["pSortableColumn","liDoSuaChuaBaoDuong",1,"width-150"],["field","liDoSuaChuaBaoDuong"],["pSortableColumn","diaChiSuaChuaBaoDuong",1,"width-150"],["field","diaChiSuaChuaBaoDuong"],["pSortableColumn","thoiGianBatDau",1,"width-150"],["field","thoiGianBatDau"],["pSortableColumn","trangThai",1,"width-150"],["field","trangThai"],[1,"ui-selectable-row"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/b\u1ea3o d\u01b0\u1ee1ng"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return t.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"form",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.ac(25,"div",20),r.Vb(26,"dft-label-validation",21),r.ac(27,"app-multiple-select-tree",22),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(28,"div",19),r.ac(29,"div",20),r.Vb(30,"dft-label-validation",21),r.ac(31,"app-dropdown-treeview-select",23),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(32,"div",19),r.ac(33,"div",20),r.ac(34,"label",24),r.Rc(35,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(36,"p-dropdown",25),r.Zb(),r.Zb(),r.Zb(),r.ac(37,"div",18),r.ac(38,"div",19),r.ac(39,"div",20),r.ac(40,"label",24),r.Rc(41,"H\xecnh th\u1ee9c"),r.Zb(),r.Vb(42,"p-dropdown",26),r.Zb(),r.Zb(),r.ac(43,"div",19),r.ac(44,"div",20),r.ac(45,"label",24),r.Rc(46,"Tr\u1ea1ng th\xe1i"),r.Zb(),r.Vb(47,"p-dropdown",27),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(48,"div",28),r.ac(49,"div",29),r.ac(50,"button",30),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(51,"i",31),r.ac(52,"span",7),r.Rc(53,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(54,"div"),r.ac(55,"p-table",32,33),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(57,ht,37,0,"ng-template",34),r.Pc(58,gt,49,42,"ng-template",35),r.Pc(59,pt,3,1,"ng-template",36),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",t.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, nguy\xean gi\xe1, \u0111\u1ecba ch\u1ec9 s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(1),r.sc("formGroup",t.form),r.Ib(5),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(5),r.sc("options",t.arrNhaCungCap)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(6),r.sc("options",t.arrHinhThuc)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(5),r.sc("options",t.arrTrangThai)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable))},directives:[C.a,f.z,f.q,f.i,v.a,S.a,Z.a,w.a,f.p,f.g,y.c,I.d,y.e,y.b,y.a,i.l,y.d],pipes:[k.a,i.e,i.d],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const ft=["dt"];function Tt(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function Ct(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,e.models.TrangThaiTaiSanHienThiSorted[a.hinhThuc])," "),r.Ib(3),r.sc("value",a)}}function vt(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function St(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.arrTaiSanChecked&&a.arrTaiSanChecked.length))}}let Zt=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._taiSanServiceProxy=t,this._lookupTableService=e,this._fb=i,this.bsModalRef=n,this.enums=N,this.models=Xa,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this._unsubscribe=[]}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe(([a])=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{a.items=a.items.filter(a=>!this.arrTaiSanCheckedFromParent.some(t=>t.id===a.id)),this.records=a.items,this.totalCount=a.totalCount})}formCreate(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}close(){this.bsModalRef.hide()}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.qb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-tai-san-mat"]],viewQuery:function(a,t){var e;1&a&&r.Vc(ft,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(23,Tt,21,0,"ng-template",17),r.Pc(24,Ct,21,19,"ng-template",18),r.Pc(25,vt,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,St,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o m\u1ea5t"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,Z.a,S.a,y.c,I.d,i.l,y.b,y.a,y.e,y.d,O.a],pipes:[k.a],styles:[""],data:{animation:[Object(d.b)()]}}),a})();var wt=e("7kUa");const yt=["dt"];function It(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function kt(a,t){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",r.nc(5,9,e+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,a.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,a.phongBanQuanLy)," ")}}function Dt(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function Rt(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.records&&a.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}let Vt=(()=>{class a extends c.a{constructor(a,t,e,i,n,o,c){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.bsModalRef=o,this._sendMail=c,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.createInputDto=new l.eb,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanChecked=[]}ngOnInit(){this.khoiTaoForm()}create(a){this._showCreateOrEditDemoDialog(a)}khoiTaoForm(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,f.y.required],thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.required,f.y.maxLength(4e3),Object(G.b)()]]})}search(a,t){const e=a.query;"hinhThuc"===t&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(Zt,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t,arrTaiSanCheckedFromParent:this.records}}),e.content.onSave.subscribe(()=>{this.records=[...this.records,...e.content.arrTaiSanChecked],this.totalCount=this.records.length})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanMat(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{1===a?this.showExistMessage("L\u1ed7i"):this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this._sendMail.sendMailBaoMat(void 0,this.records).subscribe(a=>{}),this.bsModalRef.hide(),this.onSave.emit())}))}close(){this.bsModalRef.hide()}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanMat,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.qb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a),r.Ub(l.V))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-create-or-edit-tai-san-mat"]],viewQuery:function(a,t){var e;1&a&&r.Vc(yt,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o m\u1ea5t"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return t.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(37,It,26,0,"ng-template",21),r.Pc(38,kt,29,31,"ng-template",22),r.Pc(39,Dt,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,Rt,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title",t.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n m\u1ea5t":"Khai b\xe1o T\xe0i s\u1ea3n m\u1ea5t"),r.Ib(5),r.sc("form",t.form)("control",t.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",t.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",t.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o m\u1ea5t *"),r.Ib(2),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("scrollable",t.scrollable),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,f.b,f.x,f.k,f.p,f.g,wt.a,f.f,G.a,j.a,y.c,I.d,i.l,y.e,y.b,y.a,y.d,O.a],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const Pt=["dt"];function Bt(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",34),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",34),r.ac(4,"th",35),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",36),r.Zb(),r.ac(7,"th",37),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",38),r.Zb(),r.ac(10,"th",39),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",40),r.Zb(),r.ac(13,"th",41),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",42),r.Zb(),r.ac(16,"th",43),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",44),r.Zb(),r.ac(19,"th",45),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",46),r.Zb(),r.ac(22,"th",47),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",48),r.Zb(),r.ac(25,"th",49),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",50),r.Zb(),r.ac(28,"th",51),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",52),r.Zb(),r.ac(31,"th",53),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",54),r.Zb(),r.Zb())}function xt(a,t){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",65),r.Zb()),2&a){const a=r.lc().$implicit;r.Ib(1),r.sc("value",a)}}function Nt(a,t){if(1&a){const a=r.bc();r.ac(0,"a",62),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().delete(t)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function _t(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",55),r.ac(1,"td",56),r.Pc(2,xt,2,1,"div",57),r.Zb(),r.ac(3,"td",56),r.ac(4,"div",58),r.ac(5,"button",59),r.Vb(6,"i",60),r.Zb(),r.ac(7,"div",61),r.ac(8,"a",62),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,Nt,2,0,"a",63),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",64),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",64),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",64),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",64),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",64),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",64),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",64),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",64),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",64),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",64),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,a.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,a.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,a.nguyenNhan)," ")}}function Lt(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",66),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let Mt=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.isActive=0,this.loading=!0,this.exporting=!1,this.totalCount=0,this.records=[],this.arrTaiSanChecked=[],this.selectedValues=[],this.tenTaiSan="",this._unsubscribe=[],this.checkTaiSan24h=this.showUndoButton}ngOnChanges(a){var t;4===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe(([a,t])=>{this.loaiTaiSanItems=this.getTreeviewItem(a),this.arrNhaCungCap=t})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){var e;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanMat(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(e=this.form.value.nhaCungCap)||void 0===e?void 0:e.displayName)||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,this.totalCount=a.totalCount})}create(a){this._showCreateOrEditDemoDialog(a)}delete(a){this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe(t=>{this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(t=>{t.value&&this.clearArrChecked([a])})})}deleteArrTaiSanChecked(){this.tenTaiSan=this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)).map(a=>a.tenTaiSan).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o m\u1ea5t",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(a=>{a.value&&this.clearArrChecked(this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)))})}clearArrChecked(a){this._taiSanServiceProxy.hoanTacTaiSanMat(a.map(a=>({id:a.id}))).subscribe(()=>{this.arrTaiSanChecked=[],this.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),this.getDataPage(!1)})}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(Vt,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}view(a){this._showCreateOrEditTaiSanDialog(a,!0)}_showCreateOrEditTaiSanDialog(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}search(a,t){const e=a.query;"nhaCungCap"===t&&this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}formCreate(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.qb),r.Ub(l.T),r.Ub(f.d))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san-mat"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Pt,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:48,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"card-body",3,"formGroup"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","7",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n \u0111\xe3 m\u1ea5t"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return t.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o m\u1ea5t"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"div",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.Vb(25,"dft-label-validation",20),r.ac(26,"app-multiple-select-tree",21),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",18),r.ac(28,"div",19),r.Vb(29,"dft-label-validation",20),r.ac(30,"app-dropdown-treeview-select",22),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",18),r.ac(32,"div",19),r.ac(33,"label",23),r.Rc(34,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(35,"p-dropdown",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",25),r.ac(37,"div",26),r.ac(38,"button",27),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(39,"i",28),r.ac(40,"span",7),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div"),r.ac(43,"p-table",29,30),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(45,Bt,34,0,"ng-template",31),r.Pc(46,_t,44,41,"ng-template",32),r.Pc(47,Lt,3,1,"ng-template",33),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",t.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",t.form),r.Ib(4),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(5),r.sc("options",t.arrNhaCungCap)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable))},directives:[C.a,f.q,f.i,v.a,S.a,Z.a,w.a,f.p,f.g,y.c,I.d,y.e,y.b,y.a,i.l,y.d],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const Ot=["dt"];function Kt(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function At(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,e.models.TrangThaiTaiSanHienThiSorted[a.hinhThuc])," "),r.Ib(3),r.sc("value",a)}}function Ft(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function Et(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.arrTaiSanChecked&&a.arrTaiSanChecked.length))}}let Ht=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._taiSanServiceProxy=t,this._lookupTableService=e,this._fb=i,this.bsModalRef=n,this.enums=N,this.models=Xa,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this._unsubscribe=[]}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe(([a])=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{a.items=a.items.filter(a=>!this.arrTaiSanCheckedFromParent.some(t=>t.id===a.id)),this.records=a.items,this.totalCount=a.totalCount})}formCreate(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}close(){this.bsModalRef.hide()}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.ob),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-tai-san-hong"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Ot,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(23,Kt,21,0,"ng-template",17),r.Pc(24,At,21,19,"ng-template",18),r.Pc(25,Ft,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,Et,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o h\u1ecfng"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,Z.a,S.a,y.c,I.d,i.l,y.b,y.a,y.e,y.d,O.a],pipes:[k.a],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const Ut=["dt"];function Gt(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function jt(a,t){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",r.nc(5,9,e+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,a.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,a.phongBanQuanLy)," ")}}function qt(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function zt(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.records&&a.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}let Qt=(()=>{class a extends c.a{constructor(a,t,e,i,n,o,c){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.bsModalRef=o,this._sesndMail=c,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.createInputDto=new l.eb,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanChecked=[]}ngOnInit(){this.khoiTaoForm()}create(a){this._showCreateOrEditDemoDialog(a)}khoiTaoForm(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,f.y.required],thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.required,f.y.maxLength(4e3),Object(G.b)()]]})}search(a,t){const e=a.query;"hinhThuc"===t&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(Ht,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t,arrTaiSanCheckedFromParent:this.records}}),e.content.onSave.subscribe(()=>{this.records=[...this.records,...e.content.arrTaiSanChecked],this.totalCount=this.records.length})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanHong(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{1===a?this.showExistMessage("L\u1ed7i"):this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this._sesndMail.sendMailBaoHong(void 0,this.records).subscribe(a=>{}),this.bsModalRef.hide(),this.onSave.emit())}))}close(){this.bsModalRef.hide()}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanHong,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.ob),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a),r.Ub(l.V))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-create-or-edit-tai-san-hong"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Ut,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o h\u1ecfng"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return t.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(37,Gt,26,0,"ng-template",21),r.Pc(38,jt,29,31,"ng-template",22),r.Pc(39,qt,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,zt,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title",t.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n h\u1ecfng":"Khai b\xe1o T\xe0i s\u1ea3n h\u1ecfng"),r.Ib(5),r.sc("form",t.form)("control",t.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",t.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",t.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o h\u1ecfng *"),r.Ib(2),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("scrollable",t.scrollable),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,f.b,f.x,f.k,f.p,f.g,wt.a,f.f,G.a,j.a,y.c,I.d,i.l,y.e,y.b,y.a,y.d,O.a],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const $t=["dt"];function Xt(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",34),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",34),r.ac(4,"th",35),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",36),r.Zb(),r.ac(7,"th",37),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",38),r.Zb(),r.ac(10,"th",39),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",40),r.Zb(),r.ac(13,"th",41),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",42),r.Zb(),r.ac(16,"th",43),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",44),r.Zb(),r.ac(19,"th",45),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",46),r.Zb(),r.ac(22,"th",47),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",48),r.Zb(),r.ac(25,"th",49),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",50),r.Zb(),r.ac(28,"th",51),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",52),r.Zb(),r.ac(31,"th",53),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",54),r.Zb(),r.Zb())}function Jt(a,t){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",65),r.Zb()),2&a){const a=r.lc().$implicit;r.Ib(1),r.sc("value",a)}}function Yt(a,t){if(1&a){const a=r.bc();r.ac(0,"a",62),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().delete(t)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function Wt(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",55),r.ac(1,"td",56),r.Pc(2,Jt,2,1,"div",57),r.Zb(),r.ac(3,"td",56),r.ac(4,"div",58),r.ac(5,"button",59),r.Vb(6,"i",60),r.Zb(),r.ac(7,"div",61),r.ac(8,"a",62),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,Yt,2,0,"a",63),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",64),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",64),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",64),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",64),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",64),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",64),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",64),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",64),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",64),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",64),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,a.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,a.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,a.nguyenNhan)," ")}}function ae(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",66),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let te=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.isActive=0,this.loading=!0,this.exporting=!1,this.totalCount=0,this.records=[],this.arrTaiSanChecked=[],this.selectedValues=[],this.tenTaiSan="",this._unsubscribe=[],this.checkTaiSan24h=this.showUndoButton}ngOnChanges(a){var t;5===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe(([a,t])=>{this.loaiTaiSanItems=this.getTreeviewItem(a),this.arrNhaCungCap=t})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){var e;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanHong(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(e=this.form.value.nhaCungCap)||void 0===e?void 0:e.displayName)||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,this.totalCount=a.totalCount})}create(a){this._showCreateOrEditDemoDialog(a)}delete(a){this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe(t=>{this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(t=>{t.value&&this.clearArrChecked([a])})})}deleteArrTaiSanChecked(){this.tenTaiSan=this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)).map(a=>a.tenTaiSan).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o h\u1ecfng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(a=>{a.value&&this.clearArrChecked(this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)))})}clearArrChecked(a){this._taiSanServiceProxy.hoanTacTaiSanHong(a.map(a=>({id:a.id}))).subscribe(()=>{this.arrTaiSanChecked=[],this.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),this.getDataPage(!1)})}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(Qt,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}view(a){this._showCreateOrEditTaiSanDialog(a,!0)}_showCreateOrEditTaiSanDialog(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}search(a,t){const e=a.query;"nhaCungCap"===t&&this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}formCreate(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.ob),r.Ub(l.T),r.Ub(f.d))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san-hong"]],viewQuery:function(a,t){var e;1&a&&r.Vc($t,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:48,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"card-body",3,"formGroup"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n \u0111\xe3 h\u1ecfng"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return t.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o h\u1ecfng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"div",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.Vb(25,"dft-label-validation",20),r.ac(26,"app-multiple-select-tree",21),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",18),r.ac(28,"div",19),r.Vb(29,"dft-label-validation",20),r.ac(30,"app-dropdown-treeview-select",22),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",18),r.ac(32,"div",19),r.ac(33,"label",23),r.Rc(34,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(35,"p-dropdown",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",25),r.ac(37,"div",26),r.ac(38,"button",27),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(39,"i",28),r.ac(40,"span",7),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div"),r.ac(43,"p-table",29,30),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(45,Xt,34,0,"ng-template",31),r.Pc(46,Wt,44,41,"ng-template",32),r.Pc(47,ae,3,1,"ng-template",33),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",t.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",t.form),r.Ib(4),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(5),r.sc("options",t.arrNhaCungCap)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable))},directives:[C.a,f.q,f.i,v.a,S.a,Z.a,w.a,f.p,f.g,y.c,I.d,y.e,y.b,y.a,i.l,y.d],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const ee=["dt"];function ie(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function ne(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,e.models.TrangThaiTaiSanHienThiSorted[a.hinhThuc])," "),r.Ib(3),r.sc("value",a)}}function oe(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function ce(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.arrTaiSanChecked&&a.arrTaiSanChecked.length))}}let re=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._taiSanServiceProxy=t,this._lookupTableService=e,this._fb=i,this.bsModalRef=n,this.enums=N,this.models=Xa,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this._unsubscribe=[]}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe(([a])=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{a.items=a.items.filter(a=>!this.arrTaiSanCheckedFromParent.some(t=>t.id===a.id)),this.records=a.items,this.totalCount=a.totalCount})}formCreate(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}close(){this.bsModalRef.hide()}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.sb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-tai-san-thanh-ly"]],viewQuery:function(a,t){var e;1&a&&r.Vc(ee,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(23,ie,21,0,"ng-template",17),r.Pc(24,ne,21,19,"ng-template",18),r.Pc(25,oe,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,ce,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o thanh l\xfd"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,Z.a,S.a,y.c,I.d,i.l,y.b,y.a,y.e,y.d,O.a],pipes:[k.a],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const se=["dt"];function le(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function he(a,t){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",r.nc(5,9,e+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,a.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,a.phongBanQuanLy)," ")}}function be(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function ue(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.records&&a.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}let de=(()=>{class a extends c.a{constructor(a,t,e,i,n,o,c){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.bsModalRef=o,this._sendMail=c,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.createInputDto=new l.eb,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanChecked=[]}ngOnInit(){this.khoiTaoForm()}create(a){this._showCreateOrEditDemoDialog(a)}khoiTaoForm(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,f.y.required],thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.required,f.y.maxLength(4e3),Object(G.b)()]]})}search(a,t){const e=a.query;"hinhThuc"===t&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(re,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t,arrTaiSanCheckedFromParent:this.records}}),e.content.onSave.subscribe(()=>{this.records=[...this.records,...e.content.arrTaiSanChecked],this.totalCount=this.records.length})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanThanhLy(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{1===a?this.showExistMessage("L\u1ed7i"):this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this._sendMail.sendMailThanhLy(void 0,this.records).subscribe(a=>{}),this.bsModalRef.hide(),this.onSave.emit())}))}close(){this.bsModalRef.hide()}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanThanhLy,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.sb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a),r.Ub(l.V))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-create-or-edit-tai-san-thanh-ly"]],viewQuery:function(a,t){var e;1&a&&r.Vc(se,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o thanh l\xfd"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return t.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(37,le,26,0,"ng-template",21),r.Pc(38,he,29,31,"ng-template",22),r.Pc(39,be,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,ue,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title",t.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n thanh l\xfd":"Khai b\xe1o T\xe0i s\u1ea3n thanh l\xfd"),r.Ib(5),r.sc("form",t.form)("control",t.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",t.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",t.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o *"),r.Ib(2),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("scrollable",t.scrollable),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,f.b,f.x,f.k,f.p,f.g,wt.a,f.f,G.a,j.a,y.c,I.d,i.l,y.e,y.b,y.a,y.d,O.a],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const ge=["dt"];function pe(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",34),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",34),r.ac(4,"th",35),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",36),r.Zb(),r.ac(7,"th",37),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",38),r.Zb(),r.ac(10,"th",39),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",40),r.Zb(),r.ac(13,"th",41),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",42),r.Zb(),r.ac(16,"th",43),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",44),r.Zb(),r.ac(19,"th",45),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",46),r.Zb(),r.ac(22,"th",47),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",48),r.Zb(),r.ac(25,"th",49),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",50),r.Zb(),r.ac(28,"th",51),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",52),r.Zb(),r.ac(31,"th",53),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",54),r.Zb(),r.Zb())}function me(a,t){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",65),r.Zb()),2&a){const a=r.lc().$implicit;r.Ib(1),r.sc("value",a)}}function fe(a,t){if(1&a){const a=r.bc();r.ac(0,"a",62),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().delete(t)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function Te(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",55),r.ac(1,"td",56),r.Pc(2,me,2,1,"div",57),r.Zb(),r.ac(3,"td",56),r.ac(4,"div",58),r.ac(5,"button",59),r.Vb(6,"i",60),r.Zb(),r.ac(7,"div",61),r.ac(8,"a",62),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,fe,2,0,"a",63),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",64),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",64),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",64),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",64),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",64),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",64),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",64),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",64),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",64),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",64),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,a.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,a.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,a.nguyenNhan)," ")}}function Ce(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",66),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let ve=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.isActive=0,this.loading=!0,this.exporting=!1,this.totalCount=0,this.records=[],this.arrTaiSanChecked=[],this.selectedValues=[],this.tenTaiSan="",this._unsubscribe=[],this.checkTaiSan24h=this.showUndoButton}ngOnChanges(a){var t;6===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe(([a,t])=>{this.loaiTaiSanItems=this.getTreeviewItem(a),this.arrNhaCungCap=t})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){var e;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanThanhLy(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(e=this.form.value.nhaCungCap)||void 0===e?void 0:e.displayName)||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,this.totalCount=a.totalCount})}create(a){this._showCreateOrEditDemoDialog(a)}delete(a){this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe(t=>{this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(t=>{t.value&&this.clearArrChecked([a])})})}deleteArrTaiSanChecked(){this.tenTaiSan=this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)).map(a=>a.tenTaiSan).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o thanh l\xfd",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(a=>{a.value&&this.clearArrChecked(this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)))})}clearArrChecked(a){this._taiSanServiceProxy.hoanTacTaiSanThanhLy(a.map(a=>({id:a.id}))).subscribe(()=>{this.arrTaiSanChecked=[],this.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),this.getDataPage(!1)})}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(de,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}view(a){this._showCreateOrEditTaiSanDialog(a,!0)}_showCreateOrEditTaiSanDialog(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}search(a,t){const e=a.query;"nhaCungCap"===t&&this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}formCreate(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.sb),r.Ub(l.T),r.Ub(f.d))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san-thanh-ly"]],viewQuery:function(a,t){var e;1&a&&r.Vc(ge,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:48,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"card-body",3,"formGroup"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n thanh l\xfd"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return t.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o thanh l\xfd"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"div",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.Vb(25,"dft-label-validation",20),r.ac(26,"app-multiple-select-tree",21),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",18),r.ac(28,"div",19),r.Vb(29,"dft-label-validation",20),r.ac(30,"app-dropdown-treeview-select",22),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",18),r.ac(32,"div",19),r.ac(33,"label",23),r.Rc(34,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(35,"p-dropdown",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",25),r.ac(37,"div",26),r.ac(38,"button",27),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(39,"i",28),r.ac(40,"span",7),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div"),r.ac(43,"p-table",29,30),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(45,pe,34,0,"ng-template",31),r.Pc(46,Te,44,41,"ng-template",32),r.Pc(47,Ce,3,1,"ng-template",33),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",t.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",t.form),r.Ib(4),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(5),r.sc("options",t.arrNhaCungCap)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable))},directives:[C.a,f.q,f.i,v.a,S.a,Z.a,w.a,f.p,f.g,y.c,I.d,y.e,y.b,y.a,i.l,y.d],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const Se=["dt"];function Ze(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function we(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,e.models.TrangThaiTaiSanHienThiSorted[a.hinhThuc])," "),r.Ib(3),r.sc("value",a)}}function ye(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function Ie(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.arrTaiSanChecked&&a.arrTaiSanChecked.length))}}let ke=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._taiSanServiceProxy=t,this._lookupTableService=e,this._fb=i,this.bsModalRef=n,this.enums=N,this.models=Xa,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanCheckedFromParent=[],this.arrTaiSanChecked=[],this._unsubscribe=[]}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe(([a])=>{this.loaiTaiSanItems=this.getTreeviewItem(a)})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{a.items=a.items.filter(a=>!this.arrTaiSanCheckedFromParent.some(t=>t.id===a.id)),this.records=a.items,this.totalCount=a.totalCount})}formCreate(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}close(){this.bsModalRef.hide()}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.pb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-them-tai-san-huy"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Se,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(23,Ze,21,0,"ng-template",17),r.Pc(24,we,21,19,"ng-template",18),r.Pc(25,ye,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,Ie,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n hu\u1ef7"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(3),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(2),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,Z.a,S.a,y.c,I.d,i.l,y.b,y.a,y.e,y.d,O.a],pipes:[k.a],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const De=["dt"];function Re(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function Ve(a,t){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.sc("value",a),r.Ib(2),r.Tc(" ",r.nc(5,9,e+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,a.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,a.phongBanQuanLy)," ")}}function Pe(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}function Be(a,t){if(1&a){const a=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(a),r.lc().close()})),r.Zb()}if(2&a){const a=r.lc();r.sc("cancelDisabled",a.saving)("saveDisabled",!(null!=a.records&&a.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}let xe=(()=>{class a extends c.a{constructor(a,t,e,i,n,o){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.bsModalRef=o,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.createInputDto=new l.eb,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.arrTaiSanChecked=[]}ngOnInit(){this.khoiTaoForm()}create(a){this._showCreateOrEditDemoDialog(a)}khoiTaoForm(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,f.y.required],thoiGianKhaiBao:[new Date,f.y.required],noiDungKhaiBao:["",[f.y.required,f.y.maxLength(4e3),Object(G.b)()]]})}search(a,t){const e=a.query;"hinhThuc"===t&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===this.enums.TrangThaiTaiSanConst.TaiSanBaoDuong))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}deleteArrTaiSanChecked(){this.deleteCheckedItems(),this.showDeleteMessage()}deleteCheckedItems(){this.records=this.records.filter(a=>!this.arrTaiSanChecked.some(t=>t.id===a.id)),this.arrTaiSanChecked=[]}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(ke,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t,arrTaiSanCheckedFromParent:this.records}}),e.content.onSave.subscribe(()=>{this.records=[...this.records,...e.content.arrTaiSanChecked],this.totalCount=this.records.length})}save(){""===L.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanHuy(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(a=>{1===a?this.showExistMessage("L\u1ed7i"):this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}))}close(){this.bsModalRef.hide()}_getValueForSave(){const a=[];this.records.forEach(t=>{const e=new l.db;e.taiSanId=t.id,a.push(e)}),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanHuy,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.pb),r.Ub(l.T),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-create-or-edit-tai-san-huy"]],viewQuery:function(a,t){var e;1&a&&r.Vc(De,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return t.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o h\u1ee7y"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return t.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a})),r.Pc(37,Re,26,0,"ng-template",21),r.Pc(38,Ve,29,31,"ng-template",22),r.Pc(39,Pe,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,Be,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title",t.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n hu\u1ef7":"Khai b\xe1o T\xe0i s\u1ea3n h\u1ee7y"),r.Ib(5),r.sc("form",t.form)("control",t.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",t.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",t.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",t.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o h\u1ee7y *"),r.Ib(2),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("scrollable",t.scrollable),r.Ib(5),r.sc("ngIf",!t.isView))},directives:[f.z,f.q,f.i,M.a,v.a,f.b,f.x,f.k,f.p,f.g,wt.a,f.f,G.a,j.a,y.c,I.d,i.l,y.e,y.b,y.a,y.d,O.a],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const Ne=["dt"];function _e(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",35),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",35),r.ac(4,"th",36),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",37),r.Zb(),r.ac(7,"th",38),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",39),r.Zb(),r.ac(10,"th",40),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",41),r.Zb(),r.ac(13,"th",42),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",43),r.Zb(),r.ac(16,"th",44),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",45),r.Zb(),r.ac(19,"th",46),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",47),r.Zb(),r.ac(22,"th",48),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",49),r.Zb(),r.ac(25,"th",50),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",51),r.Zb(),r.ac(28,"th",52),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",53),r.Zb(),r.ac(31,"th",54),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",55),r.Zb(),r.Zb())}function Le(a,t){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",66),r.Zb()),2&a){const a=r.lc().$implicit;r.Ib(1),r.sc("value",a)}}function Me(a,t){if(1&a){const a=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(a);const t=r.lc().$implicit;return r.lc().delete(t)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function Oe(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",56),r.ac(1,"td",57),r.Pc(2,Le,2,1,"div",58),r.Zb(),r.ac(3,"td",57),r.ac(4,"div",59),r.ac(5,"button",60),r.Vb(6,"i",61),r.Zb(),r.ac(7,"div",62),r.ac(8,"a",63),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().view(e.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,Me,2,0,"a",64),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",65),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",65),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",65),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",65),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",65),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",65),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",65),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",65),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",65),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",65),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit,e=r.lc();r.Ib(2),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",e.showUndoButton(a.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,a.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,a.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,a.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,a.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,a.nguyenNhan)," ")}}function Ke(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",67),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let Ae=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.isActive=0,this.loading=!0,this.exporting=!1,this.totalCount=0,this.records=[],this.arrTaiSanChecked=[],this.selectedValues=[],this.tenTaiSan="",this._unsubscribe=[],this.checkTaiSan24h=this.showUndoButton}ngOnChanges(a){var t;7===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe(([a,t])=>{this.loaiTaiSanItems=this.getTreeviewItem(a),this.arrNhaCungCap=t})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){var e;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanHuy(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(e=this.form.value.nhaCungCap)||void 0===e?void 0:e.displayName)||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,this.totalCount=a.totalCount})}create(a){this._showCreateOrEditDemoDialog(a)}delete(a){this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe(t=>{this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(t=>{t.value&&this.clearArrChecked([a])})})}deleteArrTaiSanChecked(){this.tenTaiSan=this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)).map(a=>a.tenTaiSan).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o h\u1ee7y",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then(a=>{a.value&&this.clearArrChecked(this.arrTaiSanChecked.filter(a=>this.checkTaiSan24h(a.lastModificationTime)))})}clearArrChecked(a){this._taiSanServiceProxy.hoanTacTaiSanHuy(a.map(a=>({id:a.id}))).subscribe(()=>{this.arrTaiSanChecked=[],this.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),this.getDataPage(!1)})}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(xe,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}view(a){this._showCreateOrEditTaiSanDialog(a,!0)}_showCreateOrEditTaiSanDialog(a,t=!1){let e;e=this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}search(a,t){const e=a.query;"nhaCungCap"===t&&this._lookupTableService.getAllNhaCungCap().subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}formCreate(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.pb),r.Ub(l.T),r.Ub(f.d))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san-huy"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Ne,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:49,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[3,"formGroup"],[1,"card-body"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n h\u1ee7y"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return t.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o h\u1ee7y"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return t.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"form",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.ac(25,"div",20),r.Vb(26,"dft-label-validation",21),r.ac(27,"app-multiple-select-tree",22),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(28,"div",19),r.ac(29,"div",20),r.Vb(30,"dft-label-validation",21),r.ac(31,"app-dropdown-treeview-select",23),r.ic("valueChange",(function(a){return t.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(32,"div",19),r.ac(33,"div",20),r.ac(34,"label",24),r.Rc(35,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(36,"p-dropdown",25),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(37,"div",26),r.ac(38,"div",27),r.ac(39,"button",28),r.ic("click",(function(){return t.deleteArrTaiSanChecked()})),r.Vb(40,"i",29),r.ac(41,"span",7),r.Rc(42,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(43,"div"),r.ac(44,"p-table",30,31),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(46,_e,34,0,"ng-template",32),r.Pc(47,Oe,44,41,"ng-template",33),r.Pc(48,Ke,3,1,"ng-template",34),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",t.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",t.form),r.Ib(5),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(3),r.sc("form",t.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",t.loaiTaiSanItems),r.Ib(5),r.sc("options",t.arrNhaCungCap)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!t.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable))},directives:[C.a,f.z,f.q,f.i,v.a,S.a,Z.a,w.a,f.p,f.g,y.c,I.d,y.e,y.b,y.a,i.l,y.d],pipes:[k.a,i.d,i.e],styles:[""],data:{animation:[Object(d.b)()]}}),a})();const Fe=["dt"];function Ee(a,t){1&a&&(r.ac(0,"tr"),r.ac(1,"th",19),r.Rc(2,"STT"),r.Zb(),r.ac(3,"th",20),r.Rc(4,"T\xean t\xe0i s\u1ea3n "),r.Vb(5,"p-sortIcon",21),r.Zb(),r.ac(6,"th",22),r.Rc(7,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(8,"p-sortIcon",23),r.Zb(),r.ac(9,"th",24),r.Rc(10,"Serial Number "),r.Vb(11,"p-sortIcon",25),r.Zb(),r.ac(12,"th",26),r.Rc(13,"Nh\xe0 cung c\u1ea5p "),r.Vb(14,"p-sortIcon",27),r.Zb(),r.ac(15,"th",28),r.Rc(16,"Ng\xe0y mua "),r.Vb(17,"p-sortIcon",29),r.Zb(),r.ac(18,"th",30),r.Rc(19,"Nguy\xean gi\xe1 "),r.Vb(20,"p-sortIcon",31),r.Zb(),r.ac(21,"th",32),r.Rc(22,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(23,"p-sortIcon",33),r.Zb(),r.Zb())}function He(a,t){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",19),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"date"),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",35),r.Rc(21),r.mc(22,"number"),r.mc(23,"truncate"),r.Zb(),r.ac(24,"td",35),r.Rc(25),r.mc(26,"truncate"),r.Zb(),r.Zb()),2&a){const a=t.$implicit,e=t.rowIndex;r.Ib(2),r.Tc(" ",r.nc(3,8,e+1)," "),r.Ib(3),r.Tc(" ",r.nc(6,10,a.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,12,a.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(12,14,a.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(15,16,a.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(18,18,r.nc(19,21,a.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(22,23,r.nc(23,26,a.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(26,28,a.phongBanQuanLy)," ")}}function Ue(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",36),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let Ge=(()=>{class a extends c.a{constructor(a,t,e,i){super(a),this._khaiBaoHongMatServiceProxy=t,this._fb=e,this.bsModalRef=i,this.onSave=new r.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[]}ngOnInit(){this.khoiTaoForm()}ngAfterViewInit(){this.getDataPage()}khoiTaoForm(){this.form=this._fb.group({nguoiKhaiBao:[""],ngayKhaiBao:[""],noiDungKhaiBao:[""]})}close(){this.bsModalRef.hide()}getDataPage(a){this.loading=!0,this._khaiBaoHongMatServiceProxy.getAllKhaiBaoHongMatChiTiet(this.id,this.getSortField(this.table),a?a.first:this.table.first,a?a.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.form.get("nguoiKhaiBao").setValue(a.items[0].nguoiKhaiBao),this.form.get("ngayKhaiBao").setValue(a.items[0].ngayKhaiBao.toDate()),this.form.get("noiDungKhaiBao").setValue(a.items[0].noiDungKhaiBao),this.records=a.items,this.totalCount=a.totalCount})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(l.M),r.Ub(f.d),r.Ub(h.a))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-xem-chi-tiet-tai-san-hong-mat"]],viewQuery:function(a,t){var e;1&a&&r.Vc(Fe,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:27,vars:23,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","ngayKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["disabled","","formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[3,"title"],[3,"value","scrollable","scrollHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[1,"width-150"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"form",0),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return t.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.Vb(20,"dft-label-validation",13),r.ac(21,"div"),r.ac(22,"p-table",14,15),r.Pc(24,Ee,24,0,"ng-template",16),r.Pc(25,He,27,30,"ng-template",17),r.Pc(26,Ue,3,1,"ng-template",18),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",t.form),r.Ib(1),r.sc("title","Xem chi ti\u1ebft khai b\xe1o"),r.Ib(5),r.sc("form",t.form)("control",t.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",t.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",t.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",t.form.get("ngayKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",t.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),r.Ib(1),r.sc("control",t.form.get("ngayKhaiBao")),r.Ib(4),r.sc("control",t.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o"),r.Ib(2),r.sc("control",t.form.get("noiDungKhaiBao")),r.Ib(1),r.sc("title","Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o m\u1ea5t"),r.Ib(2),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("scrollable",t.scrollable))},directives:[f.z,f.q,f.i,M.a,v.a,f.b,f.x,f.k,f.p,f.g,wt.a,f.f,G.a,j.a,y.c,I.d,y.b,y.a],pipes:[k.a,i.d,i.e],styles:[""]}),a})();const je=["dt"];function qe(a,t){1&a&&(r.ac(0,"tr"),r.Vb(1,"th",25),r.ac(2,"th",26),r.Rc(3,"\u0110\u01a1n v\u1ecb khai b\xe1o "),r.Vb(4,"p-sortIcon",27),r.Zb(),r.ac(5,"th",28),r.Rc(6,"Ng\u01b0\u1eddi khai b\xe1o "),r.Vb(7,"p-sortIcon",29),r.Zb(),r.ac(8,"th",30),r.Rc(9,"Ng\xe0y khai b\xe1o "),r.Vb(10,"p-sortIcon",31),r.Zb(),r.ac(11,"th",32),r.Rc(12,"N\u1ed9i dung khai b\xe1o "),r.Vb(13,"p-sortIcon",33),r.Zb(),r.ac(14,"th",34),r.Rc(15,"Khai b\xe1o "),r.Vb(16,"p-sortIcon",35),r.Zb(),r.Zb())}function ze(a,t){if(1&a){const a=r.bc();r.ac(0,"tr",36),r.ac(1,"td",25),r.ac(2,"div",37),r.ac(3,"button",38),r.Vb(4,"i",39),r.Zb(),r.ac(5,"div",40),r.ac(6,"a",41),r.ic("click",(function(){r.Ic(a);const e=t.$implicit;return r.lc().watch(e.id)})),r.Rc(7,"Xem"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(8,"td",42),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",42),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",42),r.Rc(15),r.mc(16,"date"),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",42),r.Rc(19),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",42),r.Rc(22),r.mc(23,"truncate"),r.Zb(),r.Zb()}if(2&a){const a=t.$implicit,e=r.lc();r.Ib(9),r.Tc(" ",r.nc(10,5,a.phongBanKhaiBao)," "),r.Ib(3),r.Tc(" ",r.nc(13,7,a.nguoiKhaiBao)," "),r.Ib(3),r.Tc(" ",r.oc(16,9,r.nc(17,12,a.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(20,14,a.noiDungKhaiBao)," "),r.Ib(3),r.Tc(" ",r.nc(23,16,e.models.TinhTrangSuDungTaiSanSorted[a.khaiBao])," ")}}function Qe(a,t){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",43),r.Rc(2),r.Zb(),r.Zb()),2&a){const a=r.lc();r.Ib(2),r.Sc(a.khongCoDuLieu)}}let $e=(()=>{class a extends c.a{constructor(a,t,e,i,n){super(a),this._modalService=t,this._taiSanServiceProxy=e,this._lookupTableService=i,this._fb=n,this.isActive=0,this.loading=!0,this.exporting=!1,this.totalCount=0,this.records=[],this.arrTaiSanChecked=[],this.selectedValues=[],this.arrKhaiBao=[],this.tenTaiSan="",this._unsubscribe=[]}ngOnChanges(a){var t;8===(null===(t=a.isActive)||void 0===t?void 0:t.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}ngOnInit(){this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(a=>{this.toChucItems={data:a,selectedData:a.map(a=>a.id)},this.toChucValue=a.map(a=>a.id),this.getDataPage(!1)})}bindingData(){Object(_.a)(this._lookupTableService.getAllTrangThaiTaiSan()).subscribe(([a])=>{this.arrKhaiBao=a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanHong||a.id===this.enums.TrangThaiTaiSanConst.TaiSanMat)})}ngOnDestroy(){this._unsubscribe.forEach(a=>a.unsubscribe())}getDataPage(a,t){this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllKhaiBaoHongMat(this.form.value.timKiemKhaiBao||void 0,this.toChucValue||void 0,this.form.value.khaiBao.id||void 0,a,this.getSortField(this.table),t?t.first:this.table.first,t?t.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(a=>{this.records=a.items,this.totalCount=a.totalCount})}watch(a){this._showCreateOrEditDemoDialog(a)}_showCreateOrEditDemoDialog(a,t=!1){let e;e=this._modalService.show(Ge,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}),e.content.onSave.subscribe(()=>{this.getDataPage(!1)})}search(a,t){const e=a.query;"khaiBao"===t&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object($a.a)(a=>a.filter(a=>a.id===this.enums.TrangThaiTaiSanConst.TaiSanHong||a.id===this.enums.TrangThaiTaiSanConst.TaiSanMat))).subscribe(a=>{this.suggestionsSingle=this.filter(e,a)})}filter(a,t){const e=[];for(const i of t)0===i.displayName.toLowerCase().indexOf(a.toLowerCase())&&e.push(i);return e}formCreate(){this.form=this._fb.group({timKiemKhaiBao:[""],phongBanKhaiBao:[""],khaiBao:[""]})}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u),r.Ub(h.b),r.Ub(l.M),r.Ub(l.T),r.Ub(f.d))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-khai-bao-hong-mat-tai-san"]],viewQuery:function(a,t){var e;1&a&&r.Vc(je,!0),2&a&&r.Ec(e=r.jc())&&(t.table=e.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:33,vars:22,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"form-horizontal",3,"formGroup"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","khaiBao","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","phongBanKhaiBao",1,"width-150"],["field","phongBanKhaiBao"],["pSortableColumn","nguoiKhaiBao",1,"width-150"],["field","nguoiKhaiBao"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","noiDungKhaiBao",1,"width-150"],["field","noiDungKhaiBao"],["pSortableColumn","khaiBao",1,"width-150"],["field","khaiBao"],[1,"ui-selectable-row"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"width-150"],["colspan","8",1,"text-left"]],template:function(a,t){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd Khai b\xe1o h\u1ecfng/m\u1ea5t t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(7,"section",4),r.ac(8,"div",1),r.ac(9,"div",5),r.ac(10,"div",6),r.ac(11,"div",7),r.ac(12,"div",8),r.ac(13,"button",9),r.ic("click",(function(){return t.getDataPage(!0)})),r.Vb(14,"i",10),r.Zb(),r.Zb(),r.ac(15,"input",11),r.ic("change",(function(a){return t.form.get("timKiemKhaiBao").setValue(a.target.value)}))("keyup.enter",(function(){return t.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(16,"form",12),r.ac(17,"div",13),r.ac(18,"div",14),r.ac(19,"div",15),r.Vb(20,"dft-label-validation",16),r.ac(21,"app-multiple-select-tree",17),r.ic("onSelect",(function(a){return t.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",14),r.ac(23,"div",15),r.ac(24,"label",18),r.Rc(25,"Khai b\xe1o"),r.Zb(),r.Vb(26,"p-dropdown",19),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div"),r.ac(28,"p-table",20,21),r.ic("selectionChange",(function(a){return t.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return t.getDataPage(!1,a)})),r.Pc(30,qe,17,0,"ng-template",22),r.Pc(31,ze,24,18,"ng-template",23),r.Pc(32,Qe,3,1,"ng-template",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(15),r.sc("placeholder","Nh\u1eadp ng\u01b0\u1eddi khai b\xe1o, ng\xe0y khai b\xe1o, n\u1ed9i dung khai b\xe1o"),r.Ib(1),r.sc("formGroup",t.form),r.Ib(4),r.sc("form",t.form)("title","\u0110\u01a1n v\u1ecb khai b\xe1o"),r.Ib(1),r.sc("dataEdit",t.toChucItems),r.Ib(5),r.sc("options",t.arrKhaiBao)("placeholder",t.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(2),r.uc("currentPageReportTemplate","",0==t.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",t.scrollHeight),r.sc("value",t.records)("selection",t.arrTaiSanChecked)("lazy",!0)("paginator",t.paginator)("loading",t.loading)("showCurrentPageReport",t.showCurrentPageReport)("rows",t.paginatorRows)("totalRecords",t.totalCount)("rowsPerPageOptions",t.rowsPerPageOptions)("scrollable",t.scrollable))},directives:[f.z,f.q,f.i,v.a,S.a,w.a,f.p,f.g,y.c,I.d,y.b,y.a],pipes:[k.a,i.d],styles:[""],data:{animation:[Object(d.b)()]}}),a})();function Xe(a,t){if(1&a){const a=r.bc();r.ac(0,"p-tabView",1),r.ic("onChange",(function(t){return r.Ic(a),r.lc().onTabChange(t)})),r.ac(1,"p-tabPanel",2),r.Vb(2,"app-toan-bo-tai-san",3),r.Zb(),r.ac(3,"p-tabPanel",4),r.Vb(4,"app-tai-san-chua-su-dung",3),r.Zb(),r.ac(5,"p-tabPanel",5),r.Vb(6,"app-tai-san-dang-su-dung",3),r.Zb(),r.ac(7,"p-tabPanel",6),r.Vb(8,"app-tai-san-sua-chua-bao-duong",3),r.Zb(),r.ac(9,"p-tabPanel",7),r.Vb(10,"app-tai-san-mat",3),r.Zb(),r.ac(11,"p-tabPanel",8),r.Vb(12,"app-tai-san-hong",3),r.Zb(),r.ac(13,"p-tabPanel",9),r.Vb(14,"app-tai-san-thanh-ly",3),r.Zb(),r.ac(15,"p-tabPanel",10),r.Vb(16,"app-tai-san-huy",3),r.Zb(),r.ac(17,"p-tabPanel",11),r.Vb(18,"app-khai-bao-hong-mat-tai-san",3),r.Zb(),r.Zb()}if(2&a){const a=r.lc();r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==0),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==1),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==2),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==3),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==4),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==5),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==6),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==7),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",a.appSession.taiSanTabIndexActive-0==8),r.Ib(1),r.sc("isActive",a.appSession.taiSanTabIndexActive-0)}}const Je=[{path:"",component:(()=>{class a extends c.a{constructor(a){super(a)}ngOnInit(){}onTabChange(a){abp.utils.setCookieValue("taiSanTabIndexActive",a.index,new Date(this.today.setDate(this.today.getDate()+1)),abp.appPath)}}return a.\u0275fac=function(t){return new(t||a)(r.Ub(r.u))},a.\u0275cmp=r.Ob({type:a,selectors:[["app-tai-san"]],features:[r.Fb],decls:1,vars:1,consts:[[3,"onChange",4,"ngIf"],[3,"onChange"],["header","To\xe0n b\u1ed9 t\xe0i s\u1ea3n",3,"selected"],[3,"isActive"],["header","T\xe0i s\u1ea3n ch\u01b0a s\u1eed d\u1ee5ng",3,"selected"],["header","T\xe0i s\u1ea3n \u0111ang s\u1eed d\u1ee5ng",3,"selected"],["header","T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/b\u1ea3o d\u01b0\u1ee1ng",3,"selected"],["header","T\xe0i s\u1ea3n m\u1ea5t",3,"selected"],["header","T\xe0i s\u1ea3n h\u1ecfng",3,"selected"],["header","T\xe0i s\u1ea3n thanh l\xfd",3,"selected"],["header","T\xe0i s\u1ea3n h\u1ee7y",3,"selected"],["header","B\xe1o h\u1ecfng/m\u1ea5t t\xe0i s\u1ea3n",3,"selected"]],template:function(a,t){1&a&&r.Pc(0,Xe,19,18,"p-tabView",0),2&a&&r.sc("ngIf",t.isGranted("Pages.QuanLyTaiSan"))},directives:[i.l,s.b,s.a,x,Ka,Qa,mt,Mt,te,ve,Ae,$e],styles:[""]}),a})(),canActivate:[o.a]},{path:"du-tru-mua-sam",loadChildren:()=>Promise.all([e.e(0),e.e(25)]).then(e.bind(null,"Menm")).then(a=>a.DuTruMuaSamModule)}];let Ye=(()=>{class a{}return a.\u0275mod=r.Sb({type:a}),a.\u0275inj=r.Rb({factory:function(t){return new(t||a)},imports:[[n.g.forChild(Je)],n.g]}),a})();var We=e("KZX/"),ai=e("ZAI4");let ti=(()=>{class a{}return a.\u0275mod=r.Sb({type:a}),a.\u0275inj=r.Rb({factory:function(t){return new(t||a)},imports:[[i.b,We.a,Ye,ai.AppModule]]}),a})()}}]);