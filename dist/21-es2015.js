(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{tRAU:function(t,e,i){"use strict";i.r(e),i.d(e,"KiemKeTaiSanModule",(function(){return vt}));var a=i("KZX/"),c=i("ofXK"),n=i("tyNb"),o=i("FCZ4"),s=i("wzdi"),r=(i("nS6G"),i("N7wC")),l=i("fXoL");let d=(()=>{class t{transform(t){switch(t){case"\u0110\xe3 k\u1ebft th\xfac":return 2;case"\u0110ang ki\u1ec3m k\xea":return 1;case"Ch\u01b0a b\u1eaft \u0111\u1ea7u":return 0}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=l.Tb({name:"statusstr",type:t,pure:!0}),t})();var h=i("KALY"),b=i("K3ix"),u=i("nYR2"),m=i("3Pt+");let g=(()=>{class t{transform(t){switch(t){case 0:return"Ch\u01b0a b\u1eaft \u0111\u1ea7u";case 1:return"\u0110ang ki\u1ec3m k\xea";case 2:return"\u0110\xe3 k\u1ebft th\xfac"}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=l.Tb({name:"statusnum",type:t,pure:!0}),t})();var p=i("CR43"),f=i("kKUO"),T=i("rEr+"),v=i("7zfz"),I=i("0EPa"),k=i("oStN");const w=["dt"];function Z(t,e){1&t&&(l.ac(0,"tr"),l.ac(1,"th",20),l.Vb(2,"p-tableHeaderCheckbox"),l.Zb(),l.ac(3,"th",21),l.Rc(4,"STT"),l.Zb(),l.ac(5,"th",21),l.Rc(6,"T\xean \u0111\u0103ng nh\u1eadp"),l.Zb(),l.ac(7,"th",21),l.Rc(8,"H\u1ecd t\xean"),l.Zb(),l.ac(9,"th",21),l.Rc(10,"\u0110\u1ecba ch\u1ec9 email"),l.Zb(),l.ac(11,"th",21),l.Rc(12,"\u0110\u01a1n v\u1ecb"),l.Zb(),l.ac(13,"th",21),l.Rc(14,"Ch\u1ee9c v\u1ee5"),l.Zb(),l.Zb())}function S(t,e){if(1&t&&(l.ac(0,"tr",22),l.ac(1,"td",20),l.Vb(2,"p-tableCheckbox",23),l.Zb(),l.ac(3,"td",21),l.Rc(4),l.Zb(),l.ac(5,"td",21),l.Rc(6),l.mc(7,"truncate"),l.Zb(),l.ac(8,"td",21),l.Rc(9),l.mc(10,"truncate"),l.Zb(),l.ac(11,"td",21),l.Rc(12),l.mc(13,"truncate"),l.Zb(),l.ac(14,"td",21),l.Rc(15),l.mc(16,"truncate"),l.Zb(),l.ac(17,"td",21),l.Rc(18),l.Zb(),l.Zb()),2&t){const t=e.$implicit,i=e.rowIndex;l.Ib(2),l.sc("value",t),l.Ib(2),l.Tc(" ",i+1," "),l.Ib(2),l.Tc(" ",l.nc(7,7,t.user.userName)," "),l.Ib(3),l.Tc(" ",l.nc(10,9,t.user.name)," "),l.Ib(3),l.Tc(" ",l.nc(13,11,t.user.emailAddress)," "),l.Ib(3),l.Tc(" ",l.nc(16,13,t.tenToChuc)," "),l.Ib(3),l.Tc(" ",t.user.chucVu," ")}}function K(t,e){if(1&t&&(l.ac(0,"tr"),l.ac(1,"td",24),l.Rc(2),l.Zb(),l.Zb()),2&t){const t=l.lc();l.Ib(2),l.Tc(" ",t.khongCoDuLieu," ")}}function R(t,e){if(1&t){const t=l.bc();l.ac(0,"abp-modal-footer",25),l.ic("onCancelClick",(function(){return l.Ic(t),l.lc().close()})),l.Zb()}if(2&t){const t=l.lc();l.sc("cancelDisabled",t.saving)("saveDisabled",t.isSelected())}}let y=(()=>{class t extends s.a{constructor(t,e,i,a,c){super(t),this._fb=e,this.formBuilder=i,this.bsModalRef=a,this._lookupTableService=c,this.saving=!1,this.isEdit=!1,this.isView=!1,this.totalCount=0,this.createInputDto=new h.N,this.records=[],this.advancedFiltersVisible=!1,this.loading=!0,this.userSave=[],this.event=new l.q,this.form=i.group({keyword:""})}ngOnInit(){this._lookupTableService.getAllToChucTree().subscribe(t=>{this.toChucItems=this.getTreeviewItem(t)})}get keyword(){return this.form.get("keyword").value}getDataPage(t){this.loading=!0,this._lookupTableService.getAllNguoiDung(this.keyword,this.toChucValue).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.records=t.filter(t=>!JSON.stringify(this.userSave).includes(JSON.stringify(t)))})}isSelected(){return!this.selectedRows||0===this.selectedRows.length}triggerEvent(t){this.event.emit(t)}save(){this.selectedRows&&this.bsModalRef.hide(),this.triggerEvent(this.selectedRows),this.selectedRows||this.showErrorMessage("Ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi ki\u1ec3m k\xea")}close(){this.bsModalRef.hide()}}return t.\u0275fac=function(e){return new(e||t)(l.Ub(l.u),l.Ub(m.d),l.Ub(m.d),l.Ub(b.a),l.Ub(h.T))},t.\u0275cmp=l.Ob({type:t,selectors:[["app-them-nguoi-kiem-ke-tai-san"]],viewQuery:function(t,e){var i;1&t&&l.Vc(w,!0),2&t&&l.Ec(i=l.jc())&&(e.table=i.first)},features:[l.Fb],decls:22,vars:11,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","formControlName","keyword","name","keyword",1,"form-control",3,"placeholder"],[1,"ui-fluid","row",2,"padding-top","10px"],[1,"col-sm-6","col-md-6"],[1,"form-group"],["for","PhongBan","id","PhongBan"],[3,"items","valueChange"],["scrollHeight","450px",3,"value","lazy","loading","selection","rows","scrollable","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],[1,"width-30"],[1,"width-150"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(t,e){1&t&&(l.ac(0,"form",0),l.ic("ngSubmit",(function(){return e.save()})),l.ac(1,"abp-modal-header",1),l.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),l.Zb(),l.ac(2,"div",2),l.ac(3,"div",3),l.ac(4,"div",4),l.ac(5,"div",5),l.ac(6,"button",6),l.ic("click",(function(){return e.getDataPage()})),l.Vb(7,"i",7),l.Zb(),l.Zb(),l.Vb(8,"input",8),l.Zb(),l.ac(9,"div",9),l.ac(10,"div",10),l.ac(11,"div",11),l.ac(12,"label",12),l.Rc(13,"\u0110\u01a1n v\u1ecb"),l.Zb(),l.ac(14,"app-dropdown-treeview-select",13),l.ic("valueChange",(function(t){return e.toChucValue=t})),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.ac(15,"div"),l.ac(16,"p-table",14,15),l.ic("onLazyLoad",(function(t){return e.getDataPage(t)}))("selectionChange",(function(t){return e.selectedRows=t})),l.Pc(18,Z,15,0,"ng-template",16),l.Pc(19,S,19,15,"ng-template",17),l.Pc(20,K,3,1,"ng-template",18),l.Zb(),l.Zb(),l.Zb(),l.Pc(21,R,1,2,"abp-modal-footer",19),l.Zb()),2&t&&(l.sc("formGroup",e.form),l.Ib(1),l.sc("title","Ch\u1ecdn danh s\xe1ch ng\u01b0\u1eddi tham gia ki\u1ec3m k\xea"),l.Ib(7),l.sc("placeholder","Nh\u1eadp t\xean \u0111\u0103ng nh\u1eadp, h\u1ecd t\xean, \u0111\u1ecba ch\u1ec9 email, ch\u1ee9c v\u1ee5 ng\u01b0\u1eddi d\xf9ng"),l.Ib(6),l.sc("items",e.toChucItems),l.Ib(2),l.sc("value",e.records)("lazy",!0)("loading",e.loading)("selection",e.selectedRows)("rows",e.paginatorRows)("scrollable",e.scrollable),l.Ib(5),l.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,p.a,m.b,m.p,m.g,f.a,T.c,v.d,c.l,T.e,T.d,I.a],pipes:[k.a],styles:[""],data:{animation:[Object(o.b)()]}}),t})();var C=i("j9gp"),D=i("7kUa"),V=i("Di65"),P=i("eO1q"),x=i("dPl2"),F=i("JeUU");const B=["dt"];function E(t,e){1&t&&(l.ac(0,"tr"),l.ac(1,"th",15),l.Rc(2," STT "),l.Zb(),l.ac(3,"th",16),l.Rc(4," M\xe3 t\xe0i s\u1ea3n "),l.Vb(5,"p-sortIcon",17),l.Zb(),l.ac(6,"th",18),l.Rc(7," T\xean t\xe0i s\u1ea3n "),l.Vb(8,"p-sortIcon",19),l.Zb(),l.ac(9,"th",20),l.Rc(10," Lo\u1ea1i t\xe0i s\u1ea3n "),l.Vb(11,"p-sortIcon",21),l.Zb(),l.ac(12,"th",22),l.Rc(13," V\u1ecb tr\xed "),l.Vb(14,"p-sortIcon",23),l.Zb(),l.ac(15,"th",24),l.Rc(16," Tr\u1ea1ng th\xe1i t\xe0i s\u1ea3n "),l.Vb(17,"p-sortIcon",25),l.Zb(),l.Zb())}function N(t,e){if(1&t&&(l.ac(0,"tr",26),l.ac(1,"td",15),l.Rc(2),l.Zb(),l.ac(3,"td",27),l.Rc(4),l.Zb(),l.ac(5,"td",27),l.Rc(6),l.Zb(),l.ac(7,"td",27),l.Rc(8),l.Zb(),l.ac(9,"td",28),l.Rc(10),l.Zb(),l.ac(11,"td",27),l.Rc(12),l.Zb(),l.Zb()),2&t){const t=e.$implicit,i=e.rowIndex;l.Ib(2),l.Tc(" ",i+1," "),l.Ib(2),l.Tc(" ",t.maTaiSan," "),l.Ib(2),l.Tc(" ",t.tenTaiSan," "),l.Ib(2),l.Tc(" ",t.loaiTaiSan," "),l.Ib(2),l.Tc(" ",t.viTri," "),l.Ib(2),l.Tc(" ",t.trangThai," ")}}function M(t,e){if(1&t&&(l.ac(0,"tr"),l.ac(1,"td",29),l.Rc(2),l.Zb(),l.Zb()),2&t){const t=l.lc(2);l.Ib(2),l.Tc(" ",t.khongCoDuLieu," ")}}function L(t,e){if(1&t){const t=l.bc();l.ac(0,"div",3),l.ac(1,"div",4),l.ac(2,"div",5),l.ac(3,"div",6),l.ac(4,"button",7),l.ic("click",(function(){return l.Ic(t),l.lc().getDataPage(!0)})),l.Vb(5,"i",8),l.Zb(),l.Zb(),l.ac(6,"input",9),l.ic("ngModelChange",(function(e){return l.Ic(t),l.lc().keyword=e}))("keyup.enter",(function(){return l.Ic(t),l.lc().getDataPage(!0)})),l.Zb(),l.Zb(),l.Zb(),l.ac(7,"div"),l.ac(8,"p-table",10,11),l.ic("onLazyLoad",(function(e){return l.Ic(t),l.lc().getDataPage(!1,e)})),l.Pc(10,E,18,0,"ng-template",12),l.Pc(11,N,13,6,"ng-template",13),l.Pc(12,M,3,1,"ng-template",14),l.Zb(),l.Zb(),l.Zb()}if(2&t){const t=l.lc();l.Ib(6),l.sc("placeholder","T\xecm theo m\xe3, t\xean t\xe0i s\u1ea3n, lo\u1ea1i t\xe0i s\u1ea3n, v\u1ecb tr\xed v\xe0 tr\u1ea1ng th\xe1i c\u1ee7a t\xe0i s\u1ea3n.")("ngModel",t.keyword),l.Ib(2),l.tc("scrollHeight",t.scrollHeight),l.sc("value",t.foundRecords)("lazy",!0)("loading",t.loading)("rows",t.paginatorRows)("scrollable",t.scrollable)}}function _(t,e){if(1&t){const t=l.bc();l.ac(0,"div",33),l.ac(1,"button",34),l.ic("click",(function(){return l.Ic(t),l.lc(2).founded()})),l.Vb(2,"i",35),l.Rc(3," \u0110\xe3 t\xecm th\u1ea5y "),l.Zb(),l.Zb()}if(2&t){const t=l.lc(2);l.Ib(1),l.sc("disabled",t.isFounded())}}function O(t,e){1&t&&(l.ac(0,"tr"),l.Vb(1,"th",36),l.ac(2,"th",15),l.Rc(3," STT "),l.Zb(),l.ac(4,"th",16),l.Rc(5," M\xe3 t\xe0i s\u1ea3n "),l.Vb(6,"p-sortIcon",17),l.Zb(),l.ac(7,"th",18),l.Rc(8," T\xean t\xe0i s\u1ea3n "),l.Vb(9,"p-sortIcon",19),l.Zb(),l.ac(10,"th",20),l.Rc(11," Lo\u1ea1i t\xe0i s\u1ea3n "),l.Vb(12,"p-sortIcon",21),l.Zb(),l.ac(13,"th",22),l.Rc(14," V\u1ecb tr\xed "),l.Vb(15,"p-sortIcon",23),l.Zb(),l.ac(16,"th",24),l.Rc(17," Tr\u1ea1ng th\xe1i t\xe0i s\u1ea3n "),l.Vb(18,"p-sortIcon",25),l.Zb(),l.Zb())}function U(t,e){if(1&t&&l.Vb(0,"p-tableCheckbox",38),2&t){const t=l.lc().$implicit;l.sc("value",t)}}function z(t,e){if(1&t&&(l.ac(0,"tr",26),l.ac(1,"td",36),l.Pc(2,U,1,1,"p-tableCheckbox",37),l.Zb(),l.ac(3,"td",15),l.Rc(4),l.Zb(),l.ac(5,"td",27),l.Rc(6),l.Zb(),l.ac(7,"td",27),l.Rc(8),l.Zb(),l.ac(9,"td",27),l.Rc(10),l.Zb(),l.ac(11,"td",28),l.Rc(12),l.Zb(),l.ac(13,"td",27),l.Rc(14),l.Zb(),l.Zb()),2&t){const t=e.$implicit,i=e.rowIndex,a=l.lc(2);l.Ib(2),l.sc("ngIf",!a.isDisable),l.Ib(2),l.Tc(" ",i+1," "),l.Ib(2),l.Tc(" ",t.maTaiSan," "),l.Ib(2),l.Tc(" ",t.tenTaiSan," "),l.Ib(2),l.Tc(" ",t.loaiTaiSan," "),l.Ib(2),l.Tc(" ",t.viTri," "),l.Ib(2),l.Tc(" ",t.trangThai," ")}}function H(t,e){if(1&t&&(l.ac(0,"tr"),l.ac(1,"td",39),l.Rc(2),l.Zb(),l.Zb()),2&t){const t=l.lc(2);l.Ib(2),l.Tc(" ",t.khongCoDuLieu," ")}}function A(t,e){if(1&t){const t=l.bc();l.ac(0,"div",30),l.ac(1,"div",4),l.ac(2,"div",5),l.ac(3,"div",6),l.ac(4,"button",7),l.ic("click",(function(){return l.Ic(t),l.lc().getDataPage(!0)})),l.Vb(5,"i",8),l.Zb(),l.Zb(),l.ac(6,"input",9),l.ic("ngModelChange",(function(e){return l.Ic(t),l.lc().keyword=e}))("keyup.enter",(function(){return l.Ic(t),l.lc().getDataPage(!0)})),l.Zb(),l.Zb(),l.Zb(),l.Pc(7,_,4,1,"div",31),l.ac(8,"div"),l.ac(9,"p-table",32,11),l.ic("onLazyLoad",(function(e){return l.Ic(t),l.lc().getDataPage(!1,e)}))("selectionChange",(function(e){return l.Ic(t),l.lc().selectedRows=e})),l.Pc(11,O,19,0,"ng-template",12),l.Pc(12,z,15,7,"ng-template",13),l.Pc(13,H,3,1,"ng-template",14),l.Zb(),l.Zb(),l.Zb()}if(2&t){const t=l.lc();l.Ib(6),l.sc("placeholder","T\xecm theo m\xe3, t\xean t\xe0i s\u1ea3n, lo\u1ea1i t\xe0i s\u1ea3n, v\u1ecb tr\xed v\xe0 tr\u1ea1ng th\xe1i c\u1ee7a t\xe0i s\u1ea3n.")("ngModel",t.keyword),l.Ib(1),l.sc("ngIf",!t.isDisable),l.Ib(2),l.tc("scrollHeight",t.scrollHeight),l.sc("value",t.notFoundRecords)("lazy",!0)("loading",t.loading)("rows",t.paginatorRows)("selection",t.selectedRows)("scrollable",t.scrollable)}}function j(t,e){1&t&&(l.ac(0,"tr"),l.ac(1,"th",15),l.Rc(2," STT "),l.Zb(),l.ac(3,"th",41),l.Rc(4," M\xe3 t\xe0i s\u1ea3n "),l.Vb(5,"p-sortIcon",17),l.Zb(),l.ac(6,"th",42),l.Rc(7," V\u1ecb tr\xed "),l.Vb(8,"p-sortIcon",23),l.Zb(),l.ac(9,"th",43),l.Rc(10," T\xecnh tr\u1ea1ng "),l.Vb(11,"p-sortIcon",44),l.Zb(),l.Vb(12,"th",15),l.Zb())}function G(t,e){if(1&t){const t=l.bc();l.ac(0,"button",48),l.ic("click",(function(){l.Ic(t);const e=l.lc(2).$implicit;return l.lc(2).addTaiSanLa(e.id)})),l.Vb(1,"i",49),l.Zb()}}function q(t,e){if(1&t&&(l.ac(0,"td",15),l.Pc(1,G,2,0,"button",47),l.Zb()),2&t){const t=l.lc().$implicit;l.Ib(1),l.sc("ngIf","\u0110\xe3 th\xeam v\xe0o danh s\xe1ch"!==t.tinhTrang)}}function $(t,e){if(1&t&&(l.ac(0,"tr",26),l.ac(1,"td",15),l.Rc(2),l.Zb(),l.ac(3,"td",45),l.Rc(4),l.Zb(),l.ac(5,"td",27),l.Rc(6),l.Zb(),l.ac(7,"td",27),l.Rc(8),l.Zb(),l.Pc(9,q,2,1,"td",46),l.Zb()),2&t){const t=e.$implicit,i=e.rowIndex,a=l.lc(2);l.Ib(2),l.Tc(" ",i+1," "),l.Ib(2),l.Tc(" ",t.maTaiSan," "),l.Ib(2),l.Tc(" ",t.viTri," "),l.Ib(2),l.Tc(" ",t.tinhTrang," "),l.Ib(1),l.sc("ngIf",!a.isDisable)}}function X(t,e){if(1&t&&(l.ac(0,"tr"),l.ac(1,"td",29),l.Rc(2),l.Zb(),l.Zb()),2&t){const t=l.lc(2);l.Ib(2),l.Tc(" ",t.khongCoDuLieu," ")}}function J(t,e){if(1&t){const t=l.bc();l.ac(0,"div",40),l.ac(1,"div",4),l.ac(2,"div",5),l.ac(3,"div",6),l.ac(4,"button",7),l.ic("click",(function(){return l.Ic(t),l.lc().getDataPage(!0)})),l.Vb(5,"i",8),l.Zb(),l.Zb(),l.ac(6,"input",9),l.ic("ngModelChange",(function(e){return l.Ic(t),l.lc().keyword=e}))("keyup.enter",(function(){return l.Ic(t),l.lc().getDataPage(!0)})),l.Zb(),l.Zb(),l.Zb(),l.ac(7,"div"),l.ac(8,"p-table",10,11),l.ic("onLazyLoad",(function(e){return l.Ic(t),l.lc().getDataPage(!1,e)})),l.Pc(10,j,13,0,"ng-template",12),l.Pc(11,$,10,5,"ng-template",13),l.Pc(12,X,3,1,"ng-template",14),l.Zb(),l.Zb(),l.Zb()}if(2&t){const t=l.lc();l.Ib(6),l.sc("placeholder","T\xecm theo m\xe3 t\xe0i s\u1ea3n, lo\u1ea1i t\xe0i s\u1ea3n, v\u1ecb tr\xed v\xe0 t\xecnh tr\u1ea1ng c\u1ee7a t\xe0i s\u1ea3n.")("ngModel",t.keyword),l.Ib(2),l.tc("scrollHeight",t.scrollHeight),l.sc("value",t.unknownRecords)("lazy",!0)("loading",t.loading)("rows",t.paginatorRows)("scrollable",t.scrollable)}}let Q=(()=>{class t extends s.a{constructor(t,e,i){super(t),this._kiemKeTaiSanServiceProxy=e,this._modalService=i,this.status="",this.isFound=!1,this.isNotFound=!1,this.isNotInList=!1,this.loading=!0,this.keyword="",this.updateInputDto=[],this.foundRecords=[],this.notFoundRecords=[],this.unknownRecords=[]}ngOnInit(){switch(console.log(this.status),this.status){case"0":this.isFound=!0,this._kiemKeTaiSanServiceProxy.getAllTaiSan(this.id,0,this.keyword||void 0,this.getSortField(this.table),!1).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.foundRecords=t,console.log(this.status)});break;case"1":this.isNotFound=!0,this._kiemKeTaiSanServiceProxy.getAllTaiSan(this.id,1,this.keyword||void 0,this.getSortField(this.table),!1).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.notFoundRecords=t,console.log(this.status)});break;case"2":this.isNotInList=!0,this._kiemKeTaiSanServiceProxy.getAllTaiSan(this.id,2,this.keyword||void 0,this.getSortField(this.table),!1).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.unknownRecords=t,console.log(this.status)})}}getDataPage(t,e){switch(this.loading=!0,this.status){case"0":this._kiemKeTaiSanServiceProxy.getAllTaiSan(this.id,0,this.keyword||void 0,this.getSortField(this.table),t).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.foundRecords=t});break;case"1":this._kiemKeTaiSanServiceProxy.getAllTaiSan(this.id,1,this.keyword||void 0,this.getSortField(this.table),t).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.notFoundRecords=t});break;case"2":this._kiemKeTaiSanServiceProxy.getAllTaiSan(this.id,2,this.keyword||void 0,this.getSortField(this.table),t).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.unknownRecords=t})}}isFounded(){return!this.selectedRows||0===this.selectedRows.length}founded(){this.selectedRows.forEach(t=>{const e=new h.L;e.id=t.id,e.tinhTrang=1,this.updateInputDto.push(e)}),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n \u0111\u01b0\u1ee3c ch\u1ecdn s\u1ebd chuy\u1ec3n sang t\xecm th\u1ea5y",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"\u0110\u1ed3ng \xfd"}).then(t=>{t.value&&this._kiemKeTaiSanServiceProxy.updateTinhTrangTaiSan(this.updateInputDto).subscribe(()=>{this.showUpdateMessage(),this.getDataPage(!1),this.foundRecords=[],this.updateInputDto=[]})})}addTaiSanLa(t){this._showAddNguoiKiemKe(t,!1)}_showAddNguoiKiemKe(t,e){let i;i=this._modalService.show(F.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:e?{isView:e,id:t}:{}}),e||i.content.onSave.subscribe(e=>{const i=new h.L;i.id=t,i.tinhTrang=3,this.updateInputDto.push(i),this._kiemKeTaiSanServiceProxy.updateTinhTrangTaiSan(this.updateInputDto).subscribe(t=>{this.getDataPage(!1),this.updateInputDto=[]})})}}return t.\u0275fac=function(e){return new(e||t)(l.Ub(l.u),l.Ub(h.O),l.Ub(b.b))},t.\u0275cmp=l.Ob({type:t,selectors:[["app-danh-sach-kiem-ke-tai-san"]],viewQuery:function(t,e){var i;1&t&&l.Vc(B,!0),2&t&&l.Ec(i=l.jc())&&(e.table=i.first)},inputs:{status:"status",id:"id",isDisable:"isDisable"},features:[l.Fb],decls:3,vars:3,consts:[["status","0",4,"ngIf"],["status","1",4,"ngIf"],["status","2",4,"ngIf"],["status","0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[3,"value","lazy","loading","rows","scrollable","scrollHeight","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-70"],["pSortableColumn","maTaiSan",1,"width-150"],["field","maTaiSan"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","viTri",1,"width-200"],["field","viTri"],["pSortableColumn","trangThaiId",1,"width-150"],["field","trangThaiId"],[1,"ui-selectable-row"],[1,"width-150"],[1,"width-200"],["colspan","8",1,"text-left"],["status","1"],["class","card-header text-right",4,"ngIf"],[3,"value","lazy","loading","rows","selection","scrollable","scrollHeight","onLazyLoad","selectionChange"],[1,"card-header","text-right"],["type","button",1,"btn","bg-blue",3,"disabled","click"],[1,"fas","fa-clipboard-check"],[1,"width-30"],[3,"value",4,"ngIf"],[3,"value"],["colspan","8",1,"demo","text-left"],["status","2"],["pSortableColumn","maTaiSan",1,"width-250"],["pSortableColumn","viTri",1,"width-150"],["pSortableColumn","tinhTrangId",1,"width-150"],["field","tinhTrangId"],[1,"width-250"],["class","width-70",4,"ngIf"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],["aria-hidden","true",1,"fa","fa-plus"]],template:function(t,e){1&t&&(l.Pc(0,L,13,8,"div",0),l.Pc(1,A,14,10,"div",1),l.Pc(2,J,13,8,"div",2)),2&t&&(l.sc("ngIf",e.isFound),l.Ib(1),l.sc("ngIf",e.isNotFound),l.Ib(1),l.sc("ngIf",e.isNotInList))},directives:[c.l,m.b,m.p,m.s,T.c,v.d,T.b,T.a,T.d],styles:[""]}),t})();const Y=["dt"];function W(t,e){if(1&t&&(l.ac(0,"div",3),l.ac(1,"div",4),l.ac(2,"div",5),l.Vb(3,"dft-label-validation",6),l.Vb(4,"p-calendar",27),l.Vb(5,"dft-validation",8),l.Zb(),l.Zb(),l.ac(6,"div",4),l.ac(7,"div",5),l.Vb(8,"dft-label-validation",6),l.Vb(9,"p-calendar",28),l.Vb(10,"dft-validation",8),l.Zb(),l.Zb(),l.Zb()),2&t){const t=l.lc();l.Ib(3),l.sc("control",t.form.get("realTimeStart"))("title","Th\u1eddi gian b\u1eaft \u0111\u1ea7u th\u1ef1c t\u1ebf *"),l.Ib(1),l.sc("dateFormat",t.dateFormatInput)("showIcon",!0)("showTime",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),l.Ib(1),l.sc("control",t.form.get("realTimeStart")),l.Ib(3),l.sc("control",t.form.get("realTimeEnd"))("title","Th\u1eddi gian k\u1ebft th\xfac th\u1ef1c t\u1ebf *"),l.Ib(1),l.sc("dateFormat",t.dateFormatInput)("showIcon",!0)("showTime",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",t.yearRange),l.Ib(1),l.sc("control",t.form.get("realTimeEnd"))}}function tt(t,e){if(1&t){const t=l.bc();l.ac(0,"button",29),l.ic("click",(function(){return l.Ic(t),l.lc().deleteAll()})),l.Vb(1,"i",30),l.Rc(2," X\xf3a "),l.Zb()}if(2&t){const t=l.lc();l.sc("disabled",t.isDeletes())}}function et(t,e){if(1&t){const t=l.bc();l.ac(0,"button",31),l.ic("click",(function(){return l.Ic(t),l.lc().addPerson()})),l.Vb(1,"i",32),l.ac(2,"span",33),l.Rc(3,"Th\xeam m\u1edbi"),l.Zb(),l.Zb()}}function it(t,e){1&t&&l.Vb(0,"p-tableHeaderCheckbox")}function at(t,e){if(1&t&&(l.ac(0,"tr"),l.ac(1,"th",34),l.Pc(2,it,1,0,"p-tableHeaderCheckbox",35),l.Zb(),l.ac(3,"th",36),l.Rc(4,"STT"),l.Zb(),l.ac(5,"th",37),l.Rc(6,"T\xean"),l.Zb(),l.ac(7,"th",37),l.Rc(8,"Ch\u1ee9c v\u1ee5"),l.Zb(),l.ac(9,"th",37),l.Rc(10,"Ph\xf2ng Ban"),l.Zb(),l.ac(11,"th",37),l.Rc(12,"Email"),l.Zb(),l.Zb()),2&t){const t=l.lc();l.Ib(2),l.sc("ngIf",!t.isView)}}function ct(t,e){if(1&t&&l.Vb(0,"p-tableCheckbox",40),2&t){const t=l.lc().$implicit;l.sc("value",t)}}function nt(t,e){if(1&t&&(l.ac(0,"tr",38),l.ac(1,"td",34),l.Pc(2,ct,1,1,"p-tableCheckbox",39),l.Zb(),l.ac(3,"td",36),l.Rc(4),l.Zb(),l.ac(5,"td",37),l.Rc(6),l.mc(7,"truncate"),l.Zb(),l.ac(8,"td",37),l.Rc(9),l.mc(10,"truncate"),l.Zb(),l.ac(11,"td",37),l.Rc(12),l.mc(13,"truncate"),l.Zb(),l.ac(14,"td",37),l.Rc(15),l.mc(16,"truncate"),l.Zb(),l.Zb()),2&t){const t=e.$implicit,i=e.rowIndex,a=l.lc();l.Ib(2),l.sc("ngIf",!a.isView),l.Ib(2),l.Sc(i+1),l.Ib(2),l.Tc(" ",l.nc(7,6,t.user.name)," "),l.Ib(3),l.Tc(" ",l.nc(10,8,t.user.chucVu)," "),l.Ib(3),l.Tc(" ",l.nc(13,10,t.tenToChuc)," "),l.Ib(3),l.Tc(" ",l.nc(16,12,t.user.emailAddress)," ")}}function ot(t,e){if(1&t&&(l.ac(0,"tr"),l.ac(1,"td",41),l.Rc(2),l.Zb(),l.Zb()),2&t){const t=l.lc();l.Ib(2),l.Tc(" ",t.khongCoDuLieu," ")}}function st(t,e){if(1&t&&(l.ac(0,"div",42),l.ac(1,"div",43),l.Vb(2,"dft-label-validation",16),l.Zb(),l.ac(3,"p-tabView"),l.ac(4,"p-tabPanel",44),l.Vb(5,"app-danh-sach-kiem-ke-tai-san",45),l.Zb(),l.ac(6,"p-tabPanel",46),l.Vb(7,"app-danh-sach-kiem-ke-tai-san",47),l.Zb(),l.ac(8,"p-tabPanel",48),l.Vb(9,"app-danh-sach-kiem-ke-tai-san",49),l.Zb(),l.Zb(),l.Zb()),2&t){const t=l.lc();l.Ib(2),l.sc("title","Th\xf4ng tin t\xe0i s\u1ea3n ki\u1ec3m k\xea"),l.Ib(3),l.sc("id",t.id)("isDisable",t.finish),l.Ib(2),l.sc("id",t.id)("isDisable",t.finish),l.Ib(2),l.sc("id",t.id)("isDisable",t.finish)}}let rt=(()=>{class t extends s.a{constructor(t,e,i,a,c,n){super(t),this._fb=e,this.bsModalRef=i,this._modalService=a,this._kiemKeTaiSanServiceProxy=c,this._lookupTableService=n,this.onSave=new l.q,this.loading=!0,this.saving=!1,this.isEdit=!1,this.isView=!1,this.finish=!1,this.createInputDto=new h.N,this.kiemKeDto=new h.Bb,this.records=[],this.totalCount=0}ngOnInit(){this.khoiTaoForm(),this._lookupTableService.getAllToChucTheoNguoiDungTree(!0).subscribe(t=>this.toChucItems=this.getTreeviewItem(t)),this.finish=0===this.trangThaiID||2===this.trangThaiID,this.id?(this.isEdit=!0,this._kiemKeTaiSanServiceProxy.getForEdit(this.id,this.isView).subscribe(t=>{this.createInputDto=t,this._setValueForEdit()}),this._kiemKeTaiSanServiceProxy.getUserForEdit(this.id).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.records=t})):(this.createInputDto=new h.N,this.isEdit=!1,this.loading=!1),this.isView?this.form.disable():this.form.enable()}isDeletes(){return!this.selectedRows||0===this.selectedRows.length}deleteAll(){this.records=this.records.filter(t=>!this.selectedRows.includes(t)),this.selectedRows=[]}isToChucDisable(){return!!this.isView}khoiTaoForm(){this.form=this._fb.group({maKiemKe:["",m.y.required],tenKiemKe:["",m.y.required],predictTimeStart:["",m.y.required],predictTimeEnd:["",m.y.required],realTimeStart:[""],realTimeEnd:[""],department:["",m.y.required],status:["Ch\u01b0a b\u1eaft \u0111\u1ea7u"],doiKiemKeIdList:[]}),this.form.get("predictTimeStart").valueChanges.subscribe(t=>{t>this.form.get("predictTimeEnd").value&&this.form.get("predictTimeEnd").value?(this.form.get("predictTimeStart").setErrors({isStartMaxLdk:!0}),this.form.get("predictTimeStart").markAsDirty({onlySelf:!0})):t&&(this.form.get("predictTimeStart").setErrors(null),this.form.get("predictTimeEnd").setErrors(null))}),this.form.get("predictTimeEnd").valueChanges.subscribe(t=>{t<this.form.get("predictTimeStart").value&&this.form.get("predictTimeStart").value?(this.form.get("predictTimeEnd").setErrors({isEndMinLdk:!0}),this.form.get("predictTimeEnd").markAsDirty({onlySelf:!0})):t&&(this.form.get("predictTimeEnd").setErrors(null),this.form.get("predictTimeStart").setErrors(null))})}setControlValue(t){this.form.get("department").setValue(t)}save(){const t=new d;this._getValueForSave(),this.createInputDto.trangThaiId=t.transform(this.createInputDto.trangThaiId),this.isView?this.ketThucKiemke():""===r.a.getControlErr(this.form)&&(this.records.length>0?(this.saving=!0,this._kiemKeTaiSanServiceProxy.createOrEdit(this.createInputDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(t=>{1===t?this.showExistMessage("M\xe3 ki\u1ec3m k\xea \u0111\xe3 b\u1ecb tr\xf9ng!"):this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())})):this.showErrorMessage("Ch\u1ecdn \xedt nh\u1ea5t m\u1ed9t ng\u01b0\u1eddi ki\u1ec3m k\xea"))}ketThucKiemke(){this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"\u0110\u1ee3t ki\u1ec3m k\xea s\u1ebd k\u1ebft th\xfac!",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"\u0110\u1ed3ng \xfd"}).then(t=>{t.value&&(this.kiemKeDto.id=this.id,this.kiemKeDto.trangThai=!1,this._kiemKeTaiSanServiceProxy.updateTrangThaiKiemKe(this.kiemKeDto).pipe(Object(u.a)(()=>{this.saving=!1})).subscribe(()=>{this.bsModalRef.hide(),this.onSave.emit()}))})}close(){this.bsModalRef.hide()}_showAddNguoiKiemKe(){let t;t=this._modalService.show(y,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{userSave:this.records}}),t.content.event.subscribe(t=>{t.forEach(t=>{this.records.unshift(t)})})}isModalTrue(){const t=this.form.controls.status.value;return""!==r.a.getControlErr(this.form)||"Ch\u01b0a b\u1eaft \u0111\u1ea7u"===t||"\u0110\xe3 k\u1ebft th\xfac"===t&&!0===this.isView}addPerson(){this._showAddNguoiKiemKe()}_getValueForSave(){this.createInputDto.maKiemKe=this.form.controls.maKiemKe.value,this.createInputDto.tenKiemKe=this.form.controls.tenKiemKe.value,this.createInputDto.thoiGianBatDauDuKien=this.form.controls.predictTimeStart.value,this.createInputDto.thoiGianKetThucDuKien=this.form.controls.predictTimeEnd.value,this.createInputDto.boPhanDuocKiemKeId=this.toChucValue,this.createInputDto.trangThaiId=this.form.controls.status.value,this.createInputDto.doiKiemKeIdList=this.records.map(t=>t.user.id)}_setValueForEdit(){const t=new g;this.form.controls.maKiemKe.setValue(this.createInputDto.maKiemKe),this.form.controls.tenKiemKe.setValue(this.createInputDto.tenKiemKe),this.form.controls.predictTimeStart.setValue(r.a.getDateForEditFromMoment(this.createInputDto.thoiGianBatDauDuKien)),this.form.controls.realTimeStart.setValue(r.a.getDateForEditFromMoment(this.createInputDto.thoiGianBatDauThucTe)),this.form.controls.predictTimeEnd.setValue(r.a.getDateForEditFromMoment(this.createInputDto.thoiGianKetThucDuKien)),this.form.controls.realTimeEnd.setValue(r.a.getDateForEditFromMoment(this.createInputDto.thoiGianKetThucThucTe)),this.toChucValue=this.createInputDto.boPhanDuocKiemKeId,this.form.controls.department.setValue(this.createInputDto.boPhanDuocKiemKeId),this.form.controls.status.setValue(t.transform(this.createInputDto.trangThaiId)),this.form.controls.doiKiemKeIdList.setValue(this.createInputDto.doiKiemKeIdList)}}return t.\u0275fac=function(e){return new(e||t)(l.Ub(l.u),l.Ub(m.d),l.Ub(b.a),l.Ub(b.b),l.Ub(h.O),l.Ub(h.T))},t.\u0275cmp=l.Ob({type:t,selectors:[["app-create-or-edit-kiem-ke-tai-san"]],viewQuery:function(t,e){var i;1&t&&l.Vc(Y,!0),2&t&&l.Ec(i=l.jc())&&(e.table=i.first)},outputs:{onSave:"onSave"},features:[l.Fb],decls:51,vars:50,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"p-col-12","p-md-12","p-lg-6"],[1,"form-group"],[3,"control","title"],["type","text","id","tenKiemKe","name","tenKiemKe","formControlName","tenKiemKe","maxlength","255","pInputText",""],[3,"control"],["type","text","id","maKiemKe","name","maKiemKe","formControlName","maKiemKe","maxlength","50","pInputText",""],["formControlName","predictTimeStart",3,"dateFormat","showIcon","showTime","monthNavigator","yearNavigator","yearRange"],["formControlName","predictTimeEnd",3,"dateFormat","showIcon","showTime","monthNavigator","yearNavigator","yearRange"],["class","row ui-fluid",4,"ngIf"],[3,"disabled","items","value","valueChange"],["type","text","id","status","name","status","formControlName","status","maxlength","50","pInputText","","disabled",""],[1,"col-md-6"],[3,"title"],[1,"col-md-6","text-right"],["type","button","class","btn bg-danger m-b-10",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-primary m-l-5 m-b-10",3,"click",4,"ngIf"],[3,"value","lazy","loading","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","m-t-20",4,"ngIf"],[3,"cancelDisabled","saveHidden","cancelHidden","saveLabel","iconName","onCancelClick"],["formControlName","realTimeStart",3,"dateFormat","showIcon","showTime","monthNavigator","yearNavigator","yearRange"],["formControlName","realTimeEnd",3,"dateFormat","showIcon","showTime","monthNavigator","yearNavigator","yearRange"],["type","button",1,"btn","bg-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],["type","button",1,"btn","btn-primary","m-l-5","m-b-10",3,"click"],[1,"fa","fa-plus-square"],[2,"margin-left","5px"],[1,"width-30"],[4,"ngIf"],[1,"width-70"],[1,"width-150"],[1,"ui-selectable-row"],[3,"value",4,"ngIf"],[3,"value"],["colspan","8",1,"text-left"],[1,"m-t-20"],[1,"d-flex","justify-content-between"],["header","T\xe0i s\u1ea3n t\xecm th\u1ea5y"],["status","0",3,"id","isDisable"],["header","T\xe0i s\u1ea3n kh\xf4ng t\xecm th\u1ea5y"],["status","1",3,"id","isDisable"],["header","T\xe0i s\u1ea3n ngo\xe0i danh s\xe1ch"],["status","2",3,"id","isDisable"]],template:function(t,e){1&t&&(l.ac(0,"form",0),l.ic("ngSubmit",(function(){return e.save()})),l.ac(1,"abp-modal-header",1),l.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),l.Zb(),l.ac(2,"div",2),l.ac(3,"div",3),l.ac(4,"div",4),l.ac(5,"div",5),l.Vb(6,"dft-label-validation",6),l.Vb(7,"input",7),l.Vb(8,"dft-validation",8),l.Zb(),l.Zb(),l.ac(9,"div",4),l.ac(10,"div",5),l.Vb(11,"dft-label-validation",6),l.Vb(12,"input",9),l.Vb(13,"dft-validation",8),l.Zb(),l.Zb(),l.Zb(),l.ac(14,"div",3),l.ac(15,"div",4),l.ac(16,"div",5),l.Vb(17,"dft-label-validation",6),l.Vb(18,"p-calendar",10),l.Vb(19,"dft-validation",8),l.Zb(),l.Zb(),l.ac(20,"div",4),l.ac(21,"div",5),l.Vb(22,"dft-label-validation",6),l.Vb(23,"p-calendar",11),l.Vb(24,"dft-validation",8),l.Zb(),l.Zb(),l.Zb(),l.Pc(25,W,11,18,"div",12),l.ac(26,"div",3),l.ac(27,"div",4),l.ac(28,"div",5),l.ac(29,"div",5),l.Vb(30,"dft-label-validation",6),l.ac(31,"app-dropdown-treeview-select",13),l.ic("valueChange",(function(t){return e.toChucValue=t}))("valueChange",(function(t){return e.setControlValue(t)})),l.Zb(),l.Vb(32,"dft-validation",8),l.Zb(),l.Zb(),l.Zb(),l.ac(33,"div",4),l.ac(34,"div",5),l.Vb(35,"dft-label-validation",6),l.Vb(36,"input",14),l.Zb(),l.Zb(),l.Zb(),l.ac(37,"div",3),l.ac(38,"div",15),l.Vb(39,"dft-label-validation",16),l.Zb(),l.ac(40,"div",17),l.Pc(41,tt,3,1,"button",18),l.Pc(42,et,4,0,"button",19),l.Zb(),l.Zb(),l.ac(43,"div"),l.ac(44,"p-table",20,21),l.ic("selectionChange",(function(t){return e.selectedRows=t})),l.Pc(46,at,13,1,"ng-template",22),l.Pc(47,nt,17,14,"ng-template",23),l.Pc(48,ot,3,1,"ng-template",24),l.Zb(),l.Zb(),l.Pc(49,st,10,7,"div",25),l.Zb(),l.ac(50,"abp-modal-footer",26),l.ic("onCancelClick",(function(){return e.close()})),l.Zb(),l.Zb()),2&t&&(l.sc("formGroup",e.form),l.Ib(1),l.sc("title",e.id?e.isView?"Xem chi ti\u1ebft: "+e.createInputDto.tenKiemKe:"C\u1eadp nh\u1eadt: "+e.createInputDto.tenKiemKe:"Th\xeam m\u1edbi \u0111\u1ee3t ki\u1ec3m k\xea"),l.Ib(5),l.sc("control",e.form.get("tenKiemKe"))("title","T\xean \u0111\u1ee3t ki\u1ec3m k\xea *"),l.Ib(2),l.sc("control",e.form.get("tenKiemKe")),l.Ib(3),l.sc("control",e.form.get("maKiemKe"))("title","M\xe3 ki\u1ec3m k\xea *"),l.Ib(2),l.sc("control",e.form.get("maKiemKe")),l.Ib(4),l.sc("control",e.form.get("predictTimeStart"))("title","Th\u1eddi gian b\u1eaft \u0111\u1ea7u d\u1ef1 ki\u1ebfn *"),l.Ib(1),l.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("showTime",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),l.Ib(1),l.sc("control",e.form.get("predictTimeStart")),l.Ib(3),l.sc("control",e.form.get("predictTimeEnd"))("title","Th\u1eddi gian k\u1ebft th\xfac d\u1ef1 ki\u1ebfn *"),l.Ib(1),l.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("showTime",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),l.Ib(1),l.sc("control",e.form.get("predictTimeEnd")),l.Ib(1),l.sc("ngIf",e.isView),l.Ib(5),l.sc("control",e.form.get("department"))("title","B\u1ed9 ph\u1eadn \u0111\u01b0\u1ee3c ki\u1ec3m k\xea"),l.Ib(1),l.sc("disabled",e.isToChucDisable())("items",e.toChucItems)("value",e.toChucValue),l.Ib(1),l.sc("control",e.form.get("department")),l.Ib(3),l.sc("control",e.form.get("status"))("title","Tr\u1ea1ng th\xe1i"),l.Ib(4),l.sc("title","Danh s\xe1ch ng\u01b0\u1eddi ki\u1ec3m k\xea"),l.Ib(2),l.sc("ngIf",!e.isView),l.Ib(1),l.sc("ngIf",!e.isView),l.Ib(2),l.tc("scrollHeight",e.scrollHeight),l.sc("value",e.records)("lazy",!0)("loading",e.loading)("selection",e.selectedRows)("scrollable",e.scrollable),l.Ib(5),l.sc("ngIf",e.isView),l.Ib(1),l.sc("cancelDisabled",e.saving)("saveHidden",e.finish)("cancelHidden",e.isView)("saveLabel",e.isView?"K\u1ebft th\xfac":"L\u01b0u")("iconName",e.isView?"fa fa-flag-checkered":"fa fa-save"))},directives:[m.z,m.q,m.i,p.a,C.a,m.b,m.p,m.g,m.k,D.a,V.a,P.a,c.l,f.a,T.c,v.d,I.a,T.e,T.d,x.b,x.a,Q],pipes:[k.a],styles:[""],data:{animation:[Object(o.b)()]}}),t})();var lt=i("XDtX"),dt=i("arFO");const ht=["dt"];function bt(t,e){1&t&&(l.ac(0,"tr"),l.ac(1,"th",34),l.Vb(2,"p-tableHeaderCheckbox"),l.Zb(),l.Vb(3,"th",34),l.ac(4,"th",35),l.Rc(5," M\xe3 ki\u1ec3m k\xea "),l.Vb(6,"p-sortIcon",36),l.Zb(),l.ac(7,"th",37),l.Rc(8," T\xean "),l.Vb(9,"p-sortIcon",38),l.Zb(),l.ac(10,"th",39),l.Rc(11," \u0110\u01a1n v\u1ecb "),l.Vb(12,"p-sortIcon",40),l.Zb(),l.ac(13,"th",41),l.Rc(14," Th\u1eddi gian d\u1ef1 ki\u1ebfn "),l.Vb(15,"p-sortIcon",42),l.Zb(),l.ac(16,"th",43),l.Rc(17," Th\u1eddi gian th\u1ef1c t\u1ebf "),l.Vb(18,"p-sortIcon",44),l.Zb(),l.ac(19,"th",45),l.Rc(20," T\xecnh tr\u1ea1ng "),l.Vb(21,"p-sortIcon",46),l.Zb(),l.Zb())}function ut(t,e){if(1&t){const t=l.bc();l.ac(0,"a",53),l.ic("click",(function(){l.Ic(t);const e=l.lc().$implicit;return l.lc().create(e.kiemKeTaiSan.id)})),l.Rc(1,"C\u1eadp nh\u1eadt"),l.Zb()}}function mt(t,e){if(1&t){const t=l.bc();l.ac(0,"a",53),l.ic("click",(function(){l.Ic(t);const e=l.lc().$implicit;return l.lc().delete(e)})),l.Rc(1,"X\xf3a"),l.Zb()}}function gt(t,e){if(1&t){const t=l.bc();l.ac(0,"tr",47),l.ac(1,"td",34),l.Vb(2,"p-tableCheckbox",48),l.Zb(),l.ac(3,"td",34),l.ac(4,"div",49),l.ac(5,"button",50),l.Vb(6,"i",51),l.Zb(),l.ac(7,"div",52),l.ac(8,"a",53),l.ic("click",(function(){l.Ic(t);const i=e.$implicit;return l.lc().view(i.kiemKeTaiSan.id,i.kiemKeTaiSan.trangThaiId)})),l.Rc(9,"Xem"),l.Zb(),l.Pc(10,ut,2,0,"a",54),l.Pc(11,mt,2,0,"a",54),l.Zb(),l.Zb(),l.Zb(),l.ac(12,"td",55),l.Rc(13),l.Zb(),l.ac(14,"td",55),l.Rc(15),l.Zb(),l.ac(16,"td",55),l.Rc(17),l.Zb(),l.ac(18,"td",56),l.Rc(19),l.mc(20,"date"),l.mc(21,"date"),l.Zb(),l.ac(22,"td",56),l.Rc(23),l.mc(24,"date"),l.mc(25,"date"),l.Zb(),l.ac(26,"td",55),l.Rc(27),l.mc(28,"statusnum"),l.Zb(),l.Zb()}if(2&t){const t=e.$implicit,i=l.lc();l.Ib(2),l.sc("value",t),l.Ib(8),l.sc("ngIf",0===t.kiemKeTaiSan.trangThaiId),l.Ib(1),l.sc("ngIf",0===t.kiemKeTaiSan.trangThaiId),l.Ib(2),l.Tc(" ",t.kiemKeTaiSan.maKiemKe," "),l.Ib(2),l.Tc(" ",t.kiemKeTaiSan.tenKiemKe," "),l.Ib(2),l.Tc(" ",t.phongBan," "),l.Ib(2),l.Uc(" ",l.oc(20,11,t.kiemKeTaiSan.thoiGianBatDauDuKien,i.dateFormatPipe)," - ",l.oc(21,14,t.kiemKeTaiSan.thoiGianKetThucDuKien,i.dateFormatPipe)," "),l.Ib(4),l.Uc(" ",l.oc(24,17,t.kiemKeTaiSan.thoiGianBatDauThucTe,i.dateFormatPipe)," - ",l.oc(25,20,t.kiemKeTaiSan.thoiGianKetThucThucTe,i.dateFormatPipe)," "),l.Ib(4),l.Tc(" ",l.nc(28,23,t.kiemKeTaiSan.trangThaiId)," ")}}function pt(t,e){if(1&t&&(l.ac(0,"tr"),l.ac(1,"td",57),l.Rc(2),l.Zb(),l.Zb()),2&t){const t=l.lc();l.Ib(2),l.Tc(" ",t.khongCoDuLieu," ")}}const ft=[{path:"",component:(()=>{class t extends s.a{constructor(t,e,i,a){super(t),this._modalService=e,this._kiemKeTaiSanService=i,this._lookupTableService=a,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[],this.selectedRows=[],this.rangeDates=[]}ngOnInit(){this.rangeDates[0]=r.a.getNgayDauTienCuaThangHienTaiDate(),this.rangeDates[1]=new Date,this._lookupTableService.getAllToChucTheoNguoiDung().subscribe(t=>{this.toChucItems={data:t,selectedData:t.map(t=>t.id)},this.toChucValue=t.map(t=>t.id),this.getDataPage(!1)}),this._lookupTableService.getAllTrangThaiKiemKe().subscribe(t=>{this.trangthaiKiemKe=t})}getDataPage(t,e){this.selectedRows=[],this.loading=!0;const i=new d;void 0!==this.toChucValue&&this._kiemKeTaiSanService.getAll(this.keyword||void 0,this.rangeDates?this.rangeDates[0]:void 0,this.rangeDates?this.rangeDates[1]:void 0,this.toChucValue,i.transform(this.trangthai?this.trangthai.displayName:null),t,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(u.a)(()=>{this.loading=!1})).subscribe(t=>{this.records=t.items,this.totalCount=t.totalCount})}selectRow(t){this.selectedRows=t?this.records.filter(t=>t):[]}searchTrangThaiKiemKe(t){const e=t.query;this._lookupTableService.getAllTrangThaiKiemKe().subscribe(t=>{this.suggestions=this.filterTrangThaiKiemKe(e,t)})}filterTrangThaiKiemKe(t,e){const i=[];for(const a of e)0===a.displayName.toLowerCase().indexOf(t.toLowerCase())&&i.push(a);return i}create(t){this._showCreateOrEditDialog(t,!1)}view(t,e){this._showCreateOrEditDialog(t,!0,e)}delete(t){this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"\u0110\u1ee3t ki\u1ec3m k\xea "+t.kiemKeTaiSan.tenKiemKe+" s\u1ebd b\u1ecb x\xf3a!",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(e=>{e.value&&this._kiemKeTaiSanService.delete([t.kiemKeTaiSan.id]).subscribe(()=>{this.showDeleteMessage(),this.getDataPage(!1)})})}isDeletes(){return 0===this.selectedRows.length}deletes(){const t=[];let e=!1;this.selectedRows.forEach(i=>{1!==i.kiemKeTaiSan.trangThaiId&&2!==i.kiemKeTaiSan.trangThaiId||(e=!0),t.push(i.kiemKeTaiSan.id)}),e?this.showExistMessage(1===this.selectedRows.length?"\u0110\u1ee3t ki\u1ec3m k\xea "+this.selectedRows[0].kiemKeTaiSan.tenKiemKe+" \u0111\xe3 ch\u1ecdn \u0111ang \u1edf tr\u1ea1ng th\xe1i "+(1===this.selectedRows[0].kiemKeTaiSan.trangThaiId?'"\u0110ang ki\u1ec3m k\xea"':'"\u0110\xe3 k\u1ebft th\xfac"')+" kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p xo\xe1.":'M\u1ed9t hay nhi\u1ec1u \u0111\u1ee3t ki\u1ec3m k\xea \u0111\xe3 ch\u1ecdn \u0111ang \u1edf tr\u1ea1ng th\xe1i "\u0110ang ki\u1ec3m k\xea" ho\u1eb7c "\u0110\xe3 k\u1ebft th\xfac" kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p xo\xe1.'):this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"C\xe1c \u0111\u1ee3t ki\u1ec3m k\xea \u0111\xe3 ch\u1ecdn s\u1ebd b\u1ecb x\xf3a!",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(e=>{e.value&&this._kiemKeTaiSanService.delete(t).subscribe(()=>{this.showDeleteMessage(),this.getDataPage(!1)})})}_showCreateOrEditDialog(t,e=!1,i){let a;a=this._modalService.show(rt,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:t,isView:e,trangThaiID:i}}),a.content.onSave.subscribe(()=>{this.getDataPage(!1)})}}return t.\u0275fac=function(e){return new(e||t)(l.Ub(l.u),l.Ub(b.b),l.Ub(h.O),l.Ub(h.T))},t.\u0275cmp=l.Ob({type:t,selectors:[["app-kiem-ke-tai-san"]],viewQuery:function(t,e){var i;1&t&&l.Vc(ht,!0),2&t&&l.Ec(i=l.jc())&&(e.table=i.first)},features:[l.Fb],decls:48,vars:28,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-plus-square"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"ui-fluid","row","m-t-10"],[1,"col-sm-6","col-md-4"],[1,"form-group"],["for","PhongBan","id","PhongBan"],[3,"dataEdit","onSelect"],["for","Time","id","Time"],["selectionMode","range","name","rangeDates",3,"ngModel","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange","ngModelChange"],["for","Condition","id","Condition"],["optionLabel","displayName","resetFilterOnHide","false",3,"options","ngModel","placeholder","showClear","filter","ngModelChange"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","bg-danger",3,"disabled","click"],[1,"fas","fa-trash"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","selection","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","kiemKeTaiSan.maKiemKe",1,"width-150"],["field","kiemKeTaiSan.maKiemKe"],["pSortableColumn","kiemKeTaiSan.tenKiemKe",1,"width-150"],["field","kiemKeTaiSan.tenKiemKe"],["pSortableColumn","kiemKeTaiSan.boPhanDuocKiemKeId",1,"width-150"],["field","kiemKeTaiSan.boPhanDuocKiemKeId"],["pSortableColumn","kiemKeTaiSan.thoiGianBatDauDuKien",1,"width-200"],["field","kiemKeTaiSan.thoiGianBatDauDuKien"],["pSortableColumn","kiemKeTaiSan.thoiGianBatDauThucTe",1,"width-200"],["field","kiemKeTaiSan.thoiGianBatDauThucTe"],["pSortableColumn","kiemKeTaiSan.trangThaiId",1,"width-150"],["field","kiemKeTaiSan.trangThaiId"],[1,"ui-selectable-row"],[3,"value"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[1,"width-200",2,"white-space","nowrap"],["colspan","8",1,"text-left"]],template:function(t,e){1&t&&(l.ac(0,"div"),l.ac(1,"section",0),l.ac(2,"div",1),l.ac(3,"div",2),l.ac(4,"div",3),l.ac(5,"h1"),l.Rc(6,"Danh s\xe1ch c\xe1c \u0111\u1ee3t ki\u1ec3m k\xea"),l.Zb(),l.Zb(),l.ac(7,"div",4),l.ac(8,"button",5),l.ic("click",(function(){return e.create()})),l.Vb(9,"i",6),l.ac(10,"span",7),l.Rc(11,"Th\xeam m\u1edbi"),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.ac(12,"section",8),l.ac(13,"div",1),l.ac(14,"div",9),l.ac(15,"div",10),l.ac(16,"div",11),l.ac(17,"div",12),l.ac(18,"button",13),l.ic("click",(function(){return e.getDataPage(!0)})),l.Vb(19,"i",14),l.Zb(),l.Zb(),l.ac(20,"input",15),l.ic("ngModelChange",(function(t){return e.keyword=t}))("keyup.enter",(function(){return e.getDataPage(!0)})),l.Zb(),l.Zb(),l.ac(21,"div",16),l.ac(22,"div",17),l.ac(23,"div",18),l.ac(24,"label",19),l.Rc(25,"\u0110\u01a1n v\u1ecb"),l.Zb(),l.ac(26,"app-multiple-select-tree",20),l.ic("onSelect",(function(t){return e.toChucValue=t})),l.Zb(),l.Zb(),l.Zb(),l.ac(27,"div",17),l.ac(28,"div",18),l.ac(29,"label",21),l.Rc(30,"Th\u1eddi gian"),l.Zb(),l.ac(31,"p-calendar",22),l.ic("ngModelChange",(function(t){return e.rangeDates=t})),l.Zb(),l.Zb(),l.Zb(),l.ac(32,"div",17),l.ac(33,"div",18),l.ac(34,"label",23),l.Rc(35,"T\xecnh tr\u1ea1ng ki\u1ec3m k\xea"),l.Zb(),l.ac(36,"p-dropdown",24),l.ic("ngModelChange",(function(t){return e.trangthai=t})),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.ac(37,"div",25),l.ac(38,"div",26),l.ac(39,"button",27),l.ic("click",(function(){return e.deletes()})),l.Vb(40,"i",28),l.Rc(41," X\xf3a "),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.ac(42,"div"),l.ac(43,"p-table",29,30),l.ic("onLazyLoad",(function(t){return e.getDataPage(!1,t)}))("selectionChange",(function(t){return e.selectedRows=t})),l.Pc(45,bt,22,0,"ng-template",31),l.Pc(46,gt,29,25,"ng-template",32),l.Pc(47,pt,3,1,"ng-template",33),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Zb()),2&t&&(l.sc("@routerTransition",void 0),l.Ib(20),l.sc("placeholder","Nh\u1eadp t\xean ho\u1eb7c m\xe3 \u0111\u1ee3t ki\u1ec3m k\xea")("ngModel",e.keyword),l.Ib(6),l.sc("dataEdit",e.toChucItems),l.Ib(5),l.sc("ngModel",e.rangeDates)("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),l.Ib(5),l.sc("options",e.trangthaiKiemKe)("ngModel",e.trangthai)("placeholder",e.dropdownPlaceholder)("showClear",!1)("filter",!1),l.Ib(3),l.sc("disabled",e.isDeletes()),l.Ib(4),l.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),l.tc("scrollHeight",e.scrollHeight),l.sc("value",e.records)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("selection",e.selectedRows)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[m.b,m.p,m.s,lt.a,P.a,dt.a,T.c,v.d,T.e,T.b,T.a,T.d,c.l],pipes:[c.d,g],styles:[""],data:{animation:[Object(o.b)()]}}),t})()}];let Tt=(()=>{class t{}return t.\u0275mod=l.Sb({type:t}),t.\u0275inj=l.Rb({factory:function(e){return new(e||t)},imports:[[n.g.forChild(ft)],n.g]}),t})(),vt=(()=>{class t{}return t.\u0275mod=l.Sb({type:t}),t.\u0275inj=l.Rb({factory:function(e){return new(e||t)},imports:[[c.b,a.a,Tt]]}),t})()}}]);