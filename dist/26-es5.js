function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _slicedToArray(a,e){return _arrayWithHoles(a)||_iterableToArrayLimit(a,e)||_unsupportedIterableToArray(a,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(a,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var t=[],n=!0,i=!1,o=void 0;try{for(var c,r=a[Symbol.iterator]();!(n=(c=r.next()).done)&&(t.push(c.value),!e||t.length!==e);n=!0);}catch(l){i=!0,o=l}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}return t}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _createForOfIteratorHelper(a){if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(a=_unsupportedIterableToArray(a))){var e=0,t=function(){};return{s:t,n:function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}},e:function(a){throw a},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,o=!0,c=!1;return{s:function(){n=a[Symbol.iterator]()},n:function(){var a=n.next();return o=a.done,a},e:function(a){c=!0,i=a},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function _unsupportedIterableToArray(a,e){if(a){if("string"==typeof a)return _arrayLikeToArray(a,e);var t=Object.prototype.toString.call(a).slice(8,-1);return"Object"===t&&a.constructor&&(t=a.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(a,e):void 0}}function _arrayLikeToArray(a,e){(null==e||e>a.length)&&(e=a.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=a[t];return n}function _classCallCheck(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function _createClass(a,e,t){return e&&_defineProperties(a.prototype,e),t&&_defineProperties(a,t),a}function _inherits(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),e&&_setPrototypeOf(a,e)}function _setPrototypeOf(a,e){return(_setPrototypeOf=Object.setPrototypeOf||function(a,e){return a.__proto__=e,a})(a,e)}function _createSuper(a){return function(){var e,t=_getPrototypeOf(a);if(_isNativeReflectConstruct()){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(a,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(a):e}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(a){return!1}}function _getPrototypeOf(a){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{YkK7:function(a,e,t){"use strict";t.r(e),t.d(e,"TaiSanModule",(function(){return xn}));var n=t("ofXK"),i=t("tyNb"),o=t("Di4U"),c=t("wzdi"),r=t("fXoL"),l=t("dPl2"),s=t("KALY"),u=t("K3ix"),b=t("JeUU"),d=t("nYR2"),h=t("FCZ4"),f=t("bzU9"),g=t("6i1F"),p=t("nS6G"),m=t("3Pt+"),v=t("tk/3"),C=t("ukTS"),T=t("j9gp"),S=t("XDtX"),y=t("kKUO"),k=t("arFO"),Z=t("rEr+"),w=t("7zfz"),I=t("oStN"),D=["dt"];function R(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",40),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",40),r.ac(4,"th",41),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",42),r.Zb(),r.ac(7,"th",43),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",44),r.Zb(),r.ac(10,"th",45),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",46),r.Zb(),r.ac(13,"th",47),r.Rc(14,"Serial Number "),r.Vb(15,"p-sortIcon",48),r.Zb(),r.ac(16,"th",49),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",50),r.Zb(),r.ac(19,"th",51),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",52),r.Zb(),r.ac(22,"th",53),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",54),r.Zb(),r.ac(25,"th",55),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",56),r.Zb(),r.ac(28,"th",57),r.Rc(29,"Tr\u1ea1ng th\xe1i "),r.Vb(30,"p-sortIcon",58),r.Zb(),r.ac(31,"th",59),r.Rc(32," M\xe3 s\u1eed d\u1ee5ng "),r.Vb(33,"p-sortIcon",60),r.Zb(),r.ac(34,"th",61),r.Rc(35,"V\u1ecb tr\xed t\xe0i s\u1ea3n "),r.Vb(36,"p-sortIcon",62),r.Zb(),r.Zb())}function V(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",63),r.ac(1,"td",40),r.Vb(2,"p-tableCheckbox",64),r.Zb(),r.ac(3,"td",40),r.ac(4,"div",65),r.ac(5,"button",66),r.Vb(6,"i",67),r.Zb(),r.ac(7,"div",68),r.ac(8,"a",69),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.ac(10,"a",69),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().create(a.id)})),r.Rc(11,"C\u1eadp nh\u1eadt"),r.Zb(),r.ac(12,"a",69),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().delete(a)})),r.Rc(13,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"td",70),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",70),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",70),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",71),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",71),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.ac(29,"td",70),r.Rc(30),r.mc(31,"truncate"),r.Zb(),r.ac(32,"td",70),r.Rc(33),r.mc(34,"number"),r.Zb(),r.ac(35,"td",72),r.Rc(36),r.mc(37,"truncate"),r.Zb(),r.ac(38,"td",70),r.Rc(39),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",70),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.ac(44,"td",70),r.Rc(45),r.mc(46,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit;r.Ib(2),r.sc("value",n),r.Ib(13),r.Tc(" ",r.nc(16,12,n.maEPC)," "),r.Ib(3),r.Tc(" ",r.nc(19,14,n.tenTS)," "),r.Ib(3),r.Tc(" ",r.nc(22,16,n.loaiTS)," "),r.Ib(3),r.Tc(" ",r.nc(25,18,n.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(28,20,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(31,22,n.ngayMua)," "),r.Ib(3),r.Tc(" ",r.nc(34,24,n.nguyenGia)," "),r.Ib(3),r.Tc(" ",r.nc(37,26,n.phongBanQL)," "),r.Ib(3),r.Tc(" ",r.nc(40,28,n.trangThai)," "),r.Ib(3),r.Tc(" ",r.nc(43,30,n.maSD)," "),r.Ib(3),r.Tc(" ",r.nc(46,32,n.viTriTS)," ")}}function _(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",73),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var P,B=p.a.remoteServiceBaseUrl+"/api/Upload/ToanBoTSUpload",x=((P=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,r,l){var s;return _classCallCheck(this,t),(s=e.call(this,a))._modalService=n,s._toanBoTaiSanServiceProxy=i,s._fb=o,s._lookupTableService=c,s._fileDownloadService=r,s._http=l,s.isActive=0,s.loading=!0,s.exporting=!1,s.totalCount=0,s.first=0,s.records=[],s.selectedList=[],s.titleNotice="B\u1ea1n ch\u1eafc ch\u1eafn kh\xf4ng?",s.listIdXoa=[],s}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)})),this._lookupTableService.getAllLoaiTaiSanTree().subscribe((function(e){a.loaiTaiSanItems=a.getTreeviewItem(e)})),this._toanBoTaiSanServiceProxy.getAllNhaCC().subscribe((function(e){a.nhaCC=e})),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan().subscribe((function(e){a.maSD=e}))}},{key:"ngOnChanges",value:function(a){var e;0===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&this.form&&this.table&&(this.getDataPage(!1),this.selectedList=[])}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({PBQLFilter:[],LoaiTSFilter:[],NhaCCFilter:[],TinhTrangFilter:[],MaSDFilter:[]})}},{key:"getDataPage",value:function(a,e){var t,n,i,o,c,r,l=this;this.first=0,this.loading=!0,this._toanBoTaiSanServiceProxy.getAll(this.keyword||void 0,this.toChucValue,this.loaiTaiSanValue,null===(n=null===(t=this.form)||void 0===t?void 0:t.controls.NhaCCFilter.value)||void 0===n?void 0:n.id,null===(o=null===(i=this.form)||void 0===i?void 0:i.controls.TinhTrangFilter.value)||void 0===o?void 0:o.id,null===(r=null===(c=this.form)||void 0===c?void 0:c.controls.MaSDFilter.value)||void 0===r?void 0:r.id,a,this.getSortField(this.table),e?e.first:this.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){l.loading=!1}))).subscribe((function(a){l.records=a.items,l.totalCount=a.totalCount}))}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"view",value:function(a){this._showCreateOrEditDemoDialog(a,!0)}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"searchTTSD",value:function(a){var e=this,t=a.query;this._lookupTableService.getAllTrangThaiTaiSan().subscribe((function(a){e.ttSD=e.filterTrangThaiDuyet(t,a)}))}},{key:"filterTrangThaiDuyet",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"delete",value:function(a){var e=this;0===a.trangThaiId?this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTS+" s\u1ebd b\u1ecb x\xf3a!",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then((function(t){t.value&&e._toanBoTaiSanServiceProxy.deleted(a.id).subscribe((function(){e.showDeleteMessage(),e.getDataPage(!1)}))})):this._thongBao("T\xe0i s\u1ea3n "+a.tenTS+" s\u1ebd b\u1ecb x\xf3a!","T\xe0i s\u1ea3n \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng, kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!")}},{key:"xoaList",value:function(a){var e=this;a.filter((function(a){return 0===a.trangThaiId})).forEach((function(a){e.listIdXoa.push(a.id)})),this.listIdXoa.length>0?this.swal.fire({title:this.titleNotice,text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd b\u1ecb x\xf3a.",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then((function(a){a.value&&e._toanBoTaiSanServiceProxy.xoaList(e.listIdXoa).subscribe((function(){e.showDeleteMessage(),e.getDataPage(!1),e.selectedList=[]}))})):this._thongBao("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd b\u1ecb x\xf3a.","T\xe0i s\u1ea3n \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng, kh\xf4ng \u0111\u01b0\u1ee3c x\xf3a!")}},{key:"importExcel",value:function(){this._showImportDemoDialog()}},{key:"_showImportDemoDialog",value:function(){var a,e=this;(a=this._modalService.show(g.a,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{maxFile:1,excelAcceptTypes:this.excelAcceptTypes}})).content.onDownload.subscribe((function(){e._toanBoTaiSanServiceProxy.downloadFileMau().subscribe((function(t){a.content.downLoading=!1,e._fileDownloadService.downloadTempFile(t)}))})),a.content.onSave.subscribe((function(t){a.content.returnMessage="\u0110ang upload file....";for(var n=new FormData,i=0;i<t.length;i++)n.append(i+1+"",t[i]);e._http.post(B,n).subscribe((function(t){e._toanBoTaiSanServiceProxy.importFileExcel(t.result[0]).subscribe((function(e){a.content.returnMessage=e,a.content.uploading=!1,a.content.uploadDone()}))}))})),a.content.onClose.subscribe((function(){e.getDataPage(!1)}))}},{key:"exportToExcel",value:function(){var a,e,t,n,i,o,c=this;this.exporting=!0,this.input=new s.D,this.input.fillter=this.keyword||void 0,this.input.phongBanqQL=this.toChucValue,this.input.loaiTS=this.loaiTaiSanValue,this.input.nhaCungCap=null===(e=null===(a=this.form)||void 0===a?void 0:a.controls.NhaCCFilter.value)||void 0===e?void 0:e.id,this.input.tinhTrangSD=null===(n=null===(t=this.form)||void 0===t?void 0:t.controls.TinhTrangFilter.value)||void 0===n?void 0:n.id,this.input.maSD=null===(o=null===(i=this.form)||void 0===i?void 0:i.controls.MaSDFilter.value)||void 0===o?void 0:o.id,this.input.sorting=this.getSortField(this.table),this.input.skipCount=0,this.input.maxResultCount=1e7,this._toanBoTaiSanServiceProxy.exportToExcel(this.input).subscribe((function(a){c._fileDownloadService.downloadTempFile(a),c.exporting=!1}),(function(){c.exporting=!1}))}},{key:"_thongBao",value:function(a,e){var t=this;this.swal.fire({title:this.titleNotice,text:a,icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then((function(){t.showExistMessage(e)}))}}]),t}(c.a)).\u0275fac=function(a){return new(a||P)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.zb),r.Ub(m.d),r.Ub(s.T),r.Ub(f.a),r.Ub(v.b))},P.\u0275cmp=r.Ob({type:P,selectors:[["app-toan-bo-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(D,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:62,vars:37,consts:[["id","toanBoTS",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5","m-t-5","width-130",3,"click"],[1,"fa","fa-upload"],[2,"margin-left","5px"],["type","button",1,"btn","btn-success","m-r-5","m-t-5","width-130",3,"buttonBusy","click"],[1,"fa","fa-download"],["type","button",1,"btn","btn-primary","m-r-5","m-t-5","width-130",3,"click"],[1,"fa","fa-plus"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup"],["createUserModal","ngForm"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],[1,"ui-fluid","row"],["formControlName","NhaCCFilter","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","MaSDFilter","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"fas","fa-trash"],[3,"value","lazy","first","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","firstChange","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","maEPC",1,"width-150"],["field","maEPC"],["pSortableColumn","tenTS",1,"width-150"],["field","tenTS"],["pSortableColumn","loaiTS",1,"width-150"],["field","loaiTS"],["pSortableColumn","serialNumber",1,"width-170"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-170"],["field","nhaCungCap"],["pSortableColumn","ngayMuaDateTime",1,"width-150"],["field","ngayMuaDateTime"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQL",1,"width-300"],["field","phongBanQL"],["pSortableColumn","trangThaiId",1,"width-150"],["field","trangThaiId"],["pSortableColumn","tinhTrangQRCode,tinhTrangBarCode,tinhTrangRFID",1,"width-150"],["field","tinhTrangQRCode,tinhTrangBarCode,tinhTrangRFID"],["pSortableColumn","viTriTS",1,"width-150"],["field","viTriTS"],[1,"ui-selectable-row"],[3,"value"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"width-150"],[1,"width-170"],[1,"width-300"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd To\xe0n b\u1ed9 t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return e.importExcel()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Nh\u1eadp Excel"),r.Zb(),r.Zb(),r.ac(12,"button",8),r.ic("click",(function(){return e.exportToExcel()})),r.Vb(13,"i",9),r.ac(14,"span",7),r.Rc(15,"Xu\u1ea5t Excel"),r.Zb(),r.Zb(),r.ac(16,"button",10),r.ic("click",(function(){return e.create()})),r.Vb(17,"i",11),r.ac(18,"span",7),r.Rc(19,"Th\xeam m\u1edbi"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"section",12),r.ac(21,"div",1),r.ac(22,"div",13),r.ac(23,"div",14),r.ac(24,"div",15),r.ac(25,"div",16),r.ac(26,"button",17),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(27,"i",18),r.Zb(),r.Zb(),r.ac(28,"input",19),r.ic("ngModelChange",(function(a){return e.keyword=a}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(29,"form",20,21),r.ac(31,"div",22),r.ac(32,"div",23),r.ac(33,"div",24),r.Vb(34,"dft-label-validation",25),r.ac(35,"app-multiple-select-tree",26),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",23),r.ac(37,"div",24),r.Vb(38,"dft-label-validation",25),r.ac(39,"app-dropdown-treeview-select",27),r.ic("valueChange",(function(a){return e.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"div",28),r.ac(41,"div",23),r.ac(42,"div",24),r.Vb(43,"dft-label-validation",25),r.Vb(44,"p-dropdown",29),r.Zb(),r.Zb(),r.ac(45,"div",23),r.ac(46,"div",24),r.Vb(47,"dft-label-validation",25),r.Vb(48,"p-dropdown",30),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(49,"div",31),r.ac(50,"div",32),r.ac(51,"button",33),r.ic("click",(function(){return e.xoaList(e.selectedList)})),r.Vb(52,"i",34),r.ac(53,"span",7),r.Rc(54,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(55,"div"),r.ac(56,"div"),r.ac(57,"p-table",35,36),r.ic("onLazyLoad",(function(a){return e.getDataPage(!1,a)}))("firstChange",(function(a){return e.first=a}))("selectionChange",(function(a){return e.selectedList=a})),r.Pc(59,R,37,0,"ng-template",37),r.Pc(60,V,47,34,"ng-template",38),r.Pc(61,_,3,1,"ng-template",39),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(12),r.sc("buttonBusy",e.exporting),r.Ib(16),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1")("ngModel",e.keyword),r.Ib(1),r.sc("formGroup",e.form),r.Ib(5),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(4),r.sc("form",e.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",e.nhaCC)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("form",e.form)("title","M\xe3 s\u1eed d\u1ee5ng"),r.Ib(1),r.sc("options",e.maSD)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",0===e.selectedList.length),r.Ib(6),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("lazy",!0)("first",e.first)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.selectedList))},directives:[C.a,m.b,m.p,m.s,m.z,m.q,m.i,T.a,S.a,y.a,k.a,m.g,Z.c,w.d,Z.e,Z.b,Z.a,Z.d],pipes:[I.a,n.e],styles:[".haha[_ngcontent-%COMP%]{margin-top:10px}"],data:{animation:[Object(h.b)()]}}),P),N=t("cj2p"),L=t("cp0P"),O=t("N7wC"),M=t("CR43"),A=t("0EPa"),F=["dt"];function H(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Vb(14,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function K(a,e){if(1&a&&(r.ac(0,"tr",32),r.ac(1,"td",33),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",33),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",33),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",33),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",31),r.Vb(14,"p-tableCheckbox",34),r.Zb(),r.Zb()),2&a){var t=e.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,5,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,7,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,9,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,11,t.nhaCungCap)," "),r.Ib(3),r.sc("value",t)}}function E(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",35),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var U,G=function(){return{standalone:!0}},j=((U=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l){var s;return _classCallCheck(this,t),(s=e.call(this,a)).bsModalRef=n,s._lookupTableService=i,s._fb=o,s._taiSanChuaSuDungServiceProxy=c,s._taiSanDangSuDungServiceProxy=l,s.loading=!0,s.keyword="",s.saving=!1,s.records=[],s.arrTaiSanCheckedFromParent=[],s.arrTaiSanChecked=[],s.recordsForCheck=[],s.onSave=new r.q,s}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe((function(e){return a.listToChucId=e})),Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];a.loaiTaiSanItems=a.getTreeviewItem(n),a.nhaCungCaps=i}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({NhaCungCap:[]})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"searchTrangThaiNhaCungCap",value:function(a){var e=this,t=a.query;this._lookupTableService.getAllNhaCungCap().subscribe((function(a){e.nhaCungCaps=e.filterTrangThai(t,a)}))}},{key:"filterTrangThai",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a,e){var t,n,i=this;this.loading=!0,1===this.flag&&(this._taiSanChuaSuDungServiceProxy.getAllTaiSanCapPhat(this.keyword||void 0,void 0,this.loaiTaiSanValue||void 0,null===(t=this.form.controls.NhaCungCap.value)||void 0===t?void 0:t.id,void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){i.loading=!1}))).subscribe((function(a){i.setValueForRecords(a)})),this.loading=!1),2===this.flag&&(this._taiSanDangSuDungServiceProxy.getAllTaiSanCapPhat(this.keyword||void 0,void 0,this.loaiTaiSanValue||void 0,null===(n=this.form.controls.NhaCungCap.value)||void 0===n?void 0:n.id,void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){i.loading=!1}))).subscribe((function(a){i.setValueForRecords(a)})),this.loading=!1),this.loading=!1}},{key:"setValueForRecords",value:function(a){var e=this;a.items=this.permission.isGranted("Pages.QuanLyTaiSanTong")?a.items.filter((function(a){return!e.arrTaiSanCheckedFromParent.map((function(a){return a.id})).includes(a.id)&&a.capPhat})):a.items.filter((function(a){return!e.arrTaiSanCheckedFromParent.map((function(a){return a.id})).includes(a.id)&&a.capPhat&&e.listToChucId.includes(a.toChucId)})),this.records=a.items,this.totalCount=a.totalCount}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}]),t}(c.a)).\u0275fac=function(a){return new(a||U)(r.Ub(r.u),r.Ub(u.a),r.Ub(s.T),r.Ub(m.d),r.Ub(s.lb),r.Ub(s.mb))},U.\u0275cmp=r.Ob({type:U,selectors:[["app-them-cap-phat-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(F,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:24,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],["formControlName","NhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return e.keyword=a}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return e.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.Vb(19,"p-dropdown",15),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return e.getDataPage(!1,a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(23,H,15,0,"ng-template",19),r.Pc(24,K,15,13,"ng-template",20),r.Pc(25,E,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n c\u1ea5p ph\xe1t"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",e.keyword)("ngModelOptions",r.vc(23,G)),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",e.nhaCungCaps)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(2),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!e.arrTaiSanChecked.length))},directives:[m.z,m.q,m.i,M.a,m.b,m.p,m.s,T.a,y.a,k.a,m.g,Z.c,w.d,A.a,Z.b,Z.a,Z.e,Z.d],pipes:[I.a],styles:[""]}),U),z=t("Di65"),q=t("eO1q"),Q=["dt"];function $(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",28),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",29),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",30),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Zb(),r.ac(7,"th",30),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",30),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",30),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",30),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",30),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.Zb())}function X(a,e){if(1&a&&(r.ac(0,"tr",31),r.ac(1,"td",28),r.Vb(2,"p-tableCheckbox",32),r.Zb(),r.ac(3,"td",29),r.Rc(4),r.Zb(),r.ac(5,"td",30),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",30),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",30),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",30),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",30),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",30),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",n+1," "),r.Ib(2),r.Tc(" ",r.nc(7,8,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,10,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,12,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,16,r.nc(20,19,t.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,21,r.nc(24,24,t.nguyenGia),"2.")," ")}}function J(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",33),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var W,Y=((W=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l,u){var b;return _classCallCheck(this,t),(b=e.call(this,a))._fb=n,b.bsModalRef=i,b._lookupTableService=o,b._modalService=c,b._taiSanChuaSuDungServiceProxy=l,b._sendMail=u,b.loading=!0,b.onSave=new r.q,b.records=[],b.taiSans=[],b.saving=!1,b.totalCount=0,b.arrTaiSanChecked=[],b.createInputDto=new s.eb,b}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this.count>0&&this.showExistMessage("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn ch\u1ee9a t\xe0i s\u1ea3n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p c\u1ea5p ph\xe1t"),this.isGranted("Pages.QuanLyTaiSanTong")?Object(L.a)(this._lookupTableService.getAllToChucTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.toChucItems=a.getTreeviewItem(t)})):Object(L.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!1)).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.toChucItems=a.getTreeviewItem(t)}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.maxLength(4e3),Object(z.b)()]],PhongBan:["",m.y.required]})}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){0===e?a.showExistMessage("L\u1ed7i"):(a.showSuccessMessage("C\u1ea5p ph\xe1t th\xe0nh c\xf4ng"),a._sendMail.sendMailCapPhat(a.form.value.PhongBan,a.records).subscribe((function(a){})),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.CapPhat,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,toChucDuocNhanId:this.form.value.PhongBan,phieuTaiSanChiTietList:a})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"deleteTaiSan",value:function(){}},{key:"addTaiSan",value:function(){this._showCreateOrEditDemoDialog(1===this.flag?1:2)}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this;(e=this._modalService.show(j,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"setControlValue",value:function(a){this.form.get("PhongBan").setValue(a)}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),2===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}]),t}(c.a)).\u0275fac=function(a){return new(a||W)(r.Ub(r.u),r.Ub(m.d),r.Ub(u.a),r.Ub(s.T),r.Ub(u.b),r.Ub(s.lb),r.Ub(s.V))},W.\u0275cmp=r.Ob({type:W,selectors:[["app-cap-phat-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Q,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:33,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-lg-6","col-md-12","col-sm-12"],[1,"form-group"],[3,"control","title"],[3,"items","valueChange"],[3,"control"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[1,"col-md-6"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.ac(8,"app-dropdown-treeview-select",8),r.ic("valueChange",(function(a){return e.setControlValue(a)})),r.Zb(),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.ac(10,"div",5),r.ac(11,"div",6),r.Vb(12,"dft-label-validation",7),r.Vb(13,"p-calendar",10),r.Vb(14,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(15,"div",4),r.ac(16,"div",11),r.ac(17,"div",6),r.Vb(18,"dft-label-validation",7),r.Vb(19,"br"),r.Vb(20,"textarea",12),r.Vb(21,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",13),r.ac(23,"div",14),r.Vb(24,"dft-label-validation",15),r.Zb(),r.ac(25,"div",16),r.ac(26,"button",17),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(27,"i",18),r.ac(28,"span",19),r.Rc(29,"X\xf3a"),r.Zb(),r.Zb(),r.ac(30,"button",20),r.ic("click",(function(){return e.addTaiSan()})),r.Vb(31,"i",21),r.ac(32,"span",19),r.Rc(33,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",22,23),r.ic("onLazyLoad",(function(a){return e.getDataPage(a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(37,$,17,0,"ng-template",24),r.Pc(38,X,25,26,"ng-template",25),r.Pc(39,J,3,1,"ng-template",26),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"abp-modal-footer",27),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","C\u1ea5p ph\xe1t T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",e.form.get("PhongBan"))("title","\u0110\u01a1n v\u1ecb \u0111\u01b0\u1ee3c c\u1ea5p ph\xe1t t\xe0i s\u1ea3n *"),r.Ib(1),r.sc("items",e.toChucItems),r.Ib(1),r.sc("control",e.form.get("PhongBan")),r.Ib(3),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian c\u1ea5p ph\xe1t *"),r.Ib(1),r.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung c\u1ea5p ph\xe1t"),r.Ib(3),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",e.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n c\u1ea5p ph\xe1t"),r.Ib(2),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!(null!=e.records&&e.records.length))("iconName","fas fa-external-link-square-alt")("saveLabel","C\u1ea5p ph\xe1t"))},directives:[m.z,m.q,m.i,M.a,T.a,y.a,z.a,q.a,m.p,m.g,m.b,m.k,Z.c,w.d,A.a,Z.e,Z.d],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),W),aa=["dt"];function ea(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",32),r.Zb(),r.ac(16,"th",33),r.Vb(17,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function ta(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",33),r.Vb(17,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,6,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,8,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,10,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,12,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,14,t.phongBanQuanLy)," "),r.Ib(3),r.sc("value",t)}}function na(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var ia,oa=function(){return{standalone:!0}},ca=((ia=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l){var s;return _classCallCheck(this,t),(s=e.call(this,a)).bsModalRef=n,s._lookupTableService=i,s._fb=o,s._taiSanChuaSuDungServiceProxy=c,s._taiSanDangSuDungServiceProxy=l,s.loading=!0,s.keyword="",s.saving=!1,s.records=[],s.arrTaiSanCheckedFromParent=[],s.arrTaiSanChecked=[],s.recordsForCheck=[],s.onSave=new r.q,s}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)})),this._lookupTableService.getAllLoaiTaiSanTree().subscribe((function(e){a.loaiTaiSanItems=a.getTreeviewItem(e)}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"filterTrangThai",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,1===this.flag&&(this._taiSanChuaSuDungServiceProxy.getAllByMaAndSerialNumber(this.keyword,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){t.setValueForRecords(a)})),this.loading=!1),2===this.flag&&(this._taiSanDangSuDungServiceProxy.getAllByMaAndSerialNumberTsdsd(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){t.setValueForRecords(a)})),this.loading=!1),this.loading=!1}},{key:"setValueForRecords",value:function(a){var e=this;a.items=this.permission.isGranted("Pages.QuanLyTaiSanTong")?a.items.filter((function(a){return!e.arrTaiSanCheckedFromParent.map((function(a){return a.id})).includes(a.id)&&a.dieuChuyen})):a.items.filter((function(a){return!e.arrTaiSanCheckedFromParent.map((function(a){return a.id})).includes(a.id)&&a.dieuChuyen&&e.listToChucId.includes(a.toChucId)})),this.records=a.items,this.totalCount=a.totalCount}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}]),t}(c.a)).\u0275fac=function(a){return new(a||ia)(r.Ub(r.u),r.Ub(u.a),r.Ub(s.T),r.Ub(m.d),r.Ub(s.lb),r.Ub(s.mb))},ia.\u0275cmp=r.Ob({type:ia,selectors:[["app-them-dieu-chuyen-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(aa,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:21,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return e.keyword=a}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return e.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.ac(19,"app-multiple-select-tree",15),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return e.getDataPage(!1,a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(23,ea,18,0,"ng-template",19),r.Pc(24,ta,18,16,"ng-template",20),r.Pc(25,na,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n \u0111i\u1ec1u chuy\u1ec3n"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",e.keyword)("ngModelOptions",r.vc(20,oa)),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!e.arrTaiSanChecked.length))},directives:[m.z,m.q,m.i,M.a,m.b,m.p,m.s,T.a,y.a,S.a,Z.c,w.d,A.a,Z.b,Z.a,Z.e,Z.d],pipes:[I.a],styles:[""]}),ia),ra=["dt"];function la(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",28),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",29),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",30),r.Rc(6,"T\xean t\xe0i s\u1ea3n"),r.Zb(),r.ac(7,"th",30),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",30),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",30),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",30),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",30),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.ac(17,"th",31),r.Rc(18,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Zb(),r.Zb())}function sa(a,e){if(1&a&&(r.ac(0,"tr",32),r.ac(1,"td",28),r.Vb(2,"p-tableCheckbox",33),r.Zb(),r.ac(3,"td",29),r.Rc(4),r.Zb(),r.ac(5,"td",30),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",30),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",30),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",30),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",30),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",30),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.ac(25,"td",31),r.Rc(26),r.mc(27,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",n+1," "),r.Ib(2),r.Tc(" ",r.nc(7,9,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,11,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,13,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,15,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,17,r.nc(20,20,t.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,22,r.nc(24,25,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(27,27,t.phongBanQuanLy)," ")}}function ua(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",34),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var ba,da=((ba=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l,u){var b;return _classCallCheck(this,t),(b=e.call(this,a))._fb=n,b.bsModalRef=i,b._lookupTableService=o,b._modalService=c,b._taiSanChuaSuDungServiceProxy=l,b._sendMail=u,b.loading=!0,b.onSave=new r.q,b.records=[],b.taiSans=[],b.saving=!1,b.totalCount=0,b.arrTaiSanChecked=[],b.createInputDto=new s.eb,b}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this.count>0&&this.showExistMessage("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn ch\u1ee9a t\xe0i s\u1ea3n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p \u0111i\u1ec1u chuy\u1ec3n"),this.isGranted("Pages.QuanLyTaiSanTong")?Object(L.a)(this._lookupTableService.getAllToChucTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.toChucItems=a.getTreeviewItem(t)})):Object(L.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!1)).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.toChucItems=a.getTreeviewItem(t)}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.maxLength(4e3),Object(z.b)()]],PhongBan:["",m.y.required]})}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){0===e?a.showExistMessage("L\u1ed7i"):(a.showSuccessMessage("\u0110i\u1ec1u chuy\u1ec3n th\xe0nh c\xf4ng"),a._sendMail.sendMailDieuChuyen(a.form.value.PhongBan,a.records).subscribe((function(a){})),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.DieuChuyen,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,toChucDuocNhanId:this.form.value.PhongBan,phieuTaiSanChiTietList:a})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"deleteTaiSan",value:function(){}},{key:"addTaiSan",value:function(){this._showCreateOrEditDemoDialog(1===this.flag?1:2)}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this;(e=this._modalService.show(ca,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"setControlValue",value:function(a){this.form.get("PhongBan").setValue(a)}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),2===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}]),t}(c.a)).\u0275fac=function(a){return new(a||ba)(r.Ub(r.u),r.Ub(m.d),r.Ub(u.a),r.Ub(s.T),r.Ub(u.b),r.Ub(s.lb),r.Ub(s.V))},ba.\u0275cmp=r.Ob({type:ba,selectors:[["app-dieu-chuyen-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(ra,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:34,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-lg-6","col-md-12","col-sm-12"],[1,"form-group"],[3,"control","title"],[3,"items","valueChange"],[3,"control"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[1,"col-md-6"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"width-250"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.ac(8,"app-dropdown-treeview-select",8),r.ic("valueChange",(function(a){return e.setControlValue(a)})),r.Zb(),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.ac(10,"div",5),r.ac(11,"div",6),r.Vb(12,"dft-label-validation",7),r.Vb(13,"p-calendar",10),r.Vb(14,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(15,"div",4),r.ac(16,"div",11),r.ac(17,"div",6),r.Vb(18,"dft-label-validation",7),r.Vb(19,"br"),r.Vb(20,"textarea",12),r.Vb(21,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",13),r.ac(23,"div",14),r.Vb(24,"dft-label-validation",15),r.Zb(),r.ac(25,"div",16),r.ac(26,"button",17),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(27,"i",18),r.ac(28,"span",19),r.Rc(29,"X\xf3a"),r.Zb(),r.Zb(),r.ac(30,"button",20),r.ic("click",(function(){return e.addTaiSan()})),r.Vb(31,"i",21),r.ac(32,"span",19),r.Rc(33,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",22,23),r.ic("onLazyLoad",(function(a){return e.getDataPage(a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(37,la,19,0,"ng-template",24),r.Pc(38,sa,28,29,"ng-template",25),r.Pc(39,ua,3,1,"ng-template",26),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"abp-modal-footer",27),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","\u0110i\u1ec1u chuy\u1ec3n T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",e.form.get("PhongBan"))("title","\u0110\u01a1n v\u1ecb \u0111\u01b0\u1ee3c \u0111i\u1ec1u chuy\u1ec3n t\xe0i s\u1ea3n \u0111\u1ebfn *"),r.Ib(1),r.sc("items",e.toChucItems),r.Ib(1),r.sc("control",e.form.get("PhongBan")),r.Ib(3),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian \u0111i\u1ec1u chuy\u1ec3n *"),r.Ib(1),r.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung \u0111i\u1ec1u chuy\u1ec3n"),r.Ib(3),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",e.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n \u0111i\u1ec1u chuy\u1ec3n"),r.Ib(2),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!(null!=e.records&&e.records.length))("iconName","fas fa-exchange-alt")("saveLabel","\u0110i\u1ec1u chuy\u1ec3n")("cancelDisabled",e.saving))},directives:[m.z,m.q,m.i,M.a,T.a,y.a,z.a,q.a,m.p,m.g,m.b,m.k,Z.c,w.d,A.a,Z.e,Z.d],pipes:[I.a,n.d,n.e],styles:[""]}),ba),ha=["dt"];function fa(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",32),r.Zb(),r.ac(16,"th",33),r.Vb(17,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function ga(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",33),r.Vb(17,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,6,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,8,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,10,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,12,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,14,t.phongBanQuanLy)," "),r.Ib(3),r.sc("value",t)}}function pa(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var ma,va=function(){return{standalone:!0}},Ca=((ma=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var l;return _classCallCheck(this,t),(l=e.call(this,a)).bsModalRef=n,l._lookupTableService=i,l._fb=o,l._taiSanChuaSuDungServiceProxy=c,l.loading=!0,l.keyword="",l.saving=!1,l.records=[],l.arrTaiSanCheckedFromParent=[],l.arrTaiSanChecked=[],l.recordsForCheck=[],l.onSave=new r.q,l}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe((function(e){return a.listToChucId=e})),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)})),Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.loaiTaiSanItems=a.getTreeviewItem(t)}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"filterTrangThai",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,1===this.flag&&(this._taiSanChuaSuDungServiceProxy.getAllByMaAndSerialNumber(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){a.items=a.items.filter((function(a){return!t.arrTaiSanCheckedFromParent.some((function(e){return e.id===a.id}))})),void 0!==t.toChucValue||t.permission.isGranted("Pages.QuanLyTaiSanTong")||(a.items=a.items.filter((function(a){return t.listToChucId.includes(a.toChucId)}))),t.records=a.items,t.totalCount=a.totalCount})),this.loading=!1),this.loading=!1}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}]),t}(c.a)).\u0275fac=function(a){return new(a||ma)(r.Ub(r.u),r.Ub(u.a),r.Ub(s.T),r.Ub(m.d),r.Ub(s.lb))},ma.\u0275cmp=r.Ob({type:ma,selectors:[["app-them-khai-bao-su-dung-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(ha,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:22,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return e.keyword=a}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return e.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.ac(19,"app-multiple-select-tree",15),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return e.getDataPage(!1,a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(23,fa,18,0,"ng-template",19),r.Pc(24,ga,18,16,"ng-template",20),r.Pc(25,pa,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o s\u1eed d\u1ee5ng"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",e.keyword)("ngModelOptions",r.vc(21,va)),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!e.arrTaiSanChecked.length))},directives:[m.z,m.q,m.i,M.a,m.b,m.p,m.s,T.a,y.a,S.a,Z.c,w.d,A.a,Z.b,Z.a,Z.e,Z.d],pipes:[I.a],styles:[""]}),ma),Ta=["dt"];function Sa(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",26),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",27),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",28),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Zb(),r.ac(7,"th",28),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",28),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",28),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",28),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",28),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.ac(17,"th",29),r.Rc(18,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Zb(),r.Zb())}function ya(a,e){if(1&a&&(r.ac(0,"tr",30),r.ac(1,"td",26),r.Vb(2,"p-tableCheckbox",31),r.Zb(),r.ac(3,"td",27),r.Rc(4),r.Zb(),r.ac(5,"td",28),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",28),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",28),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",28),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",28),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",28),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.ac(25,"td",29),r.Rc(26),r.mc(27,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",n+1," "),r.Ib(2),r.Tc(" ",r.nc(7,9,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,11,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,13,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,15,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,17,r.nc(20,20,t.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,22,r.nc(24,25,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(27,27,t.phongBanQuanLy)," ")}}function ka(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",32),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var Za,wa=((Za=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l){var u;return _classCallCheck(this,t),(u=e.call(this,a))._fb=n,u.bsModalRef=i,u._lookupTableService=o,u._modalService=c,u._taiSanChuaSuDungServiceProxy=l,u.loading=!0,u.onSave=new r.q,u.records=[],u.taiSans=[],u.saving=!1,u.totalCount=0,u.arrTaiSanChecked=[],u.createInputDto=new s.eb,u}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),Object(L.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0)).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.toChucItems=a.getTreeviewItem(t)}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.maxLength(4e3),Object(z.b)(),m.y.required]]})}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){0===e?a.showExistMessage("L\u1ed7i"):(a.showSuccessMessage("Khai b\xe1o th\xe0nh c\xf4ng"),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanDangSuDung,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"deleteTaiSan",value:function(){}},{key:"addTaiSan",value:function(){this._showCreateOrEditDemoDialog(1)}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this;(e=this._modalService.show(Ca,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}]),t}(c.a)).\u0275fac=function(a){return new(a||Za)(r.Ub(r.u),r.Ub(m.d),r.Ub(u.a),r.Ub(s.T),r.Ub(u.b),r.Ub(s.lb))},Za.\u0275cmp=r.Ob({type:Za,selectors:[["app-khai-bao-su-dung-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Ta,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:36,vars:30,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[3,"control"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"width-250"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.Vb(8,"p-calendar",8),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(10,"div",4),r.ac(11,"div",10),r.ac(12,"div",6),r.Vb(13,"dft-label-validation",7),r.Vb(14,"br"),r.Vb(15,"textarea",11),r.Vb(16,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(17,"div",12),r.ac(18,"div",5),r.Vb(19,"dft-label-validation",13),r.Zb(),r.ac(20,"div",14),r.ac(21,"button",15),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(22,"i",16),r.ac(23,"span",17),r.Rc(24,"X\xf3a"),r.Zb(),r.Zb(),r.ac(25,"button",18),r.ic("click",(function(){return e.addTaiSan()})),r.Vb(26,"i",19),r.ac(27,"span",17),r.Rc(28,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(29,"div"),r.ac(30,"p-table",20,21),r.ic("onLazyLoad",(function(a){return e.getDataPage(a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(32,Sa,19,0,"ng-template",22),r.Pc(33,ya,28,29,"ng-template",23),r.Pc(34,ka,3,1,"ng-template",24),r.Zb(),r.Zb(),r.Zb(),r.ac(35,"abp-modal-footer",25),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","Khai b\xe1o s\u1eed d\u1ee5ng T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian b\u1eaft \u0111\u1ea7u s\u1eed d\u1ee5ng *"),r.Ib(1),r.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung s\u1eed d\u1ee5ng *"),r.Ib(3),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",e.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o s\u1eed d\u1ee5ng"),r.Ib(2),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!(null!=e.records&&e.records.length))("iconName","fas fa-sun")("saveLabel","Khai b\xe1o")("cancelDisabled",e.saving))},directives:[m.z,m.q,m.i,M.a,T.a,q.a,m.p,m.g,z.a,m.b,m.k,Z.c,w.d,A.a,Z.e,Z.d],pipes:[I.a,n.d,n.e],styles:[""]}),Za),Ia=["dt"];function Da(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",23),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",24),r.Zb(),r.ac(4,"th",25),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",26),r.Zb(),r.ac(7,"th",27),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",28),r.Zb(),r.ac(10,"th",29),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",30),r.Zb(),r.ac(13,"th",31),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",32),r.Zb(),r.ac(16,"th",33),r.Vb(17,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function Ra(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",33),r.Vb(17,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit;r.Ib(2),r.Tc(" ",r.nc(3,6,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,8,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,10,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,12,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,14,t.phongBanQuanLy)," "),r.Ib(3),r.sc("value",t)}}function Va(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var _a,Pa=function(){return{standalone:!0}},Ba=((_a=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l){var s;return _classCallCheck(this,t),(s=e.call(this,a)).bsModalRef=n,s._lookupTableService=i,s._fb=o,s._taiSanChuaSuDungServiceProxy=c,s._taiSanDangSuDungServiceProxy=l,s.loading=!0,s.keyword="",s.saving=!1,s.records=[],s.arrTaiSanCheckedFromParent=[],s.arrTaiSanChecked=[],s.recordsForCheck=[],s.onSave=new r.q,s}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe((function(e){return a.listToChucId=e})),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)})),this._lookupTableService.getAllLoaiTaiSanTree().subscribe((function(e){a.loaiTaiSanItems=a.getTreeviewItem(e)}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"filterTrangThai",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,1===this.flag&&this._taiSanChuaSuDungServiceProxy.getAllByMaAndSerialNumber(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){t.setValueForRecords(a)})),2===this.flag&&this._taiSanDangSuDungServiceProxy.getAllByMaAndSerialNumberTsdsd(this.keyword,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,void 0,void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){t.setValueForRecords(a)})),this.loading=!1}},{key:"setValueForRecords",value:function(a){var e=this;a.items=this.permission.isGranted("Pages.QuanLyTaiSanTong")?a.items.filter((function(a){return!e.arrTaiSanCheckedFromParent.map((function(a){return a.id})).includes(a.id)&&a.thuHoi})):a.items.filter((function(a){return!e.arrTaiSanCheckedFromParent.map((function(a){return a.id})).includes(a.id)&&a.thuHoi&&e.listToChucId.includes(a.toChucId)})),this.records=a.items,this.totalCount=a.totalCount}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.bsModalRef.hide(),this.onSave.emit())}}]),t}(c.a)).\u0275fac=function(a){return new(a||_a)(r.Ub(r.u),r.Ub(u.a),r.Ub(s.T),r.Ub(m.d),r.Ub(s.lb),r.Ub(s.mb))},_a.\u0275cmp=r.Ob({type:_a,selectors:[["app-them-thu-hoi-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Ia,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{recordsForCheck:"recordsForCheck",onSave:"onSave"},features:[r.Fb],decls:27,vars:22,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-12"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[2,"margin-top","20px"],["scrollHeight","300px",3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.close()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("ngModelChange",(function(a){return e.keyword=a}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",4),r.ac(12,"div",11),r.ac(13,"div",12),r.Vb(14,"dft-label-validation",13),r.ac(15,"app-dropdown-treeview-select",14),r.ic("valueChange",(function(a){return e.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",12),r.Vb(18,"dft-label-validation",13),r.ac(19,"app-multiple-select-tree",15),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",16),r.ac(21,"p-table",17,18),r.ic("onLazyLoad",(function(a){return e.getDataPage(!1,a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(23,Da,18,0,"ng-template",19),r.Pc(24,Ra,18,16,"ng-template",20),r.Pc(25,Va,3,1,"ng-template",21),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"abp-modal-footer",22),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","Th\xeam T\xe0i s\u1ea3n thu h\u1ed3i"),r.Ib(8),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number")("ngModel",e.keyword)("ngModelOptions",r.vc(21,Pa)),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!e.arrTaiSanChecked.length))},directives:[m.z,m.q,m.i,M.a,m.b,m.p,m.s,T.a,y.a,S.a,Z.c,w.d,A.a,Z.b,Z.a,Z.e,Z.d],pipes:[I.a],styles:[""]}),_a),xa=["dt"];function Na(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",26),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",27),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",28),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Zb(),r.ac(7,"th",28),r.Rc(8,"Lo\u1ea1i t\xe0i s\u1ea3n"),r.Zb(),r.ac(9,"th",28),r.Rc(10,"Serial Number"),r.Zb(),r.ac(11,"th",28),r.Rc(12,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.ac(13,"th",28),r.Rc(14,"Ng\xe0y mua"),r.Zb(),r.ac(15,"th",28),r.Rc(16,"Nguy\xean gi\xe1"),r.Zb(),r.ac(17,"th",29),r.Rc(18,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Zb(),r.Zb())}function La(a,e){if(1&a&&(r.ac(0,"tr",30),r.ac(1,"td",26),r.Vb(2,"p-tableCheckbox",31),r.Zb(),r.ac(3,"td",27),r.Rc(4),r.Zb(),r.ac(5,"td",28),r.Rc(6),r.mc(7,"truncate"),r.Zb(),r.ac(8,"td",28),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",28),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",28),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",28),r.Rc(18),r.mc(19,"date"),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",28),r.Rc(22),r.mc(23,"number"),r.mc(24,"truncate"),r.Zb(),r.ac(25,"td",29),r.Rc(26),r.mc(27,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",n+1," "),r.Ib(2),r.Tc(" ",r.nc(7,9,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(10,11,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(13,13,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(16,15,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(19,17,r.nc(20,20,t.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(23,22,r.nc(24,25,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(27,27,t.phongBanQuanLy)," ")}}function Oa(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",32),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var Ma,Aa=((Ma=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l,u){var b;return _classCallCheck(this,t),(b=e.call(this,a))._fb=n,b.bsModalRef=i,b._lookupTableService=o,b._modalService=c,b._taiSanChuaSuDungServiceProxy=l,b._sendMail=u,b.loading=!0,b.onSave=new r.q,b.records=[],b.taiSans=[],b.saving=!1,b.totalCount=0,b.arrTaiSanChecked=[],b.createInputDto=new s.eb,b}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),this.count>0&&this.showExistMessage("Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn ch\u1ee9a t\xe0i s\u1ea3n kh\xf4ng \u0111\u01b0\u1ee3c ph\xe9p thu h\u1ed3i"),Object(L.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0)).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.toChucItems=a.getTreeviewItem(t)}))}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.maxLength(4e3),Object(z.b)()]]})}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanChuaSuDungServiceProxy.capPhatTaiSan(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){0===e?a.showExistMessage("L\u1ed7i"):(a.showSuccessMessage("Thu h\u1ed3i th\xe0nh c\xf4ng"),a._sendMail.sendMailThuHoi(void 0,a.records).subscribe((function(a){})),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.ThuHoi,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"deleteTaiSan",value:function(){}},{key:"addTaiSan",value:function(){this._showCreateOrEditDemoDialog(1===this.flag?1:2)}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this;(e=this._modalService.show(Ba,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{flag:a,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getDataPage",value:function(a){this.loading=!0,1===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),2===this.flag&&(this.records=this.taiSans,this.totalCount=this.records.length,this.loading=!1),this.loading=!1}}]),t}(c.a)).\u0275fac=function(a){return new(a||Ma)(r.Ub(r.u),r.Ub(m.d),r.Ub(u.a),r.Ub(s.T),r.Ub(u.b),r.Ub(s.lb),r.Ub(s.V))},Ma.\u0275cmp=r.Ob({type:Ma,selectors:[["app-thu-hoi-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(xa,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:36,vars:30,consts:[["autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],["createUserModal","ngForm"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"ui-fluid","row"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[3,"control"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","maxlength","4000","rows","4",1,"form-control"],[1,"row","ui-fluid"],[3,"form","title"],[1,"col-md-6","text-right"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[1,"m-l-5"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[3,"value","lazy","loading","showCurrentPageReport","rows","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"],[1,"width-30"],[1,"width-100"],[1,"width-150"],[1,"width-250"],[1,"ui-selectable-row"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0,1),r.ic("ngSubmit",(function(){return e.save()})),r.ac(2,"abp-modal-header",2),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.Vb(7,"dft-label-validation",7),r.Vb(8,"p-calendar",8),r.Vb(9,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(10,"div",4),r.ac(11,"div",10),r.ac(12,"div",6),r.Vb(13,"dft-label-validation",7),r.Vb(14,"br"),r.Vb(15,"textarea",11),r.Vb(16,"dft-validation",9),r.Zb(),r.Zb(),r.Zb(),r.ac(17,"div",12),r.ac(18,"div",5),r.Vb(19,"dft-label-validation",13),r.Zb(),r.ac(20,"div",14),r.ac(21,"button",15),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(22,"i",16),r.ac(23,"span",17),r.Rc(24,"X\xf3a"),r.Zb(),r.Zb(),r.ac(25,"button",18),r.ic("click",(function(){return e.addTaiSan()})),r.Vb(26,"i",19),r.ac(27,"span",17),r.Rc(28,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(29,"div"),r.ac(30,"p-table",20,21),r.ic("onLazyLoad",(function(a){return e.getDataPage(a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(32,Na,19,0,"ng-template",22),r.Pc(33,La,28,29,"ng-template",23),r.Pc(34,Oa,3,1,"ng-template",24),r.Zb(),r.Zb(),r.Zb(),r.ac(35,"abp-modal-footer",25),r.ic("onCancelClick",(function(){return e.close()})),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(2),r.sc("title","Thu h\u1ed3i T\xe0i s\u1ea3n"),r.Ib(5),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian thu h\u1ed3i *"),r.Ib(1),r.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung thu h\u1ed3i"),r.Ib(3),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(3),r.sc("form",e.form)("title","Danh s\xe1ch t\xe0i s\u1ea3n thu h\u1ed3i"),r.Ib(2),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(9),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("lazy",!0)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked),r.Ib(5),r.sc("cancelDisabled",e.saving)("saveDisabled",!(null!=e.records&&e.records.length))("iconName","fas fa-retweet")("saveLabel","Thu h\u1ed3i")("cancelDisabled",e.saving))},directives:[m.z,m.q,m.i,M.a,T.a,q.a,m.p,m.g,z.a,m.b,m.k,Z.c,w.d,A.a,Z.e,Z.d],pipes:[I.a,n.d,n.e],styles:[""]}),Ma),Fa=["dt"];function Ha(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",36),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",36),r.ac(4,"th",37),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",38),r.Zb(),r.ac(7,"th",39),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",40),r.Zb(),r.ac(10,"th",41),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",42),r.Zb(),r.ac(13,"th",43),r.Rc(14,"Serial Number "),r.Vb(15,"p-sortIcon",44),r.Zb(),r.ac(16,"th",45),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",46),r.Zb(),r.ac(19,"th",47),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",48),r.Zb(),r.ac(22,"th",49),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",50),r.Zb(),r.ac(25,"th",51),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",52),r.Zb(),r.ac(28,"th",53),r.Rc(29,"M\xe3 s\u1eed d\u1ee5ng "),r.Vb(30,"p-sortIcon",54),r.Zb(),r.ac(31,"th",55),r.Rc(32,"V\u1ecb tr\xed t\xe0i s\u1ea3n "),r.Vb(33,"p-sortIcon",56),r.Zb(),r.Zb())}function Ka(a,e){if(1&a){var t=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().capPhat(a,1)})),r.Rc(1,"C\u1ea5p ph\xe1t"),r.Zb()}}function Ea(a,e){if(1&a){var t=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().dieuChuyen(a)})),r.Rc(1,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb()}}function Ua(a,e){if(1&a){var t=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().thuHoi(a)})),r.Rc(1,"Thu h\u1ed3i"),r.Zb()}}function Ga(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",57),r.ac(1,"td",36),r.ac(2,"p-tableCheckbox",58),r.ic("selected",(function(){return r.Ic(t),r.lc().checkVisibleCapPhat()})),r.Zb(),r.Zb(),r.ac(3,"td",36),r.ac(4,"div",59),r.ac(5,"button",60),r.Vb(6,"i",61),r.Zb(),r.ac(7,"div",62),r.ac(8,"a",63),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,Ka,2,0,"a",64),r.Pc(11,Ea,2,0,"a",64),r.Pc(12,Ua,2,0,"a",64),r.ac(13,"a",63),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().khaiBaoSuDung(a)})),r.Rc(14,"Khai b\xe1o s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(15,"td",65),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",65),r.Rc(19),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",65),r.Rc(22),r.mc(23,"truncate"),r.Zb(),r.ac(24,"td",66),r.Rc(25),r.mc(26,"truncate"),r.Zb(),r.ac(27,"td",66),r.Rc(28),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",65),r.Rc(31),r.mc(32,"date"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",65),r.Rc(35),r.mc(36,"number"),r.mc(37,"truncate"),r.Zb(),r.ac(38,"td",67),r.Rc(39),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",65),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.ac(44,"td",67),r.Rc(45),r.mc(46,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit;r.Ib(2),r.sc("value",n),r.Ib(8),r.sc("ngIf",n.capPhat),r.Ib(1),r.sc("ngIf",n.dieuChuyen),r.Ib(1),r.sc("ngIf",n.thuHoi),r.Ib(4),r.Tc(" ",r.nc(17,14,n.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(20,16,n.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(23,18,n.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(26,20,n.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(29,22,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(32,24,r.nc(33,27,n.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(36,29,r.nc(37,32,n.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(40,34,n.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(43,36,n.maSuDung)," "),r.Ib(3),r.Tc(" ",r.nc(46,38,n.viTriTaiSan)," ")}}function ja(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",68),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var za,qa=function(){return{standalone:!0}},Qa=((za=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var r;return _classCallCheck(this,t),(r=e.call(this,a))._taiSanChuaSuDungServiceProxy=n,r._fb=i,r._lookupTableService=o,r._modalService=c,r.isActive=0,r.loading=!0,r.exporting=!1,r.keyword="",r.totalCount=0,r.records=[],r.arrTaiSanChecked=[],r}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;1===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)})),this.khoiTaoForm(),this._lookupTableService.getAllToChucIdTheoNguoiDungList(!0).subscribe((function(e){return a.listToChucId=e})),this.isGranted("Pages.QuanLyTaiSanTong")?Object(L.a)(this._lookupTableService.getAllToChucTree(),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe((function(e){var t=_slicedToArray(e,4),n=(t[0],t[1]),i=t[2],o=t[3];a.loaiTaiSanItems=a.getTreeviewItem(n),a.nhaCungCaps=i,a.maSuDungs=o})):Object(L.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe((function(e){var t=_slicedToArray(e,4),n=(t[0],t[1]),i=t[2],o=t[3];a.loaiTaiSanItems=a.getTreeviewItem(n),a.nhaCungCaps=i,a.maSuDungs=o}))}},{key:"checkVisibleCapPhat",value:function(){return 0===this.arrTaiSanChecked.filter((function(a){return a.capPhat})).length}},{key:"checkVisibleDieuChuyen",value:function(){return 0===this.arrTaiSanChecked.filter((function(a){return a.dieuChuyen})).length}},{key:"checkVisibleThuHoi",value:function(){return 0===this.arrTaiSanChecked.filter((function(a){return a.thuHoi})).length}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({NccDropdownMultiple:[""],NhaCungCap:[""],MaSuDung:[""],DropDownTreeViewToChuc:[""],DropDownTreeViewLoaiTaiSan:[""]})}},{key:"getDataPage",value:function(a,e){var t,n,i=this;this.loading=!0,this._taiSanChuaSuDungServiceProxy.getAll(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,null===(t=this.form.controls.NhaCungCap.value)||void 0===t?void 0:t.id,null===(n=this.form.controls.MaSuDung.value)||void 0===n?void 0:n.id,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){i.loading=!1}))).subscribe((function(a){i.records=a.items,void 0!==i.toChucValue||i.permission.isGranted("Pages.QuanLyTaiSanTong")||(i.records=i.records.filter((function(a){return i.listToChucId.includes(a.toChucId)}))),i.totalCount=a.totalCount}))}},{key:"searchTrangThaiMaSuDung",value:function(a){var e=this,t=a.query;this._lookupTableService.getAllTinhTrangMaSuDungTaiSan().subscribe((function(a){e.maSuDungs=e.filterTrangThai(t,a)}))}},{key:"searchTrangThaiNhaCungCap",value:function(a){var e=this,t=a.query;this._lookupTableService.getAllNhaCungCap().subscribe((function(a){e.nhaCungCaps=e.filterTrangThai(t,a)}))}},{key:"filterTrangThai",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"_showCreateOrEditDemoDialog",value:function(a,e,t,n){var i,o=this;t===N.TrangThaiTaiSanConst.CapPhat&&(i=this._modalService.show(Y,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),t===N.TrangThaiTaiSanConst.DieuChuyen&&(i=this._modalService.show(da,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),t===N.TrangThaiTaiSanConst.ThuHoi&&(i=this._modalService.show(Aa,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),t===N.TrangThaiTaiSanConst.TaiSanDangSuDung&&(i=this._modalService.show(wa,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),i.content.onSave.subscribe((function(){o.getDataPage(!1),o.arrTaiSanChecked=[]}))}},{key:"capPhat",value:function(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,0)}},{key:"capPhatMultiple",value:function(){var a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.CapPhat);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,a)}},{key:"dieuChuyen",value:function(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,0)}},{key:"dieuChuyenMultiple",value:function(){var a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.DieuChuyen);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,a)}},{key:"removeTaiSanChecked",value:function(a){var e=this,t=0;return a===N.TrangThaiTaiSanConst.CapPhat&&this.arrTaiSanChecked.forEach((function(a){a.capPhat||(t++,e.arrTaiSanChecked=e.arrTaiSanChecked.filter((function(e){return e!==a})))})),a===N.TrangThaiTaiSanConst.DieuChuyen&&this.arrTaiSanChecked.forEach((function(a){a.dieuChuyen||(t++,e.arrTaiSanChecked=e.arrTaiSanChecked.filter((function(e){return e!==a})))})),a===N.TrangThaiTaiSanConst.ThuHoi&&this.arrTaiSanChecked.forEach((function(a){a.thuHoi||(t++,e.arrTaiSanChecked=e.arrTaiSanChecked.filter((function(e){return e!==a})))})),t}},{key:"thuHoi",value:function(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,0)}},{key:"thuHoiMultiple",value:function(){var a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.ThuHoi);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,a)}},{key:"khaiBaoSuDung",value:function(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.TaiSanDangSuDung,0)}},{key:"khaiBaoSuDungMultiple",value:function(){this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanChuaSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.TaiSanDangSuDung,0)}},{key:"pushTaiSan",value:function(a){this.arrTaiSanChecked=[],this.arrTaiSanChecked.push(a)}},{key:"view",value:function(a){this._viewTaiSan(a,!0)}},{key:"_viewTaiSan",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}}]),t}(c.a)).\u0275fac=function(a){return new(a||za)(r.Ub(r.u),r.Ub(s.lb),r.Ub(m.d),r.Ub(s.T),r.Ub(u.b))},za.\u0275cmp=r.Ob({type:za,selectors:[["app-tai-san-chua-su-dung"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Fa,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:58,vars:40,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],[1,"ui-fluid","row",3,"formGroup"],["formControlName","NhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","MaSuDung","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"fas","fa-external-link-square-alt"],[1,"fas","fa-exchange-alt"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-retweet"],[2,"margin-left","10px"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-200"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-200"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-250"],["field","phongBanQuanLy"],["pSortableColumn","maSuDung",1,"width-150"],["field","maSuDung"],["pSortableColumn","viTriTaiSan",1,"width-250"],["field","viTriTaiSan"],[1,"ui-selectable-row"],[3,"value","selected"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[1,"width-200"],[1,"width-250"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n ch\u01b0a s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(7,"section",4),r.ac(8,"div",1),r.ac(9,"div",5),r.ac(10,"div",6),r.ac(11,"div",7),r.ac(12,"div",8),r.ac(13,"button",9),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(14,"i",10),r.Zb(),r.Zb(),r.ac(15,"input",11),r.ic("ngModelChange",(function(a){return e.keyword=a}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(16,"div",12),r.ac(17,"div",13),r.ac(18,"div",14),r.Vb(19,"dft-label-validation",15),r.ac(20,"app-multiple-select-tree",16),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(21,"div",13),r.ac(22,"div",14),r.Vb(23,"dft-label-validation",15),r.ac(24,"app-dropdown-treeview-select",17),r.ic("valueChange",(function(a){return e.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(25,"div",18),r.ac(26,"div",13),r.ac(27,"div",14),r.Vb(28,"dft-label-validation",15),r.Vb(29,"p-dropdown",19),r.Zb(),r.Zb(),r.ac(30,"div",13),r.ac(31,"div",14),r.Vb(32,"dft-label-validation",15),r.Vb(33,"p-dropdown",20),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div",21),r.ac(35,"div",22),r.ac(36,"button",23),r.ic("click",(function(){return e.khaiBaoSuDungMultiple()})),r.Vb(37,"i",24),r.ac(38,"span",25),r.Rc(39,"Khai b\xe1o s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.ac(40,"button",23),r.ic("click",(function(){return e.capPhatMultiple()})),r.Vb(41,"i",26),r.ac(42,"span",25),r.Rc(43,"C\u1ea5p ph\xe1t"),r.Zb(),r.Zb(),r.ac(44,"button",23),r.ic("click",(function(){return e.dieuChuyenMultiple()})),r.Vb(45,"i",27),r.ac(46,"span",25),r.Rc(47,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb(),r.Zb(),r.ac(48,"button",28),r.ic("click",(function(){return e.thuHoiMultiple()})),r.Vb(49,"i",29),r.ac(50,"span",30),r.Rc(51,"Thu h\u1ed3i"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(52,"div"),r.ac(53,"p-table",31,32),r.ic("onLazyLoad",(function(a){return e.getDataPage(!1,a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(55,Ha,34,0,"ng-template",33),r.Pc(56,Ga,47,40,"ng-template",34),r.Pc(57,ja,3,1,"ng-template",35),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(15),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1")("ngModel",e.keyword)("ngModelOptions",r.vc(39,qa)),r.Ib(4),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(1),r.sc("formGroup",e.form),r.Ib(3),r.sc("form",e.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",e.nhaCungCaps)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("form",e.form)("title","M\xe3 s\u1eed d\u1ee5ng"),r.Ib(1),r.sc("options",e.maSuDungs)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(4),r.sc("disabled",e.checkVisibleCapPhat()),r.Ib(4),r.sc("disabled",e.checkVisibleDieuChuyen()),r.Ib(4),r.sc("disabled",e.checkVisibleThuHoi()),r.Ib(5),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked))},directives:[m.b,m.p,m.s,T.a,S.a,y.a,m.q,m.i,k.a,m.g,Z.c,w.d,Z.e,Z.b,Z.a,Z.d,n.l],pipes:[I.a,n.d,n.e],styles:[".margin_top10[_ngcontent-%COMP%]{margin-top:10px}"],data:{animation:[Object(h.b)()]}}),za),$a=["dt"];function Xa(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",39),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",39),r.ac(4,"th",40),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",41),r.Zb(),r.ac(7,"th",42),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",43),r.Zb(),r.ac(10,"th",44),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",45),r.Zb(),r.ac(13,"th",46),r.Rc(14,"Serial Number "),r.Vb(15,"p-sortIcon",47),r.Zb(),r.ac(16,"th",48),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",49),r.Zb(),r.ac(19,"th",50),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",51),r.Zb(),r.ac(22,"th",52),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",53),r.Zb(),r.ac(25,"th",54),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",55),r.Zb(),r.ac(28,"th",56),r.Rc(29,"M\xe3 s\u1eed d\u1ee5ng "),r.Vb(30,"p-sortIcon",57),r.Zb(),r.ac(31,"th",58),r.Rc(32,"V\u1ecb tr\xed t\xe0i s\u1ea3n "),r.Vb(33,"p-sortIcon",59),r.Zb(),r.Zb())}function Ja(a,e){if(1&a){var t=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().capPhat(a,1)})),r.Rc(1,"C\u1ea5p ph\xe1t"),r.Zb()}}function Wa(a,e){if(1&a){var t=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().dieuChuyen(a)})),r.Rc(1,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb()}}function Ya(a,e){if(1&a){var t=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().thuHoi(a)})),r.Rc(1,"Thu h\u1ed3i"),r.Zb()}}function ae(a,e){if(1&a){var t=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().hoanTac(a)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function ee(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",60),r.ac(1,"td",39),r.ac(2,"p-tableCheckbox",61),r.ic("selected",(function(){return r.Ic(t),r.lc().checkVisibleCapPhat()})),r.Zb(),r.Zb(),r.ac(3,"td",39),r.ac(4,"div",62),r.ac(5,"button",63),r.Vb(6,"i",64),r.Zb(),r.ac(7,"div",65),r.ac(8,"a",66),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,Ja,2,0,"a",67),r.Pc(11,Wa,2,0,"a",67),r.Pc(12,Ya,2,0,"a",67),r.Pc(13,ae,2,0,"a",67),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"td",68),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",68),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",68),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",69),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",69),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.ac(29,"td",68),r.Rc(30),r.mc(31,"date"),r.mc(32,"truncate"),r.Zb(),r.ac(33,"td",68),r.Rc(34),r.mc(35,"number"),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",70),r.Rc(38),r.mc(39,"truncate"),r.Zb(),r.ac(40,"td",68),r.Rc(41),r.mc(42,"truncate"),r.Zb(),r.ac(43,"td",70),r.Rc(44),r.mc(45,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit,i=r.lc();r.Ib(2),r.sc("value",n),r.Ib(8),r.sc("ngIf",n.capPhat),r.Ib(1),r.sc("ngIf",n.dieuChuyen),r.Ib(1),r.sc("ngIf",n.thuHoi),r.Ib(1),r.sc("ngIf",i.checkHoanTac(n)),r.Ib(2),r.Tc(" ",r.nc(16,15,n.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(19,17,n.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,19,n.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(25,21,n.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(28,23,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(31,25,r.nc(32,28,n.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(35,30,r.nc(36,33,n.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(39,35,n.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(42,37,n.maSuDung)," "),r.Ib(3),r.Tc(" ",r.nc(45,39,n.viTriTaiSan)," ")}}function te(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",71),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var ne,ie=function(){return{standalone:!0}},oe=((ne=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var r;return _classCallCheck(this,t),(r=e.call(this,a))._taiSanDangSuDungServiceProxy=n,r._fb=i,r._lookupTableService=o,r._modalService=c,r.isActive=0,r.loading=!0,r.exporting=!1,r.keyword="",r.totalCount=0,r.records=[],r.arrTaiSanChecked=[],r.tenTaiSan="",r.checkTaiSan24h=r.showUndoButton,r}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;2===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)})),this.isGranted("Pages.QuanLyTaiSanTong")?Object(L.a)(this._lookupTableService.getAllToChucTree(),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe((function(e){var t=_slicedToArray(e,4),n=(t[0],t[1]),i=t[2],o=t[3];a.loaiTaiSanItems=a.getTreeviewItem(n),a.nhaCungCaps=i,a.maSuDungs=o})):Object(L.a)(this._lookupTableService.getAllToChucTheoNguoiDungTree(!0),this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTinhTrangMaSuDungTaiSan()).subscribe((function(e){var t=_slicedToArray(e,4),n=(t[0],t[1]),i=t[2],o=t[3];a.loaiTaiSanItems=a.getTreeviewItem(n),a.nhaCungCaps=i,a.maSuDungs=o})),this.khoiTaoForm()}},{key:"checkVisibleCapPhat",value:function(){return 0===this.arrTaiSanChecked.filter((function(a){return a.capPhat})).length}},{key:"checkVisibleDieuChuyen",value:function(){return 0===this.arrTaiSanChecked.filter((function(a){return a.dieuChuyen})).length}},{key:"checkVisibleThuHoi",value:function(){return 0===this.arrTaiSanChecked.filter((function(a){return a.thuHoi})).length}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({NccDropdownMultiple:[],NhaCungCap:[],MaSuDung:[],DropDownTreeViewToChuc:[],DropDownTreeViewLoaiTaiSan:[]})}},{key:"getDataPage",value:function(a,e){var t,n,i=this;this.loading=!0,this._taiSanDangSuDungServiceProxy.getAll(this.keyword||void 0,this.toChucValue||void 0,this.loaiTaiSanValue||void 0,(null===(t=this.form.controls.NhaCungCap.value)||void 0===t?void 0:t.id)||void 0,(null===(n=this.form.controls.MaSuDung.value)||void 0===n?void 0:n.id)||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){i.loading=!1}))).subscribe((function(a){i.totalCount=a.totalCount,i.records=a.items,void 0!==i.toChucValue||i.permission.isGranted("Pages.QuanLyTaiSanTong")||(i.records=i.records.filter((function(a){return i.listToChucId.includes(a.toChucId)})))}))}},{key:"searchTrangThaiMaSuDung",value:function(a){var e=this,t=a.query;this._lookupTableService.getAllTinhTrangMaSuDungTaiSan().subscribe((function(a){e.maSuDungs=e.filterTrangThai(t,a)}))}},{key:"searchTrangThaiNhaCungCap",value:function(a){var e=this,t=a.query;this._lookupTableService.getAllNhaCungCap().subscribe((function(a){e.nhaCungCaps=e.filterTrangThai(t,a)}))}},{key:"filterTrangThai",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"_showCreateOrEditDemoDialog",value:function(a,e,t,n){var i,o=this;t===N.TrangThaiTaiSanConst.CapPhat&&(i=this._modalService.show(Y,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),t===N.TrangThaiTaiSanConst.DieuChuyen&&(i=this._modalService.show(da,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),t===N.TrangThaiTaiSanConst.ThuHoi&&(i=this._modalService.show(Aa,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),t===N.TrangThaiTaiSanConst.TaiSanDangSuDung&&(i=this._modalService.show(wa,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{taiSans:e,flag:a,count:n}})),i.content.onSave.subscribe((function(){o.getDataPage(!1),o.arrTaiSanChecked=[]}))}},{key:"capPhat",value:function(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,0)}},{key:"capPhatMultiple",value:function(){var a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.CapPhat);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.CapPhat,a)}},{key:"dieuChuyen",value:function(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,0)}},{key:"dieuChuyenMultiple",value:function(){var a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.DieuChuyen);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.DieuChuyen,a)}},{key:"removeTaiSanChecked",value:function(a){var e=this,t=0;return a===N.TrangThaiTaiSanConst.CapPhat&&this.arrTaiSanChecked.forEach((function(a){a.capPhat||(t++,e.arrTaiSanChecked=e.arrTaiSanChecked.filter((function(e){return e!==a})))})),a===N.TrangThaiTaiSanConst.DieuChuyen&&this.arrTaiSanChecked.forEach((function(a){a.dieuChuyen||(t++,e.arrTaiSanChecked=e.arrTaiSanChecked.filter((function(e){return e!==a})))})),a===N.TrangThaiTaiSanConst.ThuHoi&&this.arrTaiSanChecked.forEach((function(a){a.thuHoi||(t++,e.arrTaiSanChecked=e.arrTaiSanChecked.filter((function(e){return e!==a})))})),t}},{key:"thuHoi",value:function(a){this.pushTaiSan(a),this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,0)}},{key:"thuHoiMultiple",value:function(){var a=this.removeTaiSanChecked(N.TrangThaiTaiSanConst.ThuHoi);this._showCreateOrEditDemoDialog(N.TrangThaiTabConst.TaiSanDangSuDung,this.arrTaiSanChecked,N.TrangThaiTaiSanConst.ThuHoi,a)}},{key:"deleteArrTaiSanChecked",value:function(){var a=this;this.tenTaiSan=this.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.ngayKhaiBao)})).map((function(a){return a.tenTaiSan})).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o s\u1eed d\u1ee5ng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(e){e.value&&a.clearArrChecked(a.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.ngayKhaiBao)})))}))}},{key:"checkHoanTac",value:function(a){return!!this.checkTaiSan24h(a.ngayKhaiBao)}},{key:"hoanTac",value:function(a){var e=this;this.tenTaiSan=!0===this.checkTaiSan24h(a.ngayKhaiBao)?a.tenTaiSan:"",this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+this.tenTaiSan+" s\u1ebd ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o s\u1eed d\u1ee5ng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(t){t.value&&(e.clearArrChecked(e.arrTaiSanChecked.filter((function(a){return e.checkTaiSan24h(a.ngayKhaiBao)}))),e._lookupTableService.deleteTaiSan(a.id).subscribe((function(){e.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),e.getDataPage(!1)})))}))}},{key:"checkVisibleHoanTac",value:function(){var a=this;return 0===this.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.ngayKhaiBao)})).length}},{key:"clearArrChecked",value:function(a){var e=this;this._taiSanDangSuDungServiceProxy.hoanTacTaiSanList(a.map((function(a){return a.id}))).subscribe((function(){e.arrTaiSanChecked=[],e.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),e.getDataPage(!1)}))}},{key:"pushTaiSan",value:function(a){this.arrTaiSanChecked=[],this.arrTaiSanChecked.push(a)}},{key:"view",value:function(a){this._viewTaiSan(a,!0)}},{key:"_viewTaiSan",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}}]),t}(c.a)).\u0275fac=function(a){return new(a||ne)(r.Ub(r.u),r.Ub(s.mb),r.Ub(m.d),r.Ub(s.T),r.Ub(u.b))},ne.\u0275cmp=r.Ob({type:ne,selectors:[["app-tai-san-dang-su-dung"]],viewQuery:function(a,e){var t;1&a&&r.Vc($a,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:60,vars:40,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelOptions","ngModelChange","keyup.enter"],["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup"],["createUserModal","ngForm"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],[1,"ui-fluid","row"],["formControlName","NhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","MaSuDung","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"fas","fa-external-link-square-alt"],["type","button",1,"btn","btn-primary","m-l-5",3,"disabled","click"],[1,"fas","fa-exchange-alt"],[1,"fas","fa-retweet"],[2,"margin-left","10px"],[3,"value","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selection","onLazyLoad","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-30"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-200"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-200"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-250"],["field","phongBanQuanLy"],["pSortableColumn","maSuDung",1,"width-150"],["field","maSuDung"],["pSortableColumn","viTriTaiSan",1,"width-250"],["field","viTriTaiSan"],[1,"ui-selectable-row"],[3,"value","selected"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[1,"width-200"],[1,"width-250"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n \u0111ang s\u1eed d\u1ee5ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(7,"section",4),r.ac(8,"div",1),r.ac(9,"div",5),r.ac(10,"div",6),r.ac(11,"div",7),r.ac(12,"div",8),r.ac(13,"button",9),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(14,"i",10),r.Zb(),r.Zb(),r.ac(15,"input",11),r.ic("ngModelChange",(function(a){return e.keyword=a}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(16,"form",12,13),r.ac(18,"div",14),r.ac(19,"div",15),r.ac(20,"div",16),r.Vb(21,"dft-label-validation",17),r.ac(22,"app-multiple-select-tree",18),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(23,"div",15),r.ac(24,"div",16),r.Vb(25,"dft-label-validation",17),r.ac(26,"app-dropdown-treeview-select",19),r.ic("valueChange",(function(a){return e.loaiTaiSanValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",20),r.ac(28,"div",15),r.ac(29,"div",16),r.Vb(30,"dft-label-validation",17),r.Vb(31,"p-dropdown",21),r.Zb(),r.Zb(),r.ac(32,"div",15),r.ac(33,"div",16),r.Vb(34,"dft-label-validation",17),r.Vb(35,"p-dropdown",22),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",23),r.ac(37,"div",24),r.ac(38,"button",25),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(39,"i",26),r.ac(40,"span",27),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.ac(42,"button",28),r.ic("click",(function(){return e.capPhatMultiple()})),r.Vb(43,"i",29),r.ac(44,"span",27),r.Rc(45,"C\u1ea5p ph\xe1t"),r.Zb(),r.Zb(),r.ac(46,"button",30),r.ic("click",(function(){return e.dieuChuyenMultiple()})),r.Vb(47,"i",31),r.ac(48,"span",27),r.Rc(49,"\u0110i\u1ec1u chuy\u1ec3n"),r.Zb(),r.Zb(),r.ac(50,"button",30),r.ic("click",(function(){return e.thuHoiMultiple()})),r.Vb(51,"i",32),r.ac(52,"span",33),r.Rc(53,"Thu h\u1ed3i"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(54,"div"),r.ac(55,"p-table",34,35),r.ic("onLazyLoad",(function(a){return e.getDataPage(!1,a)}))("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(57,Xa,34,0,"ng-template",36),r.Pc(58,ee,46,41,"ng-template",37),r.Pc(59,te,3,1,"ng-template",38),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(15),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1")("ngModel",e.keyword)("ngModelOptions",r.vc(39,ie)),r.Ib(1),r.sc("formGroup",e.form),r.Ib(5),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(4),r.sc("form",e.form)("title","Nh\xe0 cung c\u1ea5p"),r.Ib(1),r.sc("options",e.nhaCungCaps)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("form",e.form)("title","M\xe3 s\u1eed d\u1ee5ng"),r.Ib(1),r.sc("options",e.maSuDungs)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",e.checkVisibleHoanTac()),r.Ib(4),r.sc("disabled",e.checkVisibleCapPhat()),r.Ib(4),r.sc("disabled",e.checkVisibleDieuChuyen()),r.Ib(4),r.sc("disabled",e.checkVisibleThuHoi()),r.Ib(5),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable)("selection",e.arrTaiSanChecked))},directives:[m.b,m.p,m.s,m.z,m.q,m.i,T.a,S.a,y.a,k.a,m.g,Z.c,w.d,Z.e,Z.b,Z.a,Z.d,n.l],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),ne),ce=t("lJxs"),re=t("EnVa"),le=["dt"];function se(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function ue(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,t.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,n.models.TrangThaiTaiSanHienThiSorted[t.hinhThuc])," "),r.Ib(3),r.sc("value",t)}}function be(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function de(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.arrTaiSanChecked&&n.arrTaiSanChecked.length))}}var he,fe=((he=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var l;return _classCallCheck(this,t),(l=e.call(this,a))._taiSanServiceProxy=n,l._lookupTableService=i,l._fb=o,l.bsModalRef=c,l.enums=N,l.models=re,l.onSave=new r.q,l.saving=!1,l.isEdit=!1,l.isView=!1,l.loading=!0,l.exporting=!1,l.keyword="",l.totalCount=0,l.records=[],l.arrTaiSanCheckedFromParent=[],l.arrTaiSanChecked=[],l._unsubscribe=[],l}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.loaiTaiSanItems=a.getTreeviewItem(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){a.items=a.items.filter((function(a){return!t.arrTaiSanCheckedFromParent.some((function(e){return e.id===a.id}))})),t.records=a.items,t.totalCount=a.totalCount}))}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}},{key:"close",value:function(){this.bsModalRef.hide()}}]),t}(c.a)).\u0275fac=function(a){return new(a||he)(r.Ub(r.u),r.Ub(s.rb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a))},he.\u0275cmp=r.Ob({type:he,selectors:[["app-them-tai-san-sua-chua-bao-duong"]],viewQuery:function(a,e){var t;1&a&&r.Vc(le,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(23,se,21,0,"ng-template",17),r.Pc(24,ue,21,19,"ng-template",18),r.Pc(25,be,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,de,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,y.a,S.a,Z.c,w.d,n.l,Z.b,Z.a,Z.e,Z.d,A.a],pipes:[I.a],styles:[""],data:{animation:[Object(h.b)()]}}),he),ge=["dt"];function pe(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function me(a,e){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",r.nc(5,9,n+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,t.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,t.phongBanQuanLy)," ")}}function ve(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function Ce(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.records&&n.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}var Te,Se=((Te=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l){var u;return _classCallCheck(this,t),(u=e.call(this,a))._modalService=n,u._taiSanServiceProxy=i,u._lookupTableService=o,u._fb=c,u.bsModalRef=l,u.onSave=new r.q,u.saving=!1,u.isEdit=!1,u.isView=!1,u.createInputDto=new s.eb,u.loading=!0,u.exporting=!1,u.keyword="",u.totalCount=0,u.records=[],u.arrHinhThuc=[],u.arrTaiSanChecked=[],u}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.khoiTaoForm(),Object(L.a)(this._lookupTableService.getAllTrangThaiTaiSan()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.arrHinhThuc=t.filter((function(e){return e.id===a.enums.TrangThaiTaiSanConst.TaiSanSuaChua||e.id===a.enums.TrangThaiTaiSanConst.TaiSanBaoDuong}))}))}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({hinhThuc:["",m.y.required],thoiGianBatDau:[new Date,m.y.required],noiDungKhaiBaoSuaChuaBaoDuong:["",[m.y.required,m.y.maxLength(4e3),Object(z.b)()]],diaChiSuaChuaBaoDuong:["",[m.y.maxLength(4e3),Object(z.b)()]]})}},{key:"search",value:function(a,e){var t=this,n=a.query;"hinhThuc"===e&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===t.enums.TrangThaiTaiSanConst.TaiSanBaoDuong}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=this._modalService.show(fe,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:n,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanSuaChuaBaoDuong(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){1===e?a.showExistMessage("M\xe3 nh\xe0 cung c\u1ea5p \u0111\xe3 b\u1ecb tr\xf9ng!"):a.id?(a.showUpdateMessage(),a.bsModalRef.hide(),a.onSave.emit()):(a.showCreateMessage(),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"_getValueForSave",value:function(){var a=this,e=[];this.records.forEach((function(t){var n=new s.db;n.taiSanId=t.id,n.trangThaiId=a.enums.TrangThaiSuaChuaBaoDuongConst.DangThucHien,e.push(n)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.form.value.hinhThuc.id,ngayKhaiBao:this.form.value.thoiGianBatDau,noiDung:this.form.value.noiDungKhaiBaoSuaChuaBaoDuong,diaChi:this.form.value.diaChiSuaChuaBaoDuong,phieuTaiSanChiTietList:e})}}]),t}(c.a)).\u0275fac=function(a){return new(a||Te)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.rb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a))},Te.\u0275cmp=r.Ob({type:Te,selectors:[["app-create-or-edit-tai-san-sua-chua-bao-duong"]],viewQuery:function(a,e){var t;1&a&&r.Vc(ge,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:47,vars:29,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["formControlName","hinhThuc","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[3,"control"],["formControlName","thoiGianBatDau",3,"dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBaoSuaChuaBaoDuong","id","noiDungKhaiBaoSuaChuaBaoDuong","rows","4","maxlength","4000",1,"form-control"],["formControlName","diaChiSuaChuaBaoDuong","id","diaChiSuaChuaBaoDuong","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus"],[1,"m-l-5"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-50"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"p-dropdown",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",6),r.Vb(12,"p-calendar",9),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",10),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",6),r.Vb(18,"textarea",11),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",10),r.ac(22,"div",5),r.Vb(23,"dft-label-validation",6),r.Vb(24,"textarea",12),r.Vb(25,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(26,"div",3),r.ac(27,"div",4),r.ac(28,"label"),r.Rc(29,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o/ s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng"),r.Zb(),r.Zb(),r.ac(30,"div",4),r.ac(31,"div",13),r.ac(32,"button",14),r.ic("click",(function(){return e.create()})),r.Vb(33,"i",15),r.ac(34,"span",16),r.Rc(35,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(36,"button",17),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(37,"i",18),r.ac(38,"span",16),r.Rc(39,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(40,"div"),r.ac(41,"p-table",19,20),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(43,pe,26,0,"ng-template",21),r.Pc(44,me,29,31,"ng-template",22),r.Pc(45,ve,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(46,Ce,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title",e.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng":"Khai b\xe1o T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(5),r.sc("control",e.form.get("hinhThuc"))("title","H\xecnh th\u1ee9c *"),r.Ib(1),r.sc("options",e.arrHinhThuc)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(1),r.sc("control",e.form.get("hinhThuc")),r.Ib(3),r.sc("control",e.form.get("thoiGianBatDau"))("title","Th\u1eddi gian b\u1eaft \u0111\u1ea7u *"),r.Ib(1),r.sc("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianBatDau")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBaoSuaChuaBaoDuong"))("title","N\u1ed9i dung khai b\xe1o s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng *"),r.Ib(2),r.sc("control",e.form.get("noiDungKhaiBaoSuaChuaBaoDuong")),r.Ib(4),r.sc("control",e.form.get("diaChiSuaChuaBaoDuong"))("title","\u0110\u1ecba ch\u1ec9 s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(2),r.sc("control",e.form.get("diaChiSuaChuaBaoDuong")),r.Ib(11),r.sc("disabled",0===e.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("scrollable",e.scrollable),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,k.a,m.p,m.g,z.a,q.a,m.b,m.k,Z.c,w.d,n.l,Z.e,Z.b,Z.a,Z.d,A.a],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),Te),ye=["dt"];function ke(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",37),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",37),r.ac(4,"th",38),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",39),r.Zb(),r.ac(7,"th",40),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",41),r.Zb(),r.ac(10,"th",42),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",43),r.Zb(),r.ac(13,"th",44),r.Rc(14,"Nh\xe0 cung c\u1ea5p "),r.Vb(15,"p-sortIcon",45),r.Zb(),r.ac(16,"th",46),r.Rc(17,"Nguy\xean gi\xe1 "),r.Vb(18,"p-sortIcon",47),r.Zb(),r.ac(19,"th",48),r.Rc(20,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(21,"p-sortIcon",49),r.Zb(),r.ac(22,"th",50),r.Rc(23,"H\xecnh th\u1ee9c "),r.Vb(24,"p-sortIcon",51),r.Zb(),r.ac(25,"th",52),r.Rc(26,"L\xed do s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng "),r.Vb(27,"p-sortIcon",53),r.Zb(),r.ac(28,"th",54),r.Rc(29,"\u0110\u1ecba ch\u1ec9 s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng "),r.Vb(30,"p-sortIcon",55),r.Zb(),r.ac(31,"th",56),r.Rc(32,"Th\u1eddi gian b\u1eaft \u0111\u1ea7u "),r.Vb(33,"p-sortIcon",57),r.Zb(),r.ac(34,"th",58),r.Rc(35,"Tr\u1ea1ng th\xe1i "),r.Vb(36,"p-sortIcon",59),r.Zb(),r.Zb())}function Ze(a,e){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",69),r.Zb()),2&a){var t=r.lc().$implicit;r.Ib(1),r.sc("value",t)}}function we(a,e){if(1&a){var t=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().unsuccess(a)})),r.Rc(1,"Kh\xf4ng th\xe0nh c\xf4ng"),r.Zb()}}function Ie(a,e){if(1&a){var t=r.bc();r.ac(0,"a",66),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().delete(a)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function De(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",60),r.ac(1,"td",37),r.Pc(2,Ze,2,1,"div",61),r.Zb(),r.ac(3,"td",37),r.ac(4,"div",62),r.ac(5,"button",63),r.Vb(6,"i",64),r.Zb(),r.ac(7,"div",65),r.ac(8,"a",66),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.ac(10,"a",66),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().success(a)})),r.Rc(11,"Th\xe0nh c\xf4ng"),r.Zb(),r.Pc(12,we,2,0,"a",67),r.Pc(13,Ie,2,0,"a",67),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"td",68),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",68),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",68),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",68),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",68),r.Rc(27),r.mc(28,"number"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",68),r.Rc(31),r.mc(32,"truncate"),r.Zb(),r.ac(33,"td",68),r.Rc(34),r.mc(35,"truncate"),r.Zb(),r.ac(36,"td",68),r.Rc(37),r.mc(38,"truncate"),r.Zb(),r.ac(39,"td",68),r.Rc(40),r.mc(41,"truncate"),r.Zb(),r.ac(42,"td",68),r.Rc(43),r.mc(44,"date"),r.mc(45,"truncate"),r.Zb(),r.ac(46,"td",68),r.Rc(47),r.mc(48,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit,i=r.lc();r.Ib(2),r.sc("ngIf",i.showUndoButton(n.thoiGianBatDau)),r.Ib(10),r.sc("ngIf",n.trangThai!=i.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong),r.Ib(1),r.sc("ngIf",i.showUndoButton(n.thoiGianBatDau)&&n.trangThai!=i.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong),r.Ib(2),r.Tc(" ",r.nc(16,14,n.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,n.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,n.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,n.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(32,27,n.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(35,29,i.arrDonVi[n.hinhThuc])," "),r.Ib(3),r.Tc(" ",r.nc(38,31,n.liDoSuaChuaBaoDuong)," "),r.Ib(3),r.Tc(" ",r.nc(41,33,n.diaChiSuaChuaBaoDuong)," "),r.Ib(3),r.Tc(" ",r.oc(44,35,r.nc(45,38,n.thoiGianBatDau),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(48,40,i.models.TrangThaiSuaChuaBaoDuongSorted[n.trangThai])," ")}}function Re(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",70),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var Ve,_e=((Ve=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,r){var l;return _classCallCheck(this,t),(l=e.call(this,a))._modalService=n,l._taiSanServiceProxy=i,l._lookupTableService=o,l._fb=c,l._sendMail=r,l.isActive=0,l.loading=!0,l.exporting=!1,l.totalCount=0,l.records=[],l.arrDonVi=["","","","","","S\u1eeda ch\u1eefa","B\u1ea3o d\u01b0\u1ee1ng"],l.arrTaiSanChecked=[],l.selectedValues=[],l.tenTaiSan="",l._unsubscribe=[],l.checkTaiSan24h=l.showUndoButton,l}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;3===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap(),this._lookupTableService.getAllTrangThaiTaiSan(),this._lookupTableService.getAllTrangThaiSuaChuaBaoDuong()).subscribe((function(e){var t=_slicedToArray(e,4),n=t[0],i=t[1],o=t[2],c=t[3];a.loaiTaiSanItems=a.getTreeviewItem(n),a.arrNhaCungCap=i,a.arrHinhThuc=o.filter((function(e){return e.id===a.enums.TrangThaiTaiSanConst.TaiSanSuaChua||e.id===a.enums.TrangThaiTaiSanConst.TaiSanBaoDuong})),a.arrTrangThai=c.filter((function(e){return e.id===a.enums.TrangThaiSuaChuaBaoDuongConst.DangThucHien||e.id===a.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong}))}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t,n,i,o=this;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanSuaChuaBaoDuong(this.form.value.tenTaiSan||void 0,this.toChucValue,this.form.value.loaiTaiSan||void 0,(null===(t=this.form.value.nhaCungCap)||void 0===t?void 0:t.displayName)||void 0,(null===(n=this.form.value.hinhThuc)||void 0===n?void 0:n.id)||void 0,(null===(i=this.form.value.trangThai)||void 0===i?void 0:i.id)||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){o.loading=!1}))).subscribe((function(a){o.records=a.items,o.totalCount=a.totalCount}))}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"success",value:function(a){var e=this;a&&(a.trangThai=this.enums.TrangThaiSuaChuaBaoDuongConst.ThanhCong,this._taiSanServiceProxy.editTaiSanSuaChuaBaoDuong(a).subscribe((function(){e._sendMail.sendMailKetQuaBaoDuong(a).subscribe((function(a){})),e.getDataPage(!1),e.showUpdateMessage()})))}},{key:"unsuccess",value:function(a){var e=this;a&&(a.trangThai=this.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong,this._taiSanServiceProxy.editTaiSanSuaChuaBaoDuong(a).subscribe((function(){e._sendMail.sendMailKetQuaBaoDuong(a).subscribe((function(a){})),e.getDataPage(!1),e.showUpdateMessage()})))}},{key:"delete",value:function(a){var e=this;this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe((function(t){e.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:e.confirmButtonColor,cancelButtonColor:e.cancelButtonColor,cancelButtonText:e.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(t){t.value&&e.clearArrChecked([a])}))}))}},{key:"deleteArrTaiSanChecked",value:function(){var a=this;this.tenTaiSan=this.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})).map((function(a){return a.tenTaiSan})).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o s\u1eeda ch\u1eefa/b\u1ea3o d\u01b0\u1ee1ng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(e){e.value&&a.clearArrChecked(a.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})))}))}},{key:"clearArrChecked",value:function(a){var e=this;this._taiSanServiceProxy.hoanTacTaiSanSuaChuaBaoDuong(a.map((function(a){return{id:a.id}}))).subscribe((function(){e.arrTaiSanChecked=[],e.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),e.getDataPage(!1)}))}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(Se,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"view",value:function(a){this._showCreateOrEditTaiSanDialog(a,!0)}},{key:"_showCreateOrEditTaiSanDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"search",value:function(a,e){var t=this,n=a.query;switch(e){case"nhaCungCap":this._lookupTableService.getAllNhaCungCap().subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}));break;case"hinhThuc":this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===t.enums.TrangThaiTaiSanConst.TaiSanBaoDuong}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}));break;case"trangThai":this._lookupTableService.getAllTrangThaiSuaChuaBaoDuong().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiSuaChuaBaoDuongConst.DangThucHien||a.id===t.enums.TrangThaiSuaChuaBaoDuongConst.KhongThanhCong}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[],hinhThuc:[],trangThai:[]})}}]),t}(c.a)).\u0275fac=function(a){return new(a||Ve)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.rb),r.Ub(s.T),r.Ub(m.d),r.Ub(s.V))},Ve.\u0275cmp=r.Ob({type:Ve,selectors:[["app-tai-san-sua-chua-bao-duong"]],viewQuery:function(a,e){var t;1&a&&r.Vc(ye,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:60,vars:35,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[3,"formGroup"],[1,"card-body"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","hinhThuc","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","trangThai","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],["pSortableColumn","liDoSuaChuaBaoDuong",1,"width-150"],["field","liDoSuaChuaBaoDuong"],["pSortableColumn","diaChiSuaChuaBaoDuong",1,"width-150"],["field","diaChiSuaChuaBaoDuong"],["pSortableColumn","thoiGianBatDau",1,"width-150"],["field","thoiGianBatDau"],["pSortableColumn","trangThai",1,"width-150"],["field","trangThai"],[1,"ui-selectable-row"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/b\u1ea3o d\u01b0\u1ee1ng"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return e.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o s\u1eeda ch\u1eefa/ b\u1ea3o d\u01b0\u1ee1ng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"form",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.ac(25,"div",20),r.Vb(26,"dft-label-validation",21),r.ac(27,"app-multiple-select-tree",22),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(28,"div",19),r.ac(29,"div",20),r.Vb(30,"dft-label-validation",21),r.ac(31,"app-dropdown-treeview-select",23),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(32,"div",19),r.ac(33,"div",20),r.ac(34,"label",24),r.Rc(35,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(36,"p-dropdown",25),r.Zb(),r.Zb(),r.Zb(),r.ac(37,"div",18),r.ac(38,"div",19),r.ac(39,"div",20),r.ac(40,"label",24),r.Rc(41,"H\xecnh th\u1ee9c"),r.Zb(),r.Vb(42,"p-dropdown",26),r.Zb(),r.Zb(),r.ac(43,"div",19),r.ac(44,"div",20),r.ac(45,"label",24),r.Rc(46,"Tr\u1ea1ng th\xe1i"),r.Zb(),r.Vb(47,"p-dropdown",27),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(48,"div",28),r.ac(49,"div",29),r.ac(50,"button",30),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(51,"i",31),r.ac(52,"span",7),r.Rc(53,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(54,"div"),r.ac(55,"p-table",32,33),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(57,ke,37,0,"ng-template",34),r.Pc(58,De,49,42,"ng-template",35),r.Pc(59,Re,3,1,"ng-template",36),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",e.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, nguy\xean gi\xe1, \u0111\u1ecba ch\u1ec9 s\u1eeda ch\u1eefa b\u1ea3o d\u01b0\u1ee1ng"),r.Ib(1),r.sc("formGroup",e.form),r.Ib(5),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(5),r.sc("options",e.arrNhaCungCap)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(6),r.sc("options",e.arrHinhThuc)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(5),r.sc("options",e.arrTrangThai)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[C.a,m.z,m.q,m.i,T.a,S.a,y.a,k.a,m.p,m.g,Z.c,w.d,Z.e,Z.b,Z.a,n.l,Z.d],pipes:[I.a,n.e,n.d],styles:[""],data:{animation:[Object(h.b)()]}}),Ve),Pe=["dt"];function Be(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function xe(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,t.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,n.models.TrangThaiTaiSanHienThiSorted[t.hinhThuc])," "),r.Ib(3),r.sc("value",t)}}function Ne(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function Le(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.arrTaiSanChecked&&n.arrTaiSanChecked.length))}}var Oe,Me=((Oe=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var l;return _classCallCheck(this,t),(l=e.call(this,a))._taiSanServiceProxy=n,l._lookupTableService=i,l._fb=o,l.bsModalRef=c,l.enums=N,l.models=re,l.onSave=new r.q,l.saving=!1,l.isEdit=!1,l.isView=!1,l.loading=!0,l.exporting=!1,l.keyword="",l.totalCount=0,l.records=[],l.arrTaiSanCheckedFromParent=[],l.arrTaiSanChecked=[],l._unsubscribe=[],l}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.loaiTaiSanItems=a.getTreeviewItem(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){a.items=a.items.filter((function(a){return!t.arrTaiSanCheckedFromParent.some((function(e){return e.id===a.id}))})),t.records=a.items,t.totalCount=a.totalCount}))}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}},{key:"close",value:function(){this.bsModalRef.hide()}}]),t}(c.a)).\u0275fac=function(a){return new(a||Oe)(r.Ub(r.u),r.Ub(s.qb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a))},Oe.\u0275cmp=r.Ob({type:Oe,selectors:[["app-them-tai-san-mat"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Pe,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(23,Be,21,0,"ng-template",17),r.Pc(24,xe,21,19,"ng-template",18),r.Pc(25,Ne,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,Le,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o m\u1ea5t"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,y.a,S.a,Z.c,w.d,n.l,Z.b,Z.a,Z.e,Z.d,A.a],pipes:[I.a],styles:[""],data:{animation:[Object(h.b)()]}}),Oe),Ae=t("7kUa"),Fe=["dt"];function He(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function Ke(a,e){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",r.nc(5,9,n+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,t.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,t.phongBanQuanLy)," ")}}function Ee(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function Ue(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.records&&n.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}var Ge,je=((Ge=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l,u){var b;return _classCallCheck(this,t),(b=e.call(this,a))._modalService=n,b._taiSanServiceProxy=i,b._lookupTableService=o,b._fb=c,b.bsModalRef=l,b._sendMail=u,b.onSave=new r.q,b.saving=!1,b.isEdit=!1,b.isView=!1,b.createInputDto=new s.eb,b.loading=!0,b.exporting=!1,b.keyword="",b.totalCount=0,b.records=[],b.arrTaiSanChecked=[],b}return _createClass(t,[{key:"ngOnInit",value:function(){this.khoiTaoForm()}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,m.y.required],thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.required,m.y.maxLength(4e3),Object(z.b)()]]})}},{key:"search",value:function(a,e){var t=this,n=a.query;"hinhThuc"===e&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===t.enums.TrangThaiTaiSanConst.TaiSanBaoDuong}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=this._modalService.show(Me,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:n,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanMat(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){1===e?a.showExistMessage("L\u1ed7i"):a.id?(a.showUpdateMessage(),a.bsModalRef.hide(),a.onSave.emit()):(a.showCreateMessage(),a._sendMail.sendMailBaoMat(void 0,a.records).subscribe((function(a){})),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanMat,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}]),t}(c.a)).\u0275fac=function(a){return new(a||Ge)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.qb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a),r.Ub(s.V))},Ge.\u0275cmp=r.Ob({type:Ge,selectors:[["app-create-or-edit-tai-san-mat"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Fe,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o m\u1ea5t"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return e.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(37,He,26,0,"ng-template",21),r.Pc(38,Ke,29,31,"ng-template",22),r.Pc(39,Ee,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,Ue,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title",e.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n m\u1ea5t":"Khai b\xe1o T\xe0i s\u1ea3n m\u1ea5t"),r.Ib(5),r.sc("form",e.form)("control",e.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",e.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",e.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o m\u1ea5t *"),r.Ib(2),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("scrollable",e.scrollable),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,m.b,m.x,m.k,m.p,m.g,Ae.a,m.f,z.a,q.a,Z.c,w.d,n.l,Z.e,Z.b,Z.a,Z.d,A.a],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),Ge),ze=["dt"];function qe(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",34),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",34),r.ac(4,"th",35),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",36),r.Zb(),r.ac(7,"th",37),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",38),r.Zb(),r.ac(10,"th",39),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",40),r.Zb(),r.ac(13,"th",41),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",42),r.Zb(),r.ac(16,"th",43),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",44),r.Zb(),r.ac(19,"th",45),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",46),r.Zb(),r.ac(22,"th",47),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",48),r.Zb(),r.ac(25,"th",49),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",50),r.Zb(),r.ac(28,"th",51),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",52),r.Zb(),r.ac(31,"th",53),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",54),r.Zb(),r.Zb())}function Qe(a,e){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",65),r.Zb()),2&a){var t=r.lc().$implicit;r.Ib(1),r.sc("value",t)}}function $e(a,e){if(1&a){var t=r.bc();r.ac(0,"a",62),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().delete(a)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function Xe(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",55),r.ac(1,"td",56),r.Pc(2,Qe,2,1,"div",57),r.Zb(),r.ac(3,"td",56),r.ac(4,"div",58),r.ac(5,"button",59),r.Vb(6,"i",60),r.Zb(),r.ac(7,"div",61),r.ac(8,"a",62),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,$e,2,0,"a",63),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",64),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",64),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",64),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",64),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",64),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",64),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",64),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",64),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",64),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",64),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit,i=r.lc();r.Ib(2),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,n.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,n.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,n.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,n.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,n.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,n.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,n.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,n.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,n.nguyenNhan)," ")}}function Je(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",66),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var We,Ye=((We=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var r;return _classCallCheck(this,t),(r=e.call(this,a))._modalService=n,r._taiSanServiceProxy=i,r._lookupTableService=o,r._fb=c,r.isActive=0,r.loading=!0,r.exporting=!1,r.totalCount=0,r.records=[],r.arrTaiSanChecked=[],r.selectedValues=[],r.tenTaiSan="",r._unsubscribe=[],r.checkTaiSan24h=r.showUndoButton,r}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;4===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];a.loaiTaiSanItems=a.getTreeviewItem(n),a.arrNhaCungCap=i}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t,n=this;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanMat(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(t=this.form.value.nhaCungCap)||void 0===t?void 0:t.displayName)||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){n.loading=!1}))).subscribe((function(a){n.records=a.items,n.totalCount=a.totalCount}))}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"delete",value:function(a){var e=this;this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe((function(t){e.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:e.confirmButtonColor,cancelButtonColor:e.cancelButtonColor,cancelButtonText:e.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(t){t.value&&e.clearArrChecked([a])}))}))}},{key:"deleteArrTaiSanChecked",value:function(){var a=this;this.tenTaiSan=this.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})).map((function(a){return a.tenTaiSan})).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o m\u1ea5t",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(e){e.value&&a.clearArrChecked(a.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})))}))}},{key:"clearArrChecked",value:function(a){var e=this;this._taiSanServiceProxy.hoanTacTaiSanMat(a.map((function(a){return{id:a.id}}))).subscribe((function(){e.arrTaiSanChecked=[],e.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),e.getDataPage(!1)}))}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(je,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"view",value:function(a){this._showCreateOrEditTaiSanDialog(a,!0)}},{key:"_showCreateOrEditTaiSanDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"search",value:function(a,e){var t=this,n=a.query;"nhaCungCap"===e&&this._lookupTableService.getAllNhaCungCap().subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}]),t}(c.a)).\u0275fac=function(a){return new(a||We)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.qb),r.Ub(s.T),r.Ub(m.d))},We.\u0275cmp=r.Ob({type:We,selectors:[["app-tai-san-mat"]],viewQuery:function(a,e){var t;1&a&&r.Vc(ze,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:48,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"card-body",3,"formGroup"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","7",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n \u0111\xe3 m\u1ea5t"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return e.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o m\u1ea5t"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"div",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.Vb(25,"dft-label-validation",20),r.ac(26,"app-multiple-select-tree",21),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",18),r.ac(28,"div",19),r.Vb(29,"dft-label-validation",20),r.ac(30,"app-dropdown-treeview-select",22),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",18),r.ac(32,"div",19),r.ac(33,"label",23),r.Rc(34,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(35,"p-dropdown",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",25),r.ac(37,"div",26),r.ac(38,"button",27),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(39,"i",28),r.ac(40,"span",7),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div"),r.ac(43,"p-table",29,30),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(45,qe,34,0,"ng-template",31),r.Pc(46,Xe,44,41,"ng-template",32),r.Pc(47,Je,3,1,"ng-template",33),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",e.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",e.form),r.Ib(4),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(5),r.sc("options",e.arrNhaCungCap)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[C.a,m.q,m.i,T.a,S.a,y.a,k.a,m.p,m.g,Z.c,w.d,Z.e,Z.b,Z.a,n.l,Z.d],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),We),at=["dt"];function et(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function tt(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,t.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,n.models.TrangThaiTaiSanHienThiSorted[t.hinhThuc])," "),r.Ib(3),r.sc("value",t)}}function nt(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function it(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.arrTaiSanChecked&&n.arrTaiSanChecked.length))}}var ot,ct=((ot=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var l;return _classCallCheck(this,t),(l=e.call(this,a))._taiSanServiceProxy=n,l._lookupTableService=i,l._fb=o,l.bsModalRef=c,l.enums=N,l.models=re,l.onSave=new r.q,l.saving=!1,l.isEdit=!1,l.isView=!1,l.loading=!0,l.exporting=!1,l.keyword="",l.totalCount=0,l.records=[],l.arrTaiSanCheckedFromParent=[],l.arrTaiSanChecked=[],l._unsubscribe=[],l}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.loaiTaiSanItems=a.getTreeviewItem(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){a.items=a.items.filter((function(a){return!t.arrTaiSanCheckedFromParent.some((function(e){return e.id===a.id}))})),t.records=a.items,t.totalCount=a.totalCount}))}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}},{key:"close",value:function(){this.bsModalRef.hide()}}]),t}(c.a)).\u0275fac=function(a){return new(a||ot)(r.Ub(r.u),r.Ub(s.ob),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a))},ot.\u0275cmp=r.Ob({type:ot,selectors:[["app-them-tai-san-hong"]],viewQuery:function(a,e){var t;1&a&&r.Vc(at,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(23,et,21,0,"ng-template",17),r.Pc(24,tt,21,19,"ng-template",18),r.Pc(25,nt,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,it,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o h\u1ecfng"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,y.a,S.a,Z.c,w.d,n.l,Z.b,Z.a,Z.e,Z.d,A.a],pipes:[I.a],styles:[""],data:{animation:[Object(h.b)()]}}),ot),rt=["dt"];function lt(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function st(a,e){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",r.nc(5,9,n+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,t.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,t.phongBanQuanLy)," ")}}function ut(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function bt(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.records&&n.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}var dt,ht=((dt=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l,u){var b;return _classCallCheck(this,t),(b=e.call(this,a))._modalService=n,b._taiSanServiceProxy=i,b._lookupTableService=o,b._fb=c,b.bsModalRef=l,b._sesndMail=u,b.onSave=new r.q,b.saving=!1,b.isEdit=!1,b.isView=!1,b.createInputDto=new s.eb,b.loading=!0,b.exporting=!1,b.keyword="",b.totalCount=0,b.records=[],b.arrTaiSanChecked=[],b}return _createClass(t,[{key:"ngOnInit",value:function(){this.khoiTaoForm()}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,m.y.required],thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.required,m.y.maxLength(4e3),Object(z.b)()]]})}},{key:"search",value:function(a,e){var t=this,n=a.query;"hinhThuc"===e&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===t.enums.TrangThaiTaiSanConst.TaiSanBaoDuong}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=this._modalService.show(ct,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:n,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanHong(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){1===e?a.showExistMessage("L\u1ed7i"):a.id?(a.showUpdateMessage(),a.bsModalRef.hide(),a.onSave.emit()):(a.showCreateMessage(),a._sesndMail.sendMailBaoHong(void 0,a.records).subscribe((function(a){})),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanHong,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}]),t}(c.a)).\u0275fac=function(a){return new(a||dt)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.ob),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a),r.Ub(s.V))},dt.\u0275cmp=r.Ob({type:dt,selectors:[["app-create-or-edit-tai-san-hong"]],viewQuery:function(a,e){var t;1&a&&r.Vc(rt,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o h\u1ecfng"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return e.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(37,lt,26,0,"ng-template",21),r.Pc(38,st,29,31,"ng-template",22),r.Pc(39,ut,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,bt,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title",e.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n h\u1ecfng":"Khai b\xe1o T\xe0i s\u1ea3n h\u1ecfng"),r.Ib(5),r.sc("form",e.form)("control",e.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",e.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",e.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o h\u1ecfng *"),r.Ib(2),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("scrollable",e.scrollable),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,m.b,m.x,m.k,m.p,m.g,Ae.a,m.f,z.a,q.a,Z.c,w.d,n.l,Z.e,Z.b,Z.a,Z.d,A.a],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),dt),ft=["dt"];function gt(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",34),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",34),r.ac(4,"th",35),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",36),r.Zb(),r.ac(7,"th",37),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",38),r.Zb(),r.ac(10,"th",39),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",40),r.Zb(),r.ac(13,"th",41),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",42),r.Zb(),r.ac(16,"th",43),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",44),r.Zb(),r.ac(19,"th",45),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",46),r.Zb(),r.ac(22,"th",47),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",48),r.Zb(),r.ac(25,"th",49),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",50),r.Zb(),r.ac(28,"th",51),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",52),r.Zb(),r.ac(31,"th",53),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",54),r.Zb(),r.Zb())}function pt(a,e){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",65),r.Zb()),2&a){var t=r.lc().$implicit;r.Ib(1),r.sc("value",t)}}function mt(a,e){if(1&a){var t=r.bc();r.ac(0,"a",62),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().delete(a)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function vt(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",55),r.ac(1,"td",56),r.Pc(2,pt,2,1,"div",57),r.Zb(),r.ac(3,"td",56),r.ac(4,"div",58),r.ac(5,"button",59),r.Vb(6,"i",60),r.Zb(),r.ac(7,"div",61),r.ac(8,"a",62),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,mt,2,0,"a",63),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",64),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",64),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",64),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",64),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",64),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",64),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",64),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",64),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",64),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",64),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit,i=r.lc();r.Ib(2),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,n.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,n.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,n.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,n.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,n.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,n.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,n.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,n.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,n.nguyenNhan)," ")}}function Ct(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",66),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var Tt,St=((Tt=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var r;return _classCallCheck(this,t),(r=e.call(this,a))._modalService=n,r._taiSanServiceProxy=i,r._lookupTableService=o,r._fb=c,r.isActive=0,r.loading=!0,r.exporting=!1,r.totalCount=0,r.records=[],r.arrTaiSanChecked=[],r.selectedValues=[],r.tenTaiSan="",r._unsubscribe=[],r.checkTaiSan24h=r.showUndoButton,r}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;5===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];a.loaiTaiSanItems=a.getTreeviewItem(n),a.arrNhaCungCap=i}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t,n=this;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanHong(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(t=this.form.value.nhaCungCap)||void 0===t?void 0:t.displayName)||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){n.loading=!1}))).subscribe((function(a){n.records=a.items,n.totalCount=a.totalCount}))}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"delete",value:function(a){var e=this;this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe((function(t){e.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:e.confirmButtonColor,cancelButtonColor:e.cancelButtonColor,cancelButtonText:e.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(t){t.value&&e.clearArrChecked([a])}))}))}},{key:"deleteArrTaiSanChecked",value:function(){var a=this;this.tenTaiSan=this.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})).map((function(a){return a.tenTaiSan})).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o h\u1ecfng",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(e){e.value&&a.clearArrChecked(a.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})))}))}},{key:"clearArrChecked",value:function(a){var e=this;this._taiSanServiceProxy.hoanTacTaiSanHong(a.map((function(a){return{id:a.id}}))).subscribe((function(){e.arrTaiSanChecked=[],e.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),e.getDataPage(!1)}))}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(ht,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"view",value:function(a){this._showCreateOrEditTaiSanDialog(a,!0)}},{key:"_showCreateOrEditTaiSanDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"search",value:function(a,e){var t=this,n=a.query;"nhaCungCap"===e&&this._lookupTableService.getAllNhaCungCap().subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}]),t}(c.a)).\u0275fac=function(a){return new(a||Tt)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.ob),r.Ub(s.T),r.Ub(m.d))},Tt.\u0275cmp=r.Ob({type:Tt,selectors:[["app-tai-san-hong"]],viewQuery:function(a,e){var t;1&a&&r.Vc(ft,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:48,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"card-body",3,"formGroup"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n \u0111\xe3 h\u1ecfng"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return e.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o h\u1ecfng"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"div",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.Vb(25,"dft-label-validation",20),r.ac(26,"app-multiple-select-tree",21),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",18),r.ac(28,"div",19),r.Vb(29,"dft-label-validation",20),r.ac(30,"app-dropdown-treeview-select",22),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",18),r.ac(32,"div",19),r.ac(33,"label",23),r.Rc(34,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(35,"p-dropdown",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",25),r.ac(37,"div",26),r.ac(38,"button",27),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(39,"i",28),r.ac(40,"span",7),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div"),r.ac(43,"p-table",29,30),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(45,gt,34,0,"ng-template",31),r.Pc(46,vt,44,41,"ng-template",32),r.Pc(47,Ct,3,1,"ng-template",33),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",e.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",e.form),r.Ib(4),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(5),r.sc("options",e.arrNhaCungCap)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[C.a,m.q,m.i,T.a,S.a,y.a,k.a,m.p,m.g,Z.c,w.d,Z.e,Z.b,Z.a,n.l,Z.d],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),Tt),yt=["dt"];function kt(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function Zt(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,t.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,n.models.TrangThaiTaiSanHienThiSorted[t.hinhThuc])," "),r.Ib(3),r.sc("value",t)}}function wt(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function It(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.arrTaiSanChecked&&n.arrTaiSanChecked.length))}}var Dt,Rt=((Dt=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var l;return _classCallCheck(this,t),(l=e.call(this,a))._taiSanServiceProxy=n,l._lookupTableService=i,l._fb=o,l.bsModalRef=c,l.enums=N,l.models=re,l.onSave=new r.q,l.saving=!1,l.isEdit=!1,l.isView=!1,l.loading=!0,l.exporting=!1,l.keyword="",l.totalCount=0,l.records=[],l.arrTaiSanCheckedFromParent=[],l.arrTaiSanChecked=[],l._unsubscribe=[],l}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.loaiTaiSanItems=a.getTreeviewItem(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){a.items=a.items.filter((function(a){return!t.arrTaiSanCheckedFromParent.some((function(e){return e.id===a.id}))})),t.records=a.items,t.totalCount=a.totalCount}))}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}},{key:"close",value:function(){this.bsModalRef.hide()}}]),t}(c.a)).\u0275fac=function(a){return new(a||Dt)(r.Ub(r.u),r.Ub(s.sb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a))},Dt.\u0275cmp=r.Ob({type:Dt,selectors:[["app-them-tai-san-thanh-ly"]],viewQuery:function(a,e){var t;1&a&&r.Vc(yt,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(23,kt,21,0,"ng-template",17),r.Pc(24,Zt,21,19,"ng-template",18),r.Pc(25,wt,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,It,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n khai b\xe1o thanh l\xfd"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,y.a,S.a,Z.c,w.d,n.l,Z.b,Z.a,Z.e,Z.d,A.a],pipes:[I.a],styles:[""],data:{animation:[Object(h.b)()]}}),Dt),Vt=["dt"];function _t(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function Pt(a,e){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",r.nc(5,9,n+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,t.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,t.phongBanQuanLy)," ")}}function Bt(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function xt(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.records&&n.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}var Nt,Lt=((Nt=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l,u){var b;return _classCallCheck(this,t),(b=e.call(this,a))._modalService=n,b._taiSanServiceProxy=i,b._lookupTableService=o,b._fb=c,b.bsModalRef=l,b._sendMail=u,b.onSave=new r.q,b.saving=!1,b.isEdit=!1,b.isView=!1,b.createInputDto=new s.eb,b.loading=!0,b.exporting=!1,b.keyword="",b.totalCount=0,b.records=[],b.arrTaiSanChecked=[],b}return _createClass(t,[{key:"ngOnInit",value:function(){this.khoiTaoForm()}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,m.y.required],thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.required,m.y.maxLength(4e3),Object(z.b)()]]})}},{key:"search",value:function(a,e){var t=this,n=a.query;"hinhThuc"===e&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===t.enums.TrangThaiTaiSanConst.TaiSanBaoDuong}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=this._modalService.show(Rt,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:n,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanThanhLy(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){1===e?a.showExistMessage("L\u1ed7i"):a.id?(a.showUpdateMessage(),a.bsModalRef.hide(),a.onSave.emit()):(a.showCreateMessage(),a._sendMail.sendMailThanhLy(void 0,a.records).subscribe((function(a){})),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanThanhLy,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}]),t}(c.a)).\u0275fac=function(a){return new(a||Nt)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.sb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a),r.Ub(s.V))},Nt.\u0275cmp=r.Ob({type:Nt,selectors:[["app-create-or-edit-tai-san-thanh-ly"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Vt,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o thanh l\xfd"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return e.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(37,_t,26,0,"ng-template",21),r.Pc(38,Pt,29,31,"ng-template",22),r.Pc(39,Bt,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,xt,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title",e.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n thanh l\xfd":"Khai b\xe1o T\xe0i s\u1ea3n thanh l\xfd"),r.Ib(5),r.sc("form",e.form)("control",e.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",e.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",e.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o *"),r.Ib(2),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("scrollable",e.scrollable),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,m.b,m.x,m.k,m.p,m.g,Ae.a,m.f,z.a,q.a,Z.c,w.d,n.l,Z.e,Z.b,Z.a,Z.d,A.a],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),Nt),Ot=["dt"];function Mt(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",34),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",34),r.ac(4,"th",35),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",36),r.Zb(),r.ac(7,"th",37),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",38),r.Zb(),r.ac(10,"th",39),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",40),r.Zb(),r.ac(13,"th",41),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",42),r.Zb(),r.ac(16,"th",43),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",44),r.Zb(),r.ac(19,"th",45),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",46),r.Zb(),r.ac(22,"th",47),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",48),r.Zb(),r.ac(25,"th",49),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",50),r.Zb(),r.ac(28,"th",51),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",52),r.Zb(),r.ac(31,"th",53),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",54),r.Zb(),r.Zb())}function At(a,e){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",65),r.Zb()),2&a){var t=r.lc().$implicit;r.Ib(1),r.sc("value",t)}}function Ft(a,e){if(1&a){var t=r.bc();r.ac(0,"a",62),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().delete(a)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function Ht(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",55),r.ac(1,"td",56),r.Pc(2,At,2,1,"div",57),r.Zb(),r.ac(3,"td",56),r.ac(4,"div",58),r.ac(5,"button",59),r.Vb(6,"i",60),r.Zb(),r.ac(7,"div",61),r.ac(8,"a",62),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,Ft,2,0,"a",63),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",64),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",64),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",64),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",64),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",64),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",64),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",64),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",64),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",64),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",64),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit,i=r.lc();r.Ib(2),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,n.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,n.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,n.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,n.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,n.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,n.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,n.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,n.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,n.nguyenNhan)," ")}}function Kt(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",66),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var Et,Ut=((Et=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var r;return _classCallCheck(this,t),(r=e.call(this,a))._modalService=n,r._taiSanServiceProxy=i,r._lookupTableService=o,r._fb=c,r.isActive=0,r.loading=!0,r.exporting=!1,r.totalCount=0,r.records=[],r.arrTaiSanChecked=[],r.selectedValues=[],r.tenTaiSan="",r._unsubscribe=[],r.checkTaiSan24h=r.showUndoButton,r}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;6===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];a.loaiTaiSanItems=a.getTreeviewItem(n),a.arrNhaCungCap=i}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t,n=this;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanThanhLy(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(t=this.form.value.nhaCungCap)||void 0===t?void 0:t.displayName)||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){n.loading=!1}))).subscribe((function(a){n.records=a.items,n.totalCount=a.totalCount}))}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"delete",value:function(a){var e=this;this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe((function(t){e.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:e.confirmButtonColor,cancelButtonColor:e.cancelButtonColor,cancelButtonText:e.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(t){t.value&&e.clearArrChecked([a])}))}))}},{key:"deleteArrTaiSanChecked",value:function(){var a=this;this.tenTaiSan=this.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})).map((function(a){return a.tenTaiSan})).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o thanh l\xfd",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(e){e.value&&a.clearArrChecked(a.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})))}))}},{key:"clearArrChecked",value:function(a){var e=this;this._taiSanServiceProxy.hoanTacTaiSanThanhLy(a.map((function(a){return{id:a.id}}))).subscribe((function(){e.arrTaiSanChecked=[],e.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),e.getDataPage(!1)}))}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(Lt,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"view",value:function(a){this._showCreateOrEditTaiSanDialog(a,!0)}},{key:"_showCreateOrEditTaiSanDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"search",value:function(a,e){var t=this,n=a.query;"nhaCungCap"===e&&this._lookupTableService.getAllNhaCungCap().subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}]),t}(c.a)).\u0275fac=function(a){return new(a||Et)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.sb),r.Ub(s.T),r.Ub(m.d))},Et.\u0275cmp=r.Ob({type:Et,selectors:[["app-tai-san-thanh-ly"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Ot,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:48,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"card-body",3,"formGroup"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n thanh l\xfd"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return e.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o thanh l\xfd"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"div",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.Vb(25,"dft-label-validation",20),r.ac(26,"app-multiple-select-tree",21),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div",18),r.ac(28,"div",19),r.Vb(29,"dft-label-validation",20),r.ac(30,"app-dropdown-treeview-select",22),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(31,"div",18),r.ac(32,"div",19),r.ac(33,"label",23),r.Rc(34,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(35,"p-dropdown",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(36,"div",25),r.ac(37,"div",26),r.ac(38,"button",27),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(39,"i",28),r.ac(40,"span",7),r.Rc(41,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(42,"div"),r.ac(43,"p-table",29,30),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(45,Mt,34,0,"ng-template",31),r.Pc(46,Ht,44,41,"ng-template",32),r.Pc(47,Kt,3,1,"ng-template",33),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",e.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",e.form),r.Ib(4),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(5),r.sc("options",e.arrNhaCungCap)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[C.a,m.q,m.i,T.a,S.a,y.a,k.a,m.p,m.g,Z.c,w.d,Z.e,Z.b,Z.a,n.l,Z.d],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),Et),Gt=["dt"];function jt(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",21),r.Rc(2,"T\xean t\xe0i s\u1ea3n "),r.Vb(3,"p-sortIcon",22),r.Zb(),r.ac(4,"th",23),r.Rc(5,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(6,"p-sortIcon",24),r.Zb(),r.ac(7,"th",25),r.Rc(8,"Serial Number "),r.Vb(9,"p-sortIcon",26),r.Zb(),r.ac(10,"th",27),r.Rc(11,"Nh\xe0 cung c\u1ea5p "),r.Vb(12,"p-sortIcon",28),r.Zb(),r.ac(13,"th",29),r.Rc(14,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(15,"p-sortIcon",30),r.Zb(),r.ac(16,"th",31),r.Rc(17,"Tr\u1ea1ng th\xe1i "),r.Vb(18,"p-sortIcon",32),r.Zb(),r.ac(19,"th",33),r.Vb(20,"p-tableHeaderCheckbox"),r.Zb(),r.Zb())}function zt(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",35),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"truncate"),r.Zb(),r.ac(19,"td",33),r.Vb(20,"p-tableCheckbox",36),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=r.lc();r.Ib(2),r.Tc(" ",r.nc(3,7,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(6,9,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,11,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(12,13,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.nc(15,15,t.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.nc(18,17,n.models.TrangThaiTaiSanHienThiSorted[t.hinhThuc])," "),r.Ib(3),r.sc("value",t)}}function qt(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",37),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function Qt(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",38),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.arrTaiSanChecked&&n.arrTaiSanChecked.length))}}var $t,Xt=(($t=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var l;return _classCallCheck(this,t),(l=e.call(this,a))._taiSanServiceProxy=n,l._lookupTableService=i,l._fb=o,l.bsModalRef=c,l.enums=N,l.models=re,l.onSave=new r.q,l.saving=!1,l.isEdit=!1,l.isView=!1,l.loading=!0,l.exporting=!1,l.keyword="",l.totalCount=0,l.records=[],l.arrTaiSanCheckedFromParent=[],l.arrTaiSanChecked=[],l._unsubscribe=[],l}return _createClass(t,[{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.loaiTaiSanItems=a.getTreeviewItem(t)}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t=this;this.loading=!0,this._taiSanServiceProxy.getAllTaiSan(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){a.items=a.items.filter((function(a){return!t.arrTaiSanCheckedFromParent.some((function(e){return e.id===a.id}))})),t.records=a.items,t.totalCount=a.totalCount}))}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],loaiTaiSan:[""],phongBanQuanLy:[""]})}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"save",value:function(){""===O.a.getControlErr(this.form)&&(this.saving=!0,this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}},{key:"close",value:function(){this.bsModalRef.hide()}}]),t}(c.a)).\u0275fac=function(a){return new(a||$t)(r.Ub(r.u),r.Ub(s.pb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a))},$t.\u0275cmp=r.Ob({type:$t,selectors:[["app-them-tai-san-huy"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Gt,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave",arrTaiSanChecked:"arrTaiSanChecked"},features:[r.Fb],decls:27,vars:13,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-12"],[1,"form-group"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"col-md-6"],[3,"form","title"],[3,"items","valueChange"],[3,"dataEdit","onSelect"],[3,"value","selection","lazy","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","onCancelClick",4,"ngIf"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],["pSortableColumn","hinhThuc",1,"width-150"],["field","hinhThuc"],[1,"width-50"],[1,"ui-selectable-row"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.ac(6,"div",6),r.ac(7,"div",7),r.ac(8,"button",8),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(9,"i",9),r.Zb(),r.Zb(),r.ac(10,"input",10),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"div",3),r.ac(12,"div",11),r.ac(13,"div",5),r.Vb(14,"dft-label-validation",12),r.ac(15,"app-dropdown-treeview-select",13),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(16,"div",11),r.ac(17,"div",5),r.Vb(18,"dft-label-validation",12),r.ac(19,"app-multiple-select-tree",14),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div"),r.ac(21,"p-table",15,16),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(23,jt,21,0,"ng-template",17),r.Pc(24,zt,21,19,"ng-template",18),r.Pc(25,qt,3,1,"ng-template",19),r.Zb(),r.Zb(),r.Zb(),r.Pc(26,Qt,1,2,"abp-modal-footer",20),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title","Th\xeam T\xe0i s\u1ea3n hu\u1ef7"),r.Ib(9),r.sc("placeholder","Nh\u1eadp t\xean t\xe0i s\u1ea3n, serial number"),r.Ib(4),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(3),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(2),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,y.a,S.a,Z.c,w.d,n.l,Z.b,Z.a,Z.e,Z.d,A.a],pipes:[I.a],styles:[""],data:{animation:[Object(h.b)()]}}),$t),Jt=["dt"];function Wt(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",25),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.ac(3,"th",26),r.Rc(4,"STT"),r.Zb(),r.ac(5,"th",27),r.Rc(6,"T\xean t\xe0i s\u1ea3n "),r.Vb(7,"p-sortIcon",28),r.Zb(),r.ac(8,"th",29),r.Rc(9,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(10,"p-sortIcon",30),r.Zb(),r.ac(11,"th",31),r.Rc(12,"Serial Number "),r.Vb(13,"p-sortIcon",32),r.Zb(),r.ac(14,"th",33),r.Rc(15,"Nh\xe0 cung c\u1ea5p "),r.Vb(16,"p-sortIcon",34),r.Zb(),r.ac(17,"th",35),r.Rc(18,"Ng\xe0y mua "),r.Vb(19,"p-sortIcon",36),r.Zb(),r.ac(20,"th",37),r.Rc(21,"Nguy\xean gi\xe1 "),r.Vb(22,"p-sortIcon",38),r.Zb(),r.ac(23,"th",39),r.Rc(24,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(25,"p-sortIcon",40),r.Zb(),r.Zb())}function Yt(a,e){if(1&a&&(r.ac(0,"tr",41),r.ac(1,"td",25),r.Vb(2,"p-tableCheckbox",42),r.Zb(),r.ac(3,"td",26),r.Rc(4),r.mc(5,"truncate"),r.Zb(),r.ac(6,"td",43),r.Rc(7),r.mc(8,"truncate"),r.Zb(),r.ac(9,"td",43),r.Rc(10),r.mc(11,"truncate"),r.Zb(),r.ac(12,"td",43),r.Rc(13),r.mc(14,"truncate"),r.Zb(),r.ac(15,"td",43),r.Rc(16),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",43),r.Rc(19),r.mc(20,"date"),r.mc(21,"truncate"),r.Zb(),r.ac(22,"td",43),r.Rc(23),r.mc(24,"number"),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",43),r.Rc(27),r.mc(28,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.sc("value",t),r.Ib(2),r.Tc(" ",r.nc(5,9,n+1)," "),r.Ib(3),r.Tc(" ",r.nc(8,11,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(11,13,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(14,15,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(17,17,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(20,19,r.nc(21,22,t.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(24,24,r.nc(25,27,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(28,29,t.phongBanQuanLy)," ")}}function an(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",44),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}function en(a,e){if(1&a){var t=r.bc();r.ac(0,"abp-modal-footer",45),r.ic("onCancelClick",(function(){return r.Ic(t),r.lc().close()})),r.Zb()}if(2&a){var n=r.lc();r.sc("cancelDisabled",n.saving)("saveDisabled",!(null!=n.records&&n.records.length))("iconName","fa fa-sun")("saveLabel","Khai b\xe1o")}}var tn,nn=((tn=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c,l){var u;return _classCallCheck(this,t),(u=e.call(this,a))._modalService=n,u._taiSanServiceProxy=i,u._lookupTableService=o,u._fb=c,u.bsModalRef=l,u.onSave=new r.q,u.saving=!1,u.isEdit=!1,u.isView=!1,u.createInputDto=new s.eb,u.loading=!0,u.exporting=!1,u.keyword="",u.totalCount=0,u.records=[],u.arrTaiSanChecked=[],u}return _createClass(t,[{key:"ngOnInit",value:function(){this.khoiTaoForm()}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({nguoiKhaiBao:[this.appSession.user.name,m.y.required],thoiGianKhaiBao:[new Date,m.y.required],noiDungKhaiBao:["",[m.y.required,m.y.maxLength(4e3),Object(z.b)()]]})}},{key:"search",value:function(a,e){var t=this,n=a.query;"hinhThuc"===e&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiTaiSanConst.TaiSanSuaChua||a.id===t.enums.TrangThaiTaiSanConst.TaiSanBaoDuong}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"deleteArrTaiSanChecked",value:function(){this.deleteCheckedItems(),this.showDeleteMessage()}},{key:"deleteCheckedItems",value:function(){var a=this;this.records=this.records.filter((function(e){return!a.arrTaiSanChecked.some((function(a){return a.id===e.id}))})),this.arrTaiSanChecked=[]}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e,t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=this._modalService.show(Xt,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:n,arrTaiSanCheckedFromParent:this.records}})).content.onSave.subscribe((function(){t.records=[].concat(_toConsumableArray(t.records),_toConsumableArray(e.content.arrTaiSanChecked)),t.totalCount=t.records.length}))}},{key:"save",value:function(){var a=this;""===O.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._taiSanServiceProxy.createTaiSanHuy(this.createInputDto).pipe(Object(d.a)((function(){a.saving=!1}))).subscribe((function(e){1===e?a.showExistMessage("L\u1ed7i"):a.id?(a.showUpdateMessage(),a.bsModalRef.hide(),a.onSave.emit()):(a.showCreateMessage(),a.bsModalRef.hide(),a.onSave.emit())})))}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"_getValueForSave",value:function(){var a=[];this.records.forEach((function(e){var t=new s.db;t.taiSanId=e.id,a.push(t)})),this.createInputDto=Object.assign(Object.assign({},this.form.value),{phanLoaiId:this.enums.TrangThaiTaiSanConst.TaiSanHuy,ngayKhaiBao:this.form.value.thoiGianKhaiBao,noiDung:this.form.value.noiDungKhaiBao,phieuTaiSanChiTietList:a})}}]),t}(c.a)).\u0275fac=function(a){return new(a||tn)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.pb),r.Ub(s.T),r.Ub(m.d),r.Ub(u.a))},tn.\u0275cmp=r.Ob({type:tn,selectors:[["app-create-or-edit-tai-san-huy"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Jt,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:41,vars:25,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","thoiGianKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[1,"d-flex","flex-row-reverse","bd-highlight"],["type","button",1,"btn","btn-primary","m-l-10","m-b-10",3,"click"],[1,"fas","fa-plus","ng-tns-c184-12"],[2,"margin-left","5px"],["type","button",1,"btn","btn-danger","m-b-10",3,"disabled","click"],[1,"fas","fa-trash","ng-tns-c184-12"],[3,"value","selection","scrollable","scrollHeight","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick",4,"ngIf"],[1,"width-25"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[3,"value"],[1,"width-150"],["colspan","8",1,"text-left"],[3,"cancelDisabled","saveDisabled","iconName","saveLabel","onCancelClick"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ic("ngSubmit",(function(){return e.save()})),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(20,"div",3),r.ac(21,"div",4),r.ac(22,"label"),r.Rc(23,"Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o h\u1ee7y"),r.Zb(),r.Zb(),r.ac(24,"div",4),r.ac(25,"div",13),r.ac(26,"button",14),r.ic("click",(function(){return e.create()})),r.Vb(27,"i",15),r.ac(28,"span",16),r.Rc(29,"Th\xeam t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.ac(30,"button",17),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(31,"i",18),r.ac(32,"span",16),r.Rc(33,"X\xf3a"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(34,"div"),r.ac(35,"p-table",19,20),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a})),r.Pc(37,Wt,26,0,"ng-template",21),r.Pc(38,Yt,29,31,"ng-template",22),r.Pc(39,an,3,1,"ng-template",23),r.Zb(),r.Zb(),r.Zb(),r.Pc(40,en,1,4,"abp-modal-footer",24),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title",e.isView?"Xem chi ti\u1ebft T\xe0i s\u1ea3n hu\u1ef7":"Khai b\xe1o T\xe0i s\u1ea3n h\u1ee7y"),r.Ib(5),r.sc("form",e.form)("control",e.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",e.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",e.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",e.form.get("thoiGianKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("thoiGianKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o h\u1ee7y *"),r.Ib(2),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(11),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("scrollable",e.scrollable),r.Ib(5),r.sc("ngIf",!e.isView))},directives:[m.z,m.q,m.i,M.a,T.a,m.b,m.x,m.k,m.p,m.g,Ae.a,m.f,z.a,q.a,Z.c,w.d,n.l,Z.e,Z.b,Z.a,Z.d,A.a],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),tn),on=["dt"];function cn(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",35),r.Vb(2,"p-tableHeaderCheckbox"),r.Zb(),r.Vb(3,"th",35),r.ac(4,"th",36),r.Rc(5,"M\xe3 t\xe0i s\u1ea3n (EPC) "),r.Vb(6,"p-sortIcon",37),r.Zb(),r.ac(7,"th",38),r.Rc(8,"T\xean t\xe0i s\u1ea3n "),r.Vb(9,"p-sortIcon",39),r.Zb(),r.ac(10,"th",40),r.Rc(11,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(12,"p-sortIcon",41),r.Zb(),r.ac(13,"th",42),r.Rc(14,"SerialNumber "),r.Vb(15,"p-sortIcon",43),r.Zb(),r.ac(16,"th",44),r.Rc(17,"Nh\xe0 cung c\u1ea5p "),r.Vb(18,"p-sortIcon",45),r.Zb(),r.ac(19,"th",46),r.Rc(20,"Ng\xe0y mua "),r.Vb(21,"p-sortIcon",47),r.Zb(),r.ac(22,"th",48),r.Rc(23,"Nguy\xean gi\xe1 "),r.Vb(24,"p-sortIcon",49),r.Zb(),r.ac(25,"th",50),r.Rc(26,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(27,"p-sortIcon",51),r.Zb(),r.ac(28,"th",52),r.Rc(29,"Ng\xe0y khai b\xe1o "),r.Vb(30,"p-sortIcon",53),r.Zb(),r.ac(31,"th",54),r.Rc(32,"Nguy\xean nh\xe2n "),r.Vb(33,"p-sortIcon",55),r.Zb(),r.Zb())}function rn(a,e){if(1&a&&(r.ac(0,"div"),r.Vb(1,"p-tableCheckbox",66),r.Zb()),2&a){var t=r.lc().$implicit;r.Ib(1),r.sc("value",t)}}function ln(a,e){if(1&a){var t=r.bc();r.ac(0,"a",63),r.ic("click",(function(){r.Ic(t);var a=r.lc().$implicit;return r.lc().delete(a)})),r.Rc(1,"Ho\xe0n t\xe1c"),r.Zb()}}function sn(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",56),r.ac(1,"td",57),r.Pc(2,rn,2,1,"div",58),r.Zb(),r.ac(3,"td",57),r.ac(4,"div",59),r.ac(5,"button",60),r.Vb(6,"i",61),r.Zb(),r.ac(7,"div",62),r.ac(8,"a",63),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().view(a.id)})),r.Rc(9,"Xem"),r.Zb(),r.Pc(10,ln,2,0,"a",64),r.Zb(),r.Zb(),r.Zb(),r.ac(11,"td",65),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",65),r.Rc(15),r.mc(16,"truncate"),r.Zb(),r.ac(17,"td",65),r.Rc(18),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",65),r.Rc(21),r.mc(22,"truncate"),r.Zb(),r.ac(23,"td",65),r.Rc(24),r.mc(25,"truncate"),r.Zb(),r.ac(26,"td",65),r.Rc(27),r.mc(28,"date"),r.mc(29,"truncate"),r.Zb(),r.ac(30,"td",65),r.Rc(31),r.mc(32,"number"),r.mc(33,"truncate"),r.Zb(),r.ac(34,"td",65),r.Rc(35),r.mc(36,"truncate"),r.Zb(),r.ac(37,"td",65),r.Rc(38),r.mc(39,"date"),r.mc(40,"truncate"),r.Zb(),r.ac(41,"td",65),r.Rc(42),r.mc(43,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit,i=r.lc();r.Ib(2),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(8),r.sc("ngIf",i.showUndoButton(n.ngayKhaiBao)),r.Ib(2),r.Tc(" ",r.nc(13,12,n.epcCode)," "),r.Ib(3),r.Tc(" ",r.nc(16,14,n.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(19,16,n.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(22,18,n.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(25,20,n.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(28,22,r.nc(29,25,n.ngayMua),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(32,27,r.nc(33,30,n.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(36,32,n.phongBanQuanLy)," "),r.Ib(3),r.Tc(" ",r.oc(39,34,r.nc(40,37,n.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(43,39,n.nguyenNhan)," ")}}function un(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",67),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var bn,dn=((bn=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var r;return _classCallCheck(this,t),(r=e.call(this,a))._modalService=n,r._taiSanServiceProxy=i,r._lookupTableService=o,r._fb=c,r.isActive=0,r.loading=!0,r.exporting=!1,r.totalCount=0,r.records=[],r.arrTaiSanChecked=[],r.selectedValues=[],r.tenTaiSan="",r._unsubscribe=[],r.checkTaiSan24h=r.showUndoButton,r}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;7===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllLoaiTaiSanTree(),this._lookupTableService.getAllNhaCungCap()).subscribe((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];a.loaiTaiSanItems=a.getTreeviewItem(n),a.arrNhaCungCap=i}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t,n=this;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllTaiSanHuy(this.form.value.tenTaiSan||void 0,this.toChucValue||void 0,this.form.value.loaiTaiSan||void 0,(null===(t=this.form.value.nhaCungCap)||void 0===t?void 0:t.displayName)||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){n.loading=!1}))).subscribe((function(a){n.records=a.items,n.totalCount=a.totalCount}))}},{key:"create",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"delete",value:function(a){var e=this;this._lookupTableService.getTrangThaiTaiSanTruoc(a.id).subscribe((function(t){e.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"T\xe0i s\u1ea3n "+a.tenTaiSan+' s\u1ebd ho\xe0n t\xe1c v\u1ec1 "Danh s\xe1ch T\xe0i s\u1ea3n '+t+'"',icon:"warning",showCancelButton:!0,confirmButtonColor:e.confirmButtonColor,cancelButtonColor:e.cancelButtonColor,cancelButtonText:e.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(t){t.value&&e.clearArrChecked([a])}))}))}},{key:"deleteArrTaiSanChecked",value:function(){var a=this;this.tenTaiSan=this.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})).map((function(a){return a.tenTaiSan})).join(", "),this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"Danh s\xe1ch t\xe0i s\u1ea3n \u0111\xe3 ch\u1ecdn s\u1ebd \u0111\u01b0\u1ee3c ho\xe0n t\xe1c v\u1ec1 danh s\xe1ch tr\u01b0\u1edbc khi khai b\xe1o h\u1ee7y",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:"Ho\xe0n t\xe1c"}).then((function(e){e.value&&a.clearArrChecked(a.arrTaiSanChecked.filter((function(e){return a.checkTaiSan24h(e.lastModificationTime)})))}))}},{key:"clearArrChecked",value:function(a){var e=this;this._taiSanServiceProxy.hoanTacTaiSanHuy(a.map((function(a){return{id:a.id}}))).subscribe((function(){e.arrTaiSanChecked=[],e.showSuccessMessage("Ho\xe0n t\xe1c th\xe0nh c\xf4ng!"),e.getDataPage(!1)}))}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(nn,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"view",value:function(a){this._showCreateOrEditTaiSanDialog(a,!0)}},{key:"_showCreateOrEditTaiSanDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(b.a,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"search",value:function(a,e){var t=this,n=a.query;"nhaCungCap"===e&&this._lookupTableService.getAllNhaCungCap().subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"formCreate",value:function(){this.form=this._fb.group({tenTaiSan:[""],phongBanQuanLy:[""],loaiTaiSan:[""],nhaCungCap:[]})}}]),t}(c.a)).\u0275fac=function(a){return new(a||bn)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.pb),r.Ub(s.T),r.Ub(m.d))},bn.\u0275cmp=r.Ob({type:bn,selectors:[["app-tai-san-huy"]],viewQuery:function(a,e){var t;1&a&&r.Vc(on,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:49,vars:27,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-success","m-r-5",3,"buttonBusy","click"],[1,"fas","fa-sun"],[2,"margin-left","5px"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[3,"formGroup"],[1,"card-body"],[1,"ui-fluid","row"],[1,"col-md-4"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],[3,"items","valueChange"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","nhaCungCap","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"row","justify-content-end"],[1,"col-lg-6","col-md-12","col-sm-12","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"disabled","click"],[1,"fas","fa-undo","ng-tns-c184-12"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","epcCode",1,"width-150"],["field","epcCode"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanly",1,"width-150"],["field","phongBanQuanly"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","nguyenNhan",1,"width-150"],["field","nguyenNhan"],[1,"ui-selectable-row"],[1,"width-30"],[4,"ngIf"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"width-150"],[3,"value"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd T\xe0i s\u1ea3n h\u1ee7y"),r.Zb(),r.Zb(),r.ac(7,"div",4),r.ac(8,"button",5),r.ic("click",(function(){return e.create()})),r.Vb(9,"i",6),r.ac(10,"span",7),r.Rc(11,"Khai b\xe1o h\u1ee7y"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"section",8),r.ac(13,"div",1),r.ac(14,"div",9),r.ac(15,"div",10),r.ac(16,"div",11),r.ac(17,"div",12),r.ac(18,"button",13),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(19,"i",14),r.Zb(),r.Zb(),r.ac(20,"input",15),r.ic("change",(function(a){return e.form.get("tenTaiSan").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(21,"form",16),r.ac(22,"div",17),r.ac(23,"div",18),r.ac(24,"div",19),r.ac(25,"div",20),r.Vb(26,"dft-label-validation",21),r.ac(27,"app-multiple-select-tree",22),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(28,"div",19),r.ac(29,"div",20),r.Vb(30,"dft-label-validation",21),r.ac(31,"app-dropdown-treeview-select",23),r.ic("valueChange",(function(a){return e.form.get("loaiTaiSan").setValue(a)})),r.Zb(),r.Zb(),r.Zb(),r.ac(32,"div",19),r.ac(33,"div",20),r.ac(34,"label",24),r.Rc(35,"Nh\xe0 cung c\u1ea5p"),r.Zb(),r.Vb(36,"p-dropdown",25),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(37,"div",26),r.ac(38,"div",27),r.ac(39,"button",28),r.ic("click",(function(){return e.deleteArrTaiSanChecked()})),r.Vb(40,"i",29),r.ac(41,"span",7),r.Rc(42,"Ho\xe0n t\xe1c"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(43,"div"),r.ac(44,"p-table",30,31),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(46,cn,34,0,"ng-template",32),r.Pc(47,sn,44,41,"ng-template",33),r.Pc(48,un,3,1,"ng-template",34),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(8),r.sc("buttonBusy",e.exporting),r.Ib(12),r.sc("placeholder","Nh\u1eadp m\xe3 t\xe0i s\u1ea3n, t\xean t\xe0i s\u1ea3n, serial number, ng\xe0y mua, nguy\xean gi\xe1"),r.Ib(1),r.sc("formGroup",e.form),r.Ib(5),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(3),r.sc("form",e.form)("title","Lo\u1ea1i t\xe0i s\u1ea3n"),r.Ib(1),r.sc("items",e.loaiTaiSanItems),r.Ib(5),r.sc("options",e.arrNhaCungCap)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(3),r.sc("disabled",!e.arrTaiSanChecked.length),r.Ib(5),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[C.a,m.z,m.q,m.i,T.a,S.a,y.a,k.a,m.p,m.g,Z.c,w.d,Z.e,Z.b,Z.a,n.l,Z.d],pipes:[I.a,n.d,n.e],styles:[""],data:{animation:[Object(h.b)()]}}),bn),hn=["dt"];function fn(a,e){1&a&&(r.ac(0,"tr"),r.ac(1,"th",19),r.Rc(2,"STT"),r.Zb(),r.ac(3,"th",20),r.Rc(4,"T\xean t\xe0i s\u1ea3n "),r.Vb(5,"p-sortIcon",21),r.Zb(),r.ac(6,"th",22),r.Rc(7,"Lo\u1ea1i t\xe0i s\u1ea3n "),r.Vb(8,"p-sortIcon",23),r.Zb(),r.ac(9,"th",24),r.Rc(10,"Serial Number "),r.Vb(11,"p-sortIcon",25),r.Zb(),r.ac(12,"th",26),r.Rc(13,"Nh\xe0 cung c\u1ea5p "),r.Vb(14,"p-sortIcon",27),r.Zb(),r.ac(15,"th",28),r.Rc(16,"Ng\xe0y mua "),r.Vb(17,"p-sortIcon",29),r.Zb(),r.ac(18,"th",30),r.Rc(19,"Nguy\xean gi\xe1 "),r.Vb(20,"p-sortIcon",31),r.Zb(),r.ac(21,"th",32),r.Rc(22,"\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd "),r.Vb(23,"p-sortIcon",33),r.Zb(),r.Zb())}function gn(a,e){if(1&a&&(r.ac(0,"tr",34),r.ac(1,"td",19),r.Rc(2),r.mc(3,"truncate"),r.Zb(),r.ac(4,"td",35),r.Rc(5),r.mc(6,"truncate"),r.Zb(),r.ac(7,"td",35),r.Rc(8),r.mc(9,"truncate"),r.Zb(),r.ac(10,"td",35),r.Rc(11),r.mc(12,"truncate"),r.Zb(),r.ac(13,"td",35),r.Rc(14),r.mc(15,"truncate"),r.Zb(),r.ac(16,"td",35),r.Rc(17),r.mc(18,"date"),r.mc(19,"truncate"),r.Zb(),r.ac(20,"td",35),r.Rc(21),r.mc(22,"number"),r.mc(23,"truncate"),r.Zb(),r.ac(24,"td",35),r.Rc(25),r.mc(26,"truncate"),r.Zb(),r.Zb()),2&a){var t=e.$implicit,n=e.rowIndex;r.Ib(2),r.Tc(" ",r.nc(3,8,n+1)," "),r.Ib(3),r.Tc(" ",r.nc(6,10,t.tenTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(9,12,t.loaiTaiSan)," "),r.Ib(3),r.Tc(" ",r.nc(12,14,t.serialNumber)," "),r.Ib(3),r.Tc(" ",r.nc(15,16,t.nhaCungCap)," "),r.Ib(3),r.Tc(" ",r.oc(18,18,r.nc(19,21,t.creationTime),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.oc(22,23,r.nc(23,26,t.nguyenGia),"2.")," "),r.Ib(4),r.Tc(" ",r.nc(26,28,t.phongBanQuanLy)," ")}}function pn(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",36),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var mn,vn=((mn=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o){var c;return _classCallCheck(this,t),(c=e.call(this,a))._khaiBaoHongMatServiceProxy=n,c._fb=i,c.bsModalRef=o,c.onSave=new r.q,c.saving=!1,c.isEdit=!1,c.isView=!1,c.loading=!0,c.exporting=!1,c.keyword="",c.totalCount=0,c.records=[],c}return _createClass(t,[{key:"ngOnInit",value:function(){this.khoiTaoForm()}},{key:"ngAfterViewInit",value:function(){this.getDataPage()}},{key:"khoiTaoForm",value:function(){this.form=this._fb.group({nguoiKhaiBao:[""],ngayKhaiBao:[""],noiDungKhaiBao:[""]})}},{key:"close",value:function(){this.bsModalRef.hide()}},{key:"getDataPage",value:function(a){var e=this;this.loading=!0,this._khaiBaoHongMatServiceProxy.getAllKhaiBaoHongMatChiTiet(this.id,this.getSortField(this.table),a?a.first:this.table.first,a?a.rows:this.table.rows).pipe(Object(d.a)((function(){e.loading=!1}))).subscribe((function(a){e.form.get("nguoiKhaiBao").setValue(a.items[0].nguoiKhaiBao),e.form.get("ngayKhaiBao").setValue(a.items[0].ngayKhaiBao.toDate()),e.form.get("noiDungKhaiBao").setValue(a.items[0].noiDungKhaiBao),e.records=a.items,e.totalCount=a.totalCount}))}}]),t}(c.a)).\u0275fac=function(a){return new(a||mn)(r.Ub(r.u),r.Ub(s.M),r.Ub(m.d),r.Ub(u.a))},mn.\u0275cmp=r.Ob({type:mn,selectors:[["app-xem-chi-tiet-tai-san-hong-mat"]],viewQuery:function(a,e){var t;1&a&&r.Vc(hn,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},outputs:{onSave:"onSave"},features:[r.Fb],decls:27,vars:23,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal","w-auto",3,"formGroup"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"form","control","title"],["disabled","","required","","type","text","id","nguoiKhaiBao","name","nguoiKhaiBao","maxlength","50","formControlName","nguoiKhaiBao","pInputText","",3,"formControl"],[3,"control"],[3,"control","title"],["formControlName","ngayKhaiBao",3,"disabled","dateFormat","showIcon","monthNavigator","yearNavigator","yearRange"],[1,"col-md-12"],["disabled","","formControlName","noiDungKhaiBao","id","noiDungKhaiBao","rows","4","maxlength","4000",1,"form-control"],[3,"title"],[3,"value","scrollable","scrollHeight"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-75"],["pSortableColumn","tenTaiSan",1,"width-150"],["field","tenTaiSan"],["pSortableColumn","loaiTaiSan",1,"width-150"],["field","loaiTaiSan"],["pSortableColumn","serialNumber",1,"width-150"],["field","serialNumber"],["pSortableColumn","nhaCungCap",1,"width-150"],["field","nhaCungCap"],["pSortableColumn","ngayMua",1,"width-150"],["field","ngayMua"],["pSortableColumn","nguyenGia",1,"width-150"],["field","nguyenGia"],["pSortableColumn","phongBanQuanLy",1,"width-150"],["field","phongBanQuanLy"],[1,"ui-selectable-row"],[1,"width-150"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"form",0),r.ac(1,"abp-modal-header",1),r.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),r.Zb(),r.ac(2,"div",2),r.ac(3,"div",3),r.ac(4,"div",4),r.ac(5,"div",5),r.Vb(6,"dft-label-validation",6),r.Vb(7,"input",7),r.Vb(8,"dft-validation",8),r.Zb(),r.Zb(),r.ac(9,"div",4),r.ac(10,"div",5),r.Vb(11,"dft-label-validation",9),r.Vb(12,"p-calendar",10),r.Vb(13,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.ac(14,"div",3),r.ac(15,"div",11),r.ac(16,"div",5),r.Vb(17,"dft-label-validation",9),r.Vb(18,"textarea",12),r.Vb(19,"dft-validation",8),r.Zb(),r.Zb(),r.Zb(),r.Vb(20,"dft-label-validation",13),r.ac(21,"div"),r.ac(22,"p-table",14,15),r.Pc(24,fn,24,0,"ng-template",16),r.Pc(25,gn,27,30,"ng-template",17),r.Pc(26,pn,3,1,"ng-template",18),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("formGroup",e.form),r.Ib(1),r.sc("title","Xem chi ti\u1ebft khai b\xe1o"),r.Ib(5),r.sc("form",e.form)("control",e.form.get("nguoiKhaiBao"))("title","Ng\u01b0\u1eddi khai b\xe1o "),r.Ib(1),r.sc("formControl",e.form.get("nguoiKhaiBao")),r.Ib(1),r.sc("control",e.form.get("nguoiKhaiBao")),r.Ib(3),r.sc("control",e.form.get("ngayKhaiBao"))("title","Th\u1eddi gian khai b\xe1o "),r.Ib(1),r.sc("disabled",!0)("dateFormat",e.dateFormatInput)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("yearRange",e.yearRange),r.Ib(1),r.sc("control",e.form.get("ngayKhaiBao")),r.Ib(4),r.sc("control",e.form.get("noiDungKhaiBao"))("title","N\u1ed9i dung khai b\xe1o"),r.Ib(2),r.sc("control",e.form.get("noiDungKhaiBao")),r.Ib(1),r.sc("title","Danh s\xe1ch t\xe0i s\u1ea3n khai b\xe1o m\u1ea5t"),r.Ib(2),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("scrollable",e.scrollable))},directives:[m.z,m.q,m.i,M.a,T.a,m.b,m.x,m.k,m.p,m.g,Ae.a,m.f,z.a,q.a,Z.c,w.d,Z.b,Z.a],pipes:[I.a,n.d,n.e],styles:[""]}),mn),Cn=["dt"];function Tn(a,e){1&a&&(r.ac(0,"tr"),r.Vb(1,"th",25),r.ac(2,"th",26),r.Rc(3,"\u0110\u01a1n v\u1ecb khai b\xe1o "),r.Vb(4,"p-sortIcon",27),r.Zb(),r.ac(5,"th",28),r.Rc(6,"Ng\u01b0\u1eddi khai b\xe1o "),r.Vb(7,"p-sortIcon",29),r.Zb(),r.ac(8,"th",30),r.Rc(9,"Ng\xe0y khai b\xe1o "),r.Vb(10,"p-sortIcon",31),r.Zb(),r.ac(11,"th",32),r.Rc(12,"N\u1ed9i dung khai b\xe1o "),r.Vb(13,"p-sortIcon",33),r.Zb(),r.ac(14,"th",34),r.Rc(15,"Khai b\xe1o "),r.Vb(16,"p-sortIcon",35),r.Zb(),r.Zb())}function Sn(a,e){if(1&a){var t=r.bc();r.ac(0,"tr",36),r.ac(1,"td",25),r.ac(2,"div",37),r.ac(3,"button",38),r.Vb(4,"i",39),r.Zb(),r.ac(5,"div",40),r.ac(6,"a",41),r.ic("click",(function(){r.Ic(t);var a=e.$implicit;return r.lc().watch(a.id)})),r.Rc(7,"Xem"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(8,"td",42),r.Rc(9),r.mc(10,"truncate"),r.Zb(),r.ac(11,"td",42),r.Rc(12),r.mc(13,"truncate"),r.Zb(),r.ac(14,"td",42),r.Rc(15),r.mc(16,"date"),r.mc(17,"truncate"),r.Zb(),r.ac(18,"td",42),r.Rc(19),r.mc(20,"truncate"),r.Zb(),r.ac(21,"td",42),r.Rc(22),r.mc(23,"truncate"),r.Zb(),r.Zb()}if(2&a){var n=e.$implicit,i=r.lc();r.Ib(9),r.Tc(" ",r.nc(10,5,n.phongBanKhaiBao)," "),r.Ib(3),r.Tc(" ",r.nc(13,7,n.nguoiKhaiBao)," "),r.Ib(3),r.Tc(" ",r.oc(16,9,r.nc(17,12,n.ngayKhaiBao),"dd/MM/yyyy")," "),r.Ib(4),r.Tc(" ",r.nc(20,14,n.noiDungKhaiBao)," "),r.Ib(3),r.Tc(" ",r.nc(23,16,i.models.TinhTrangSuDungTaiSanSorted[n.khaiBao])," ")}}function yn(a,e){if(1&a&&(r.ac(0,"tr"),r.ac(1,"td",43),r.Rc(2),r.Zb(),r.Zb()),2&a){var t=r.lc();r.Ib(2),r.Sc(t.khongCoDuLieu)}}var kn,Zn=((kn=function(a){_inherits(t,a);var e=_createSuper(t);function t(a,n,i,o,c){var r;return _classCallCheck(this,t),(r=e.call(this,a))._modalService=n,r._taiSanServiceProxy=i,r._lookupTableService=o,r._fb=c,r.isActive=0,r.loading=!0,r.exporting=!1,r.totalCount=0,r.records=[],r.arrTaiSanChecked=[],r.selectedValues=[],r.arrKhaiBao=[],r.tenTaiSan="",r._unsubscribe=[],r}return _createClass(t,[{key:"ngOnChanges",value:function(a){var e;8===(null===(e=a.isActive)||void 0===e?void 0:e.currentValue)&&(this.getDataPage(!1),this.arrTaiSanChecked=[])}},{key:"ngOnInit",value:function(){var a=this;this.formCreate(),this.bindingData(),this._lookupTableService.getAllToChucTheoNguoiDung().subscribe((function(e){a.toChucItems={data:e,selectedData:e.map((function(a){return a.id}))},a.toChucValue=e.map((function(a){return a.id})),a.getDataPage(!1)}))}},{key:"bindingData",value:function(){var a=this;Object(L.a)(this._lookupTableService.getAllTrangThaiTaiSan()).subscribe((function(e){var t=_slicedToArray(e,1)[0];a.arrKhaiBao=t.filter((function(e){return e.id===a.enums.TrangThaiTaiSanConst.TaiSanHong||e.id===a.enums.TrangThaiTaiSanConst.TaiSanMat}))}))}},{key:"ngOnDestroy",value:function(){this._unsubscribe.forEach((function(a){return a.unsubscribe()}))}},{key:"getDataPage",value:function(a,e){var t=this;this.arrTaiSanChecked=[],this.loading=!0,this._taiSanServiceProxy.getAllKhaiBaoHongMat(this.form.value.timKiemKhaiBao||void 0,this.toChucValue||void 0,this.form.value.khaiBao.id||void 0,a,this.getSortField(this.table),e?e.first:this.table.first,e?e.rows:this.table.rows).pipe(Object(d.a)((function(){t.loading=!1}))).subscribe((function(a){t.records=a.items,t.totalCount=a.totalCount}))}},{key:"watch",value:function(a){this._showCreateOrEditDemoDialog(a)}},{key:"_showCreateOrEditDemoDialog",value:function(a){var e=this,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._modalService.show(vn,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:a,isView:t}}).content.onSave.subscribe((function(){e.getDataPage(!1)}))}},{key:"search",value:function(a,e){var t=this,n=a.query;"khaiBao"===e&&this._lookupTableService.getAllTrangThaiTaiSan().pipe(Object(ce.a)((function(a){return a.filter((function(a){return a.id===t.enums.TrangThaiTaiSanConst.TaiSanHong||a.id===t.enums.TrangThaiTaiSanConst.TaiSanMat}))}))).subscribe((function(a){t.suggestionsSingle=t.filter(n,a)}))}},{key:"filter",value:function(a,e){var t,n=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;0===o.displayName.toLowerCase().indexOf(a.toLowerCase())&&n.push(o)}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"formCreate",value:function(){this.form=this._fb.group({timKiemKhaiBao:[""],phongBanKhaiBao:[""],khaiBao:[""]})}}]),t}(c.a)).\u0275fac=function(a){return new(a||kn)(r.Ub(r.u),r.Ub(u.b),r.Ub(s.M),r.Ub(s.T),r.Ub(m.d))},kn.\u0275cmp=r.Ob({type:kn,selectors:[["app-khai-bao-hong-mat-tai-san"]],viewQuery:function(a,e){var t;1&a&&r.Vc(Cn,!0),2&a&&r.Ec(t=r.jc())&&(e.table=t.first)},inputs:{isActive:"isActive"},features:[r.Fb,r.Gb],decls:33,vars:22,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"content","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","change","keyup.enter"],[1,"form-horizontal",3,"formGroup"],[1,"ui-fluid","row","m-t-10"],[1,"col-md-6"],[1,"form-group"],[3,"form","title"],[3,"dataEdit","onSelect"],["for","DmCaLamViec_lblMaCaLamViec","id","DmCaLamViec_lblMaCaLamViec"],["formControlName","khaiBao","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[3,"value","selection","lazy","paginator","loading","showCurrentPageReport","currentPageReportTemplate","rows","totalRecords","rowsPerPageOptions","scrollable","scrollHeight","selectionChange","onLazyLoad"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-25"],["pSortableColumn","phongBanKhaiBao",1,"width-150"],["field","phongBanKhaiBao"],["pSortableColumn","nguoiKhaiBao",1,"width-150"],["field","nguoiKhaiBao"],["pSortableColumn","ngayKhaiBao",1,"width-150"],["field","ngayKhaiBao"],["pSortableColumn","noiDungKhaiBao",1,"width-150"],["field","noiDungKhaiBao"],["pSortableColumn","khaiBao",1,"width-150"],["field","khaiBao"],[1,"ui-selectable-row"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"width-150"],["colspan","8",1,"text-left"]],template:function(a,e){1&a&&(r.ac(0,"div"),r.ac(1,"section",0),r.ac(2,"div",1),r.ac(3,"div",2),r.ac(4,"div",3),r.ac(5,"h1"),r.Rc(6,"Qu\u1ea3n l\xfd Khai b\xe1o h\u1ecfng/m\u1ea5t t\xe0i s\u1ea3n"),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(7,"section",4),r.ac(8,"div",1),r.ac(9,"div",5),r.ac(10,"div",6),r.ac(11,"div",7),r.ac(12,"div",8),r.ac(13,"button",9),r.ic("click",(function(){return e.getDataPage(!0)})),r.Vb(14,"i",10),r.Zb(),r.Zb(),r.ac(15,"input",11),r.ic("change",(function(a){return e.form.get("timKiemKhaiBao").setValue(a.target.value)}))("keyup.enter",(function(){return e.getDataPage(!0)})),r.Zb(),r.Zb(),r.ac(16,"form",12),r.ac(17,"div",13),r.ac(18,"div",14),r.ac(19,"div",15),r.Vb(20,"dft-label-validation",16),r.ac(21,"app-multiple-select-tree",17),r.ic("onSelect",(function(a){return e.toChucValue=a})),r.Zb(),r.Zb(),r.Zb(),r.ac(22,"div",14),r.ac(23,"div",15),r.ac(24,"label",18),r.Rc(25,"Khai b\xe1o"),r.Zb(),r.Vb(26,"p-dropdown",19),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.ac(27,"div"),r.ac(28,"p-table",20,21),r.ic("selectionChange",(function(a){return e.arrTaiSanChecked=a}))("onLazyLoad",(function(a){return e.getDataPage(!1,a)})),r.Pc(30,Tn,17,0,"ng-template",22),r.Pc(31,Sn,24,18,"ng-template",23),r.Pc(32,yn,3,1,"ng-template",24),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb()),2&a&&(r.sc("@routerTransition",void 0),r.Ib(15),r.sc("placeholder","Nh\u1eadp ng\u01b0\u1eddi khai b\xe1o, ng\xe0y khai b\xe1o, n\u1ed9i dung khai b\xe1o"),r.Ib(1),r.sc("formGroup",e.form),r.Ib(4),r.sc("form",e.form)("title","\u0110\u01a1n v\u1ecb khai b\xe1o"),r.Ib(1),r.sc("dataEdit",e.toChucItems),r.Ib(5),r.sc("options",e.arrKhaiBao)("placeholder",e.dropdownPlaceholder)("showClear",!0)("filter",!0),r.Ib(2),r.uc("currentPageReportTemplate","",0==e.totalCount?"":" Hi\u1ec3n th\u1ecb: {first}-{last}/{totalRecords}"," "),r.tc("scrollHeight",e.scrollHeight),r.sc("value",e.records)("selection",e.arrTaiSanChecked)("lazy",!0)("paginator",e.paginator)("loading",e.loading)("showCurrentPageReport",e.showCurrentPageReport)("rows",e.paginatorRows)("totalRecords",e.totalCount)("rowsPerPageOptions",e.rowsPerPageOptions)("scrollable",e.scrollable))},directives:[m.z,m.q,m.i,T.a,S.a,k.a,m.p,m.g,Z.c,w.d,Z.b,Z.a],pipes:[I.a,n.d],styles:[""],data:{animation:[Object(h.b)()]}}),kn);function wn(a,e){if(1&a){var t=r.bc();r.ac(0,"p-tabView",1),r.ic("onChange",(function(a){return r.Ic(t),r.lc().onTabChange(a)})),r.ac(1,"p-tabPanel",2),r.Vb(2,"app-toan-bo-tai-san",3),r.Zb(),r.ac(3,"p-tabPanel",4),r.Vb(4,"app-tai-san-chua-su-dung",3),r.Zb(),r.ac(5,"p-tabPanel",5),r.Vb(6,"app-tai-san-dang-su-dung",3),r.Zb(),r.ac(7,"p-tabPanel",6),r.Vb(8,"app-tai-san-sua-chua-bao-duong",3),r.Zb(),r.ac(9,"p-tabPanel",7),r.Vb(10,"app-tai-san-mat",3),r.Zb(),r.ac(11,"p-tabPanel",8),r.Vb(12,"app-tai-san-hong",3),r.Zb(),r.ac(13,"p-tabPanel",9),r.Vb(14,"app-tai-san-thanh-ly",3),r.Zb(),r.ac(15,"p-tabPanel",10),r.Vb(16,"app-tai-san-huy",3),r.Zb(),r.ac(17,"p-tabPanel",11),r.Vb(18,"app-khai-bao-hong-mat-tai-san",3),r.Zb(),r.Zb()}if(2&a){var n=r.lc();r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==0),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==1),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==2),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==3),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==4),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==5),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==6),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==7),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0),r.Ib(1),r.sc("selected",n.appSession.taiSanTabIndexActive-0==8),r.Ib(1),r.sc("isActive",n.appSession.taiSanTabIndexActive-0)}}var In,Dn,Rn,Vn=[{path:"",component:(In=function(a){_inherits(t,a);var e=_createSuper(t);function t(a){return _classCallCheck(this,t),e.call(this,a)}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"onTabChange",value:function(a){abp.utils.setCookieValue("taiSanTabIndexActive",a.index,new Date(this.today.setDate(this.today.getDate()+1)),abp.appPath)}}]),t}(c.a),In.\u0275fac=function(a){return new(a||In)(r.Ub(r.u))},In.\u0275cmp=r.Ob({type:In,selectors:[["app-tai-san"]],features:[r.Fb],decls:1,vars:1,consts:[[3,"onChange",4,"ngIf"],[3,"onChange"],["header","To\xe0n b\u1ed9 t\xe0i s\u1ea3n",3,"selected"],[3,"isActive"],["header","T\xe0i s\u1ea3n ch\u01b0a s\u1eed d\u1ee5ng",3,"selected"],["header","T\xe0i s\u1ea3n \u0111ang s\u1eed d\u1ee5ng",3,"selected"],["header","T\xe0i s\u1ea3n s\u1eeda ch\u1eefa/b\u1ea3o d\u01b0\u1ee1ng",3,"selected"],["header","T\xe0i s\u1ea3n m\u1ea5t",3,"selected"],["header","T\xe0i s\u1ea3n h\u1ecfng",3,"selected"],["header","T\xe0i s\u1ea3n thanh l\xfd",3,"selected"],["header","T\xe0i s\u1ea3n h\u1ee7y",3,"selected"],["header","B\xe1o h\u1ecfng/m\u1ea5t t\xe0i s\u1ea3n",3,"selected"]],template:function(a,e){1&a&&r.Pc(0,wn,19,18,"p-tabView",0),2&a&&r.sc("ngIf",e.isGranted("Pages.QuanLyTaiSan"))},directives:[n.l,l.b,l.a,x,Qa,oe,_e,Ye,St,Ut,dn,Zn],styles:[""]}),In),canActivate:[o.a]},{path:"du-tru-mua-sam",loadChildren:function(){return Promise.all([t.e(0),t.e(25)]).then(t.bind(null,"Menm")).then((function(a){return a.DuTruMuaSamModule}))}}],_n=((Dn=function a(){_classCallCheck(this,a)}).\u0275mod=r.Sb({type:Dn}),Dn.\u0275inj=r.Rb({factory:function(a){return new(a||Dn)},imports:[[i.g.forChild(Vn)],i.g]}),Dn),Pn=t("KZX/"),Bn=t("ZAI4"),xn=((Rn=function a(){_classCallCheck(this,a)}).\u0275mod=r.Sb({type:Rn}),Rn.\u0275inj=r.Rb({factory:function(a){return new(a||Rn)},imports:[[n.b,Pn.a,_n,Bn.AppModule]]}),Rn)}}]);