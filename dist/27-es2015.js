(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{XQY7:function(t,e,o){"use strict";o.r(e),o.d(e,"ToChucModule",(function(){return H}));var i=o("ofXK"),c=o("tyNb"),a=o("FCZ4"),n=o("wzdi"),r=o("nS6G"),s=o("6i1F"),l=o("bzU9"),h=o("KALY"),u=o("K3ix"),d=o("nYR2"),b=o("fXoL"),p=o("3Pt+"),m=o("N7wC"),C=o("cp0P"),f=o("CR43"),g=o("j9gp"),v=o("7kUa"),T=o("Di65"),I=o("arFO"),w=o("0EPa");function x(t,e){if(1&t&&(b.ac(0,"div",4),b.ac(1,"div",5),b.Vb(2,"dft-label-validation",6),b.Vb(3,"input",16),b.Vb(4,"dft-validation",8),b.Zb(),b.Zb()),2&t){const t=b.lc();b.Ib(2),b.sc("control",t.form.get("maHexa"))("title","M\xe3 Hexa *"),b.Ib(2),b.sc("control",t.form.get("maHexa"))}}let y=(()=>{class t extends n.a{constructor(t,e,o,i,c){super(t),this._fb=e,this.bsModalRef=o,this._lookupTableService=i,this._toChucServiceProxy=c,this.onSave=new b.q,this.saving=!1,this.isEdit=!1,this.isView=!1,this.createInputDto=new h.wb}ngOnInit(){this.khoiTaoForm(),Object(C.a)(this._toChucServiceProxy.getAllToChucCha(),this._lookupTableService.getAllViTriDiaLyLookupTable()).subscribe(([t,e])=>{this.toChucItems=t,this.viTriDiaLyItems=e,this.id?(this.isEdit=!0,this._toChucServiceProxy.getForEdit(this.id,this.isView).subscribe(t=>{this.createInputDto=t,this._setValueForEdit()})):(this.createInputDto=new h.wb,this.isEdit=!1),this.isView?this.form.disable():this.form.enable()})}khoiTaoForm(){this.form=this._fb.group({maToChuc:["",p.y.required],tenToChuc:["",p.y.required],viTriDiaLyId:["",p.y.required],trucThuocToChucId:[void 0,p.y.required],maHexa:[""],ghiChu:[""]})}save(){""===m.a.getControlErr(this.form)&&(this.saving=!0,this._getValueForSave(),this._toChucServiceProxy.createOrEdit(this.createInputDto).pipe(Object(d.a)(()=>{this.saving=!1})).subscribe(t=>{1===t?this.showExistMessage("M\xe3 \u0111\u01a1n v\u1ecb \u0111\xe3 t\u1ed3n t\u1ea1i!"):2===t?this.showExistMessage("T\xean \u0111\u01a1n v\u1ecb \u0111\xe3 t\u1ed3n t\u1ea1i!"):3===t?this.showExistMessage("M\xe3 hexa \u0111\xe3 t\u1ed3n t\u1ea1i!"):this.id?(this.showUpdateMessage(),this.bsModalRef.hide(),this.onSave.emit()):(this.showCreateMessage(),this.bsModalRef.hide(),this.onSave.emit())}))}close(){this.bsModalRef.hide()}_getValueForSave(){var t,e;this.createInputDto.maToChuc=this.form.controls.maToChuc.value,this.createInputDto.tenToChuc=this.form.controls.tenToChuc.value,this.id||(this.createInputDto.trucThuocToChucId=null===(t=this.form.controls.trucThuocToChucId.value)||void 0===t?void 0:t.id),this.createInputDto.viTriDiaLyId=null===(e=this.form.controls.viTriDiaLyId.value)||void 0===e?void 0:e.id,this.createInputDto.ghiChu=this.form.controls.ghiChu.value}_setValueForEdit(){this.form.controls.maToChuc.setValue(this.createInputDto.maToChuc),this.form.controls.tenToChuc.setValue(this.createInputDto.tenToChuc),this.form.controls.maHexa.setValue(this.createInputDto.maHexa),this.form.controls.maHexa.disable(),this.form.controls.trucThuocToChucId.setValue(this.toChucItems.find(t=>t.id===this.createInputDto.trucThuocToChucId)),this.form.controls.viTriDiaLyId.setValue(this.viTriDiaLyItems.find(t=>t.id===this.createInputDto.viTriDiaLyId)),this.form.controls.ghiChu.setValue(this.createInputDto.ghiChu),this.form.controls.trucThuocToChucId.disable(),this.createInputDto.trucThuocToChucId||this.form.controls.trucThuocToChucId.setErrors(null)}}return t.\u0275fac=function(e){return new(e||t)(b.Ub(b.u),b.Ub(p.d),b.Ub(u.a),b.Ub(h.T),b.Ub(h.yb))},t.\u0275cmp=b.Ob({type:t,selectors:[["app-create-or-edit-to-chuc"]],outputs:{onSave:"onSave"},features:[b.Fb],decls:31,vars:29,consts:[["tabindex","-1","autocomplete","off",1,"form-horizontal",3,"formGroup","ngSubmit"],[3,"title","onCloseClick"],[1,"modal-body","fixed-modal-height"],[1,"row","ui-fluid"],[1,"col-md-6"],[1,"form-group"],[3,"control","title"],["maxlength","50","type","text","id","maToChuc","name","maToChuc","formControlName","maToChuc","pInputText",""],[3,"control"],["class","col-md-6",4,"ngIf"],["maxlength","255","type","text","id","tenToChuc","name","tenToChuc","formControlName","tenToChuc","pInputText",""],["formControlName","trucThuocToChucId","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],["formControlName","viTriDiaLyId","optionLabel","displayName","resetFilterOnHide","true",3,"options","placeholder","showClear","filter"],[1,"col-md-12"],["formControlName","ghiChu","id","ghiChu","rows","4","maxlength","4000",1,"form-control"],[3,"saveHidden","cancelLabel","cancelDisabled","onCancelClick"],["maxlength","2","type","text","id","maHexa","name","maHexa","formControlName","maHexa","pInputText",""]],template:function(t,e){1&t&&(b.ac(0,"form",0),b.ic("ngSubmit",(function(){return e.save()})),b.ac(1,"abp-modal-header",1),b.ic("onCloseClick",(function(){return e.bsModalRef.hide()})),b.Zb(),b.ac(2,"div",2),b.ac(3,"div",3),b.ac(4,"div",4),b.ac(5,"div",5),b.Vb(6,"dft-label-validation",6),b.Vb(7,"input",7),b.Vb(8,"dft-validation",8),b.Zb(),b.Zb(),b.Pc(9,x,5,3,"div",9),b.ac(10,"div",4),b.ac(11,"div",5),b.Vb(12,"dft-label-validation",6),b.Vb(13,"input",10),b.Vb(14,"dft-validation",8),b.Zb(),b.Zb(),b.ac(15,"div",4),b.ac(16,"div",5),b.Vb(17,"dft-label-validation",6),b.Vb(18,"p-dropdown",11),b.Vb(19,"dft-validation",8),b.Zb(),b.Zb(),b.ac(20,"div",4),b.ac(21,"div",5),b.Vb(22,"dft-label-validation",6),b.Vb(23,"p-dropdown",12),b.Vb(24,"dft-validation",8),b.Zb(),b.Zb(),b.ac(25,"div",13),b.ac(26,"div",5),b.Vb(27,"dft-label-validation",6),b.Vb(28,"textarea",14),b.Vb(29,"dft-validation",8),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(30,"abp-modal-footer",15),b.ic("onCancelClick",(function(){return e.close()})),b.Zb(),b.Zb()),2&t&&(b.sc("formGroup",e.form),b.Ib(1),b.sc("title",e.id?e.isView?"Xem chi ti\u1ebft: "+e.createInputDto.tenToChuc:"C\u1eadp nh\u1eadt: "+e.createInputDto.tenToChuc:"Th\xeam m\u1edbi \u0110\u01a1n v\u1ecb"),b.Ib(5),b.sc("control",e.form.get("maToChuc"))("title","M\xe3 \u0111\u01a1n v\u1ecb *"),b.Ib(2),b.sc("control",e.form.get("maToChuc")),b.Ib(1),b.sc("ngIf",e.id),b.Ib(3),b.sc("control",e.form.get("tenToChuc"))("title","T\xean \u0111\u01a1n v\u1ecb *"),b.Ib(2),b.sc("control",e.form.get("tenToChuc")),b.Ib(3),b.sc("control",e.form.get("trucThuocToChucId"))("title","\u0110\u01a1n v\u1ecb qu\u1ea3n l\xfd *"),b.Ib(1),b.sc("options",e.toChucItems)("placeholder",e.dropdownPlaceholder)("showClear",!1)("filter",!0),b.Ib(1),b.sc("control",e.form.get("trucThuocToChucId")),b.Ib(3),b.sc("control",e.form.get("viTriDiaLyId"))("title","\u0110\u1ecba ch\u1ec9 *"),b.Ib(1),b.sc("options",e.viTriDiaLyItems)("placeholder",e.dropdownPlaceholder)("showClear",!1)("filter",!0),b.Ib(1),b.sc("control",e.form.get("viTriDiaLyId")),b.Ib(3),b.sc("control",e.form.get("ghiChu"))("title","Ghi ch\xfa"),b.Ib(2),b.sc("control",e.form.get("ghiChu")),b.Ib(1),b.sc("saveHidden",e.isView)("cancelLabel",e.isView?"\u0110\xf3ng":"H\u1ee7y")("cancelDisabled",e.saving))},directives:[p.z,p.q,p.i,f.a,g.a,p.b,p.k,p.p,p.g,v.a,T.a,i.l,I.a,w.a],styles:[""]}),t})();var Z=o("tk/3"),D=o("EVgl"),S=o("7zfz");const V=["dt"];function k(t,e){1&t&&(b.ac(0,"tr"),b.Vb(1,"th",21),b.ac(2,"th",22),b.Rc(3," M\xe3 \u0111\u01a1n v\u1ecb "),b.Vb(4,"p-treeTableSortIcon",23),b.Zb(),b.ac(5,"th",24),b.Rc(6," T\xean \u0111\u01a1n v\u1ecb "),b.Vb(7,"p-treeTableSortIcon",25),b.Zb(),b.ac(8,"th",26),b.Rc(9," M\xe3 Hexa "),b.Vb(10,"p-treeTableSortIcon",27),b.Zb(),b.ac(11,"th",28),b.Rc(12," \u0110\u1ecba ch\u1ec9 "),b.Vb(13,"p-treeTableSortIcon",29),b.Zb(),b.Zb())}function _(t,e){if(1&t){const t=b.bc();b.ac(0,"a",36),b.ic("click",(function(){b.Ic(t);const e=b.lc().rowData;return b.lc().delete(e)})),b.Rc(1,"X\xf3a"),b.Zb()}}function M(t,e){if(1&t){const t=b.bc();b.ac(0,"tr",30),b.ac(1,"td",31),b.ac(2,"div",32),b.ac(3,"button",33),b.Vb(4,"i",34),b.Zb(),b.ac(5,"div",35),b.ac(6,"a",36),b.ic("click",(function(){b.Ic(t);const o=e.rowData;return b.lc().view(o.toChuc.id)})),b.Rc(7,"Xem"),b.Zb(),b.ac(8,"a",36),b.ic("click",(function(){b.Ic(t);const o=e.rowData;return b.lc().create(o.toChuc.id)})),b.Rc(9,"C\u1eadp nh\u1eadt"),b.Zb(),b.Pc(10,_,2,0,"a",37),b.Zb(),b.Zb(),b.Zb(),b.ac(11,"td",38),b.Vb(12,"p-treeTableToggler",39),b.Rc(13),b.Zb(),b.ac(14,"td",38),b.Rc(15),b.Zb(),b.ac(16,"td",38),b.Rc(17),b.Zb(),b.ac(18,"td",40),b.Rc(19),b.Zb(),b.Zb()}if(2&t){const t=e.$implicit,o=e.rowData;b.sc("ttRow",t),b.Ib(10),b.sc("ngIf",o.toChuc.trucThuocToChucId>1),b.Ib(1),b.sc("ngClass",o.toChuc.trucThuocToChucId>1?"in-nghieng":"in-dam"),b.Ib(1),b.sc("rowNode",t),b.Ib(1),b.Tc(" ",o.toChuc.maToChuc," "),b.Ib(1),b.sc("ngClass",o.toChuc.trucThuocToChucId>1?"in-nghieng":"in-dam"),b.Ib(1),b.Sc(o.toChuc.tenToChuc),b.Ib(1),b.sc("ngClass",o.toChuc.trucThuocToChucId>1?"in-nghieng":"in-dam"),b.Ib(1),b.Sc(o.toChuc.maHexa),b.Ib(1),b.sc("ngClass",o.toChuc.trucThuocToChucId>1?"in-nghieng":"in-dam"),b.Ib(1),b.Sc(o.diaChi)}}function P(t,e){if(1&t&&(b.ac(0,"tr"),b.ac(1,"td",41),b.Rc(2),b.Zb(),b.Zb()),2&t){const t=b.lc();b.Ib(2),b.Sc(t.khongCoDuLieu)}}const R=r.a.remoteServiceBaseUrl+"/api/Upload/ToChucUpload",E=[{path:"",component:(()=>{class t extends n.a{constructor(t,e,o,i,c){super(t),this._http=e,this._modalService=o,this._fileDownloadService=i,this._toChucServiceProxy=c,this.loading=!0,this.exporting=!1,this.keyword="",this.totalCount=0,this.records=[]}ngOnInit(){this.getDataPage(!1)}getDataPage(t){this.loading=!0,this._toChucServiceProxy.getAll(this.keyword||void 0,t).pipe(Object(d.a)(()=>{this.loading=!1})).subscribe(t=>{this.records=t,this.totalCount=t.length})}create(t){this._showCreateOrEditToChucDialog(t)}view(t){this._showCreateOrEditToChucDialog(t,!0)}delete(t){this.swal.fire({title:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn kh\xf4ng?",text:"\u0110\u01a1n v\u1ecb "+t.toChuc.tenToChuc+" s\u1ebd b\u1ecb x\xf3a!",icon:"warning",showCancelButton:!0,confirmButtonColor:this.confirmButtonColor,cancelButtonColor:this.cancelButtonColor,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText}).then(e=>{e.value&&this._toChucServiceProxy.delete(t.toChuc.id).subscribe(()=>{this.showDeleteMessage(),this.getDataPage(!1)})})}importExcel(){this._showImportToChucDialog()}exportToExcel(){this.exporting=!0,this.input=new h.xb,this._toChucServiceProxy.exportToExcel(this.input).subscribe(t=>{this._fileDownloadService.downloadTempFile(t),this.exporting=!1},()=>{this.exporting=!1})}_showCreateOrEditToChucDialog(t,e=!1){let o;o=this._modalService.show(y,{class:"modal-xl",ignoreBackdropClick:!0,initialState:{id:t,isView:e}}),o.content.onSave.subscribe(()=>{this.getDataPage(!1)})}_showImportToChucDialog(){let t;t=this._modalService.show(s.a,{class:"modal-lg",ignoreBackdropClick:!0,initialState:{maxFile:1,excelAcceptTypes:this.excelAcceptTypes}}),t.content.onDownload.subscribe(()=>{this._toChucServiceProxy.downloadFileMau().subscribe(e=>{t.content.downLoading=!1,this._fileDownloadService.downloadTempFile(e)})}),t.content.onSave.subscribe(e=>{t.content.returnMessage="\u0110ang upload file....";const o=new FormData;for(let t=0;t<e.length;t++)o.append(t+1+"",e[t]);this._http.post(R,o).subscribe(e=>{this._toChucServiceProxy.importFileExcel(e.result[0]).subscribe(e=>{t.content.returnMessage=e,t.content.uploading=!1,t.content.uploadDone()})})}),t.content.onClose.subscribe(()=>{this.getDataPage(!1)})}}return t.\u0275fac=function(e){return new(e||t)(b.Ub(b.u),b.Ub(Z.b),b.Ub(u.b),b.Ub(l.a),b.Ub(h.yb))},t.\u0275cmp=b.Ob({type:t,selectors:[["app-to-chuc"]],viewQuery:function(t,e){var o;1&t&&b.Vc(V,!0),2&t&&b.Ec(o=b.jc())&&(e.table=o.first)},features:[b.Fb],decls:27,vars:5,consts:[["id","tesst",1,"content-header"],[1,"container-fluid"],[1,"row"],[1,"col-6"],[1,"col-6","text-right"],["type","button",1,"btn","btn-primary","m-r-5",3,"click"],[1,"fa","fa-plus"],[2,"margin-left","5px"],[1,"contenToChuct","px-2"],[1,"card","m-0"],[1,"card-header"],[1,"input-group"],[1,"input-group-prepend"],["type","button",1,"btn","bg-blue",3,"click"],[1,"fas","fa-search"],["type","text","name","keyword",1,"form-control",3,"placeholder","ngModel","ngModelChange","keyup.enter"],[1,"auto-scroll"],["sortField","toChuc.tenToChuc",3,"value","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"width-40","table-border"],["ttSortableColumn","toChuc.maToChuc",1,"width-200","table-border"],["field","toChuc.maToChuc"],["ttSortableColumn","toChuc.tenToChuc",1,"width-200","table-border"],["field","toChuc.tenToChuc"],["ttSortableColumn","maHe10",1,"width-200","table-border"],["field","maHe10"],["ttSortableColumn","diaChi",1,"width-400","table-border"],["field","diaChi"],[3,"ttRow"],[1,"width-30","table-border"],[1,"dropdown"],["type","button","id","dropdownMenuButton","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle","btn","btn-sm","btn-transparent","btn-action"],[1,"fas","fa-ellipsis-v"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"w-200","table-border",3,"ngClass"],[3,"rowNode"],[1,"w-400","table-border",3,"ngClass"],["colspan","2",1,"text-left"]],template:function(t,e){1&t&&(b.ac(0,"div"),b.ac(1,"section",0),b.ac(2,"div",1),b.ac(3,"div",2),b.ac(4,"div",3),b.ac(5,"h1"),b.Rc(6,"Qu\u1ea3n l\xfd \u0110\u01a1n v\u1ecb"),b.Zb(),b.Zb(),b.ac(7,"div",4),b.ac(8,"button",5),b.ic("click",(function(){return e.create()})),b.Vb(9,"i",6),b.ac(10,"span",7),b.Rc(11,"Th\xeam m\u1edbi"),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.ac(12,"section",8),b.ac(13,"div",1),b.ac(14,"div",9),b.ac(15,"div",10),b.ac(16,"div",11),b.ac(17,"div",12),b.ac(18,"button",13),b.ic("click",(function(){return e.getDataPage(!0)})),b.Vb(19,"i",14),b.Zb(),b.Zb(),b.ac(20,"input",15),b.ic("ngModelChange",(function(t){return e.keyword=t}))("keyup.enter",(function(){return e.getDataPage(!0)})),b.Zb(),b.Zb(),b.Zb(),b.ac(21,"div"),b.ac(22,"div",16),b.ac(23,"p-treeTable",17),b.Pc(24,k,14,0,"ng-template",18),b.Pc(25,M,20,11,"ng-template",19),b.Pc(26,P,3,1,"ng-template",20),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb(),b.Zb()),2&t&&(b.sc("@routerTransition",void 0),b.Ib(20),b.sc("placeholder","Nh\u1eadp t\xean m\xe3 \u0111\u01a1n v\u1ecb, t\xean \u0111\u01a1n v\u1ecb, m\xe3 hexa c\u1ee7a \u0111\u01a1n v\u1ecb")("ngModel",e.keyword),b.Ib(3),b.sc("value",e.records)("loading",e.loading))},directives:[p.b,p.p,p.s,D.d,S.d,D.c,D.b,D.a,i.l,i.j,D.f],styles:[".table-border[_ngcontent-%COMP%]{border:1px solid #c8c8c8!important}.in-dam[_ngcontent-%COMP%]{font-weight:700}.in-nghieng[_ngcontent-%COMP%]{font-style:italic}.auto-scroll[_ngcontent-%COMP%]{overflow:auto}"],data:{animation:[Object(a.b)()]}}),t})()}];let F=(()=>{class t{}return t.\u0275mod=b.Sb({type:t}),t.\u0275inj=b.Rb({factory:function(e){return new(e||t)},imports:[[c.g.forChild(E)],c.g]}),t})();var L=o("KZX/");let H=(()=>{class t{}return t.\u0275mod=b.Sb({type:t}),t.\u0275inj=b.Rb({factory:function(e){return new(e||t)},imports:[[i.b,L.a,F]]}),t})()}}]);